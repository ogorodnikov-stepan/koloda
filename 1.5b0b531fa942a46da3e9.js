"use strict";(self.webpackChunkkoloda=self.webpackChunkkoloda||[]).push([[1],{9001:(e,s,a)=>{a.r(s),a.d(s,{default:()=>B});var t=a(5893),n=a(7294),d=a(6228),r=a(4232),i=a(2327),o=a(3727),c=a(6829),l=a(5443),u=a(7450);function g(){return null}var p=a(7139),m=a(7325);const h="auth:authentication.login",f=!0;function x(){const{t:e}=(0,i.$)(),[s,a]=(0,n.useState)({remember:f}),{status:d,isLoading:o,isError:c,error:l,mutate:u}=(0,r.YA)({}),g=(0,n.useCallback)((({target:{name:e,value:s,checked:t}})=>{a((a=>({...a,[e]:"remember"===e?!t:s})))}),[]),x=(0,n.useCallback)((e=>{e.preventDefault(),u(s)}),[s]);return(0,t.jsxs)("form",{className:"login-form",onSubmit:x,children:[(0,t.jsx)(p.Z,{className:"login-form__login",name:"login",placeholder:e(`${h}.login.label`),isError:!!l?.meta?.errors?.login?.login,errors:l?.meta?.errors?.login?.login,errorPrefix:`${h}.login.errors`,value:s.login||"",onChange:g}),(0,t.jsx)(p.Z,{className:"login-form__password",name:"password",type:"password",placeholder:e(`${h}.password.label`),isError:!!l?.meta?.errors?.login?.password,errors:l?.meta?.errors?.login?.password,errorPrefix:`${h}.password.errors`,value:s.password||"",onChange:g}),(0,t.jsx)(m.Z,{className:"login-form__submit",type:"submit",disabled:o,onClick:x,content:e(`${h}.submit.${o?"loading":"text"}`)}),(0,t.jsxs)("span",{className:"login-form__status","data-status":d,children:[c&&404===l?.status&&e(`${h}.messages.404`),c&&l?.status>500&&e(`${h}.messages.5xx`)]})]})}const j="auth:authentication";function k(){const{t:e}=(0,i.$)();return(0,t.jsxs)(u.Z,{entity:"authentication",children:[(0,t.jsxs)(l.mQ,{children:[(0,t.jsx)(u.Z.Header,{children:(0,t.jsxs)(l.TX,{children:[(0,t.jsx)(l.GK,{children:e(`${j}.login.title`)}),(0,t.jsx)(l.GK,{disabled:!0,children:e(`${j}.signup.title`)})]})}),(0,t.jsxs)(u.Z.Content,{children:[(0,t.jsx)(l.I5,{children:(0,t.jsx)(x,{})}),(0,t.jsx)(l.I5,{children:(0,t.jsx)(g,{})})]})]}),(0,t.jsx)(u.Z.Footer,{children:(0,t.jsx)(o.rU,{className:"authentication__demo-link",to:c.Z.home({isDemo:!0}),children:e(`${j}.demo`)})})]})}var v=a(8479),b=a(5977),E=a(8767),$=a(8172),Z=a(3465),_=a.n(Z);const C={meta:{status:"idle"},language:"",reppings:{ids:{},data:[],index:0},decks:{data:[],index:0},user:{}};function R({language:e}){return{...C,language:e}}const N={languageUpdated:function(e,{value:s}){e.language=s},dataSubmitted:function(e){e.meta.isLoading=!0,e.meta.status="loading"},dataReceived:function(e,s){e.meta.isLoaded=!0,e.user.data=s.user,e.reppings.data=s.reppings,e.decks.data=s.decks},dataCleared:function(e){const{reppings:s,decks:a}=e;e.meta.isCleared=!0,s.data.length?s.load=s.data[s.index]:a.data.length?a.load=a.data[a.index]:e.user.add=e.user.data},userAdded:function(e){e.meta.isDone=!0,e.meta.status="success"},errorReceived:function(e){e.meta.isError=!0,e.meta.isLoading=!1,e.meta.status="error",delete e.reppings.load,delete e.reppings.add,delete e.decks.load,delete e.decks.add,delete e.user.load},reppingReceived:function(e,s){e.reppings.add=_()(s)},reppingAdded:function(e,{data:s}){const a=e.reppings.data[e.reppings.index];a&&(e.reppings.ids[a]=s.id,e.reppings.index+=1,e.reppings.index>e.reppings.data.length-1?e.decks.load=e.decks.data[e.decks.index]:(e.reppings.load=e.reppings.data[e.reppings.index],delete e.reppings.add))},deckReceived:function(e,s){e.reppings.ids[s.reppingId]&&(s.reppingId=e.reppings.ids[s.reppingId]);e.decks.add=_()(s)},deckAdded:function(e){e.decks.index+=1,e.decks.index>e.decks.data.length-1?e.user.add=e.user.data:(e.decks.load=e.decks.data[e.decks.index],delete e.decks.add)}};const D=(0,$.ZP)(((e,[s,a])=>(N[s]&&N[s](e,a),e)));var w=a(9025);const S="app:pages.demo";function L({state:e,dispatch:s}){const{t:a}=(0,i.$)("app"),{meta:{status:d,isLoading:r,isError:o}}=e,c=(0,n.useCallback)((({target:{value:e}})=>{s(["languageUpdated",{value:e}])}),[]),l=(0,n.useCallback)((()=>{s(["dataSubmitted",{}])}),[e.language]);return(0,t.jsxs)("div",{className:"demo__form",children:[(0,t.jsx)(w.Z,{label:a(`${S}.language.label`),disabled:"idle"!==d,value:e.language,onChange:c}),(0,t.jsx)(m.Z,{className:"demo__submit",disabled:r||o,onClick:l,content:a(`${S}.submit`)}),(0,t.jsx)("span",{className:"demo__status","data-status":d,children:a(`${S}.status.${d}`)})]})}var A=a(4434);function y({state:e,dispatch:s}){const{meta:{isLoaded:a},language:t}=e,{data:d,isError:r}=(0,A.vB)({language:t,enabled:!a});return(0,n.useEffect)((()=>{d&&s(["dataReceived",d])}),[d]),(0,n.useEffect)((()=>{r&&s(["errorReceived",{}])}),[r]),null}function I({state:e,dispatch:s}){const{meta:{isLoaded:a,isCleared:t}}=e,{mutate:d}=(0,A.YJ)();return(0,n.useEffect)((()=>{a&&!t&&d({},{onSuccess:()=>{s(["dataCleared",{}])},onError:()=>{s(["errorReceived",{}])}})}),[a,t]),null}function U({state:e,dispatch:s}){const{user:{add:a}}=e,{mutate:t}=(0,r.sU)({isDemo:!0});return(0,n.useEffect)((()=>{a&&t(a,{onSuccess:e=>{s(["userAdded",e])},onError:()=>{s(["errorReceived",{}])}})}),[a]),null}var P=a(6118);function T({state:e,dispatch:s}){const{reppings:{load:a,add:t},language:d}=e,{data:r,isError:i}=(0,A.PY)({language:d,name:a}),{mutate:o}=(0,P.$r)({isDemo:!0});return(0,n.useEffect)((()=>{r&&s(["reppingReceived",r])}),[r]),(0,n.useEffect)((()=>{t&&o(t,{onSuccess:e=>{s(["reppingAdded",e])},onError:()=>{s(["errorReceived",{}])}})}),[t]),(0,n.useEffect)((()=>{i&&s(["errorReceived",{}])}),[i]),null}var F=a(5619);function Q({state:e,dispatch:s}){const{decks:{load:a,add:t},language:d}=e,{data:r,isError:i}=(0,A.SC)({language:d,name:a}),{mutate:o}=(0,F.xD)({isDemo:!0});return(0,n.useEffect)((()=>{r&&s(["deckReceived",r])}),[r]),(0,n.useEffect)((()=>{t&&o(t,{onSuccess:e=>{s(["deckAdded",e])},onError:()=>{s(["errorReceived",{}])}})}),[t]),(0,n.useEffect)((()=>{i&&s(["errorReceived",{}])}),[i]),null}function Y({state:e,dispatch:s}){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y,{state:e,dispatch:s}),(0,t.jsx)(I,{state:e,dispatch:s}),(0,t.jsx)(U,{state:e,dispatch:s}),(0,t.jsx)(T,{state:e,dispatch:s}),(0,t.jsx)(Q,{state:e,dispatch:s})]})}const G="app:pages.demo",H=800;function K(){const{t:e,i18n:{language:s}}=(0,i.$)(),{push:a}=(0,b.k6)(),d=(0,E.useQueryClient)(),[r,l]=(0,n.useReducer)(D,{language:s},R),{meta:{isLoading:g,isDone:p}}=r;return(0,n.useEffect)((()=>{const e=setTimeout((()=>{p&&(d.resetQueries(["users","current"]),a(c.Z.home({isDemo:!0})))}),H);return()=>clearTimeout(e)}),[p]),(0,t.jsxs)(u.Z,{entity:"demo",children:[(0,t.jsx)(u.Z.Header,{children:(0,t.jsx)(u.Z.Title,{children:e(`${G}.title`)})}),(0,t.jsx)(u.Z.Content,{children:(0,t.jsx)(u.Z.Section,{className:"demo",children:(0,t.jsxs)("div",{className:"demo__content",children:[(0,t.jsx)(L,{state:r,dispatch:l}),g&&!p&&(0,t.jsx)(Y,{state:r,dispatch:l})]})})}),(0,t.jsx)(u.Z.Footer,{children:(0,t.jsx)(o.rU,{className:"demo__auth-link",to:c.Z.home({}),children:e(`${G}.auth`)})})]})}function B({isDemo:e}){const s=(0,d.oR)(d.N1),{isLoading:a,data:i}=(0,r.rk)({isDemo:e});return(0,n.useEffect)((()=>{s(!!e)}),[e]),a?null:i?.data.uid?(0,t.jsx)(v.Z,{isDemo:!0}):e?(0,t.jsx)(K,{}):(0,t.jsx)(k,{})}}}]);