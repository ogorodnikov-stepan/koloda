"use strict";(self.webpackChunkkoloda=self.webpackChunkkoloda||[]).push([[196],{3975:(e,s,t)=>{t.r(s),t.d(s,{default:()=>le});var i=t(5893),a=t(5977),r=t(6056),d=t(7294),l=t(2327),n=t(5608),o=t(6118),c=t(2594),p=t(5443),u=t(7450),m=t(8172),v=t(691),g=t(6347),h=t(7474),x=t(8651);const f={meta:{tabs:{headers:["about","divels"],items:{about:{disabled:!1},divels:{disabled:!1}}}},repping:{status:{editbar:{variant:"click",mode:"view"},message:"initial",isSaved:!0,discard:{isEnabled:!0,isReady:!0},canEdit:!0}},divels:{status:{editbar:{variant:"click",mode:"view"},message:"initial",isSaved:!0,discard:{isEnabled:!0,isReady:!0},canEdit:!0}}},b={isDemoSet:v.s6,editbarModeSet:v.SE,dataReceived:function(e,{data:s}){e.repping.data=s,e.repping.status.isLoaded=!0,e.divels.data={reppingId:s.id,divels:s.divels},e.divels.status.isLoaded=!0,e.meta.title=s.title,j(e),_(e)},reppingUpdated:function(e,s){const{property:t,value:i}=s,{data:a,status:r}=e.repping;a&&a[t]!==i&&((0,v.D5)(r),a[t]=i)},divelAdded:function(e){if(!e.divels.data?.divels)return;const{data:{divels:s},status:t}=e.divels,i=(0,g.Dc)(s);s.push({...h.VS,id:i,isDefault:s.length<1}),(0,v.D5)(t),j(e)},divelUpdated:function(e,s){const{index:t,property:i,value:a}=s,{data:r,status:d}=e.divels,{divels:l}=r;l?.[t]&&("isDefault"===i?(0,x.C)(l,t):l[t][i]=a,(0,v.D5)(d))},divelDeleted:function(e,s){const{data:t,status:i}=e.divels,{divels:a}=t||{};a&&(a.splice(s.index,1),(0,v.D5)(i))},divelMoved:function(e,s){const{destination:t,source:i}=s,{data:a,status:r}=e.divels,{divels:d}=a||{};d&&(d.splice(t,0,d.splice(i,1)[0]),(0,v.D5)(r))},changesDiscarded:function(e,{entity:s}){(0,v.Om)(e,{entity:s}),"divels"===s&&j(e)},validationCompleted:v.zs,validationFailed:v.GG,savingInitiated:v.fn,savingFailed:v.y$,savingCompleted:function(e,{entity:s,data:t}){(0,v.tH)(e[s]),e.repping.data&&(e.repping.data.isEligible=t.isEligible,e.repping.data.updatedAt=t.updatedAt,"repping"===s&&(e.meta.title=e.repping.data.title),"divels"===s&&_(e))}};function j(e){const{divels:s}=e.divels?.data||{};s&&(e.divels.status.canAdd=s.length<h.Ft)}function _(e){if(e.divels?.data?.divels){const s=e.divels.data.divels.map((({phases:e,...s})=>s));e.divels.data.divels=s}}const N=(0,m.ZP)(((e,[s,t])=>(b[s]&&b[s](e,t),e)));var y=t(7325);var D=t(4220),E=t(4730),Z=t(6228);const $="repping",k=500;function S({state:e,dispatch:s}){const t=(0,Z.oR)(Z.zr),i=(0,o.Nb)({isDemo:t,validationOnly:!0}),a=(0,o.Nb)({isDemo:t}),{data:r,status:{isSaved:l,isSaving:n}}=e[$];return(0,E.Z)((()=>{l||i.mutate(r)}),k,[r,l]),(0,d.useEffect)((()=>{i.isSuccess&&s(["validationCompleted",{entity:$}])}),[i.isSuccess]),(0,d.useEffect)((()=>{i.isError&&s(["validationFailed",{entity:$,error:i.error}])}),[i.isError,i.error]),(0,d.useEffect)((()=>{n&&a.mutate(r)}),[n,r]),(0,d.useEffect)((()=>{a.isSuccess&&s(["savingCompleted",{entity:$,data:a.data}])}),[a.isSuccess]),(0,d.useEffect)((()=>{a.isError&&s(["savingFailed",{entity:$,error:a.error}])}),[a.isError,a.error]),null}var C=t(9907);const A="srs:reppings.one.about";function q({state:e,dispatch:s}){const{t}=(0,l.$)("srs"),{data:a}=e.repping,r=(0,d.useCallback)((({target:{name:e,value:t}})=>{s(["reppingUpdated",{property:e,value:t}])}),[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"repping-about__timestamps timestamps",children:[a?.createdAt&&(0,i.jsx)("span",{className:"repping-about__created-at",children:t(`${A}.properties.createdAt`,{value:new Date(a?.createdAt),formatParams:{value:{dateStyle:"long"}}})}),a?.updatedAt&&a?.updatedAt!==a?.createdAt&&(0,i.jsx)("span",{className:"repping-about__updated-at",children:t(`${A}.properties.updatedAt`,{value:new Date(a?.updatedAt),formatParams:{value:{dateStyle:"long"}}})})]}),(0,i.jsxs)("div",{className:"repping-about__eligibility eligibility",children:[(0,i.jsx)("div",{className:"repping-about__is-eligible is-eligible","data-is-eligible":!!a?.isEligible,children:(0,i.jsx)("span",{children:t(`${A}.properties.isEligible.${!!a?.isEligible}`)})}),a?.requirements&&(0,i.jsx)("div",{className:"repping-about__requirements requirements",children:(0,i.jsxs)("ul",{className:"repping-about__requirements-list requirements-list",children:[(0,i.jsx)("li",{className:"repping-about__requirements-list-item requirements-list-item","data-is-checked":a.requirements.divels,children:t(`${A}.properties.requirements.divels`)}),(0,i.jsx)("li",{className:"repping-about__requirements-list-item requirements-list-item","data-is-checked":a.requirements.phases,children:t(`${A}.properties.requirements.phases`)})]})})]}),(0,i.jsx)(C.Z,{className:"repping-about__description",name:"description",label:t(`${A}.properties.description.label`),placeholder:t(`${A}.properties.description.placeholder`),readOnly:!0,value:a?.description,onChange:r})]})}var F=t(6829),R=t(7139),w=t(1835);const I="srs:reppings.one.about",P="repping_update";function U({state:e,dispatch:s}){const{t}=(0,l.$)("srs"),a=(0,Z.oR)(Z.zr),r=(0,o.rK)({isDemo:a}),{data:n,error:c}=e.repping,p=(0,d.useCallback)((({target:{name:e,value:t}})=>{s(["reppingUpdated",{property:e,value:t}])}),[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R.Z,{className:"repping-about__title",name:"title",label:t(`${I}.properties.title.label`),isError:!!c?.meta?.errors?.[P].title,errors:c?.meta?.errors?.[P].title,errorPrefix:`${I}.properties.title.errors`,value:n?.title||"",onChange:p}),(0,i.jsx)(C.Z,{className:"repping-about__description",name:"description",label:t(`${I}.properties.description.label`),placeholder:t(`${I}.properties.description.placeholder`),autoFocus:!1,value:n?.description,onChange:p}),(0,i.jsx)(w.Z,{params:{id:n?.id},mutation:r,url:F.Z.reppings({isDemo:a}),prefix:`${I}.delete`})]})}function z({state:e,dispatch:s}){const{status:{editbar:{mode:t}}}=e.repping;return(0,i.jsxs)(u.Z.SectionContent,{className:"repping-about__content",children:["view"===t&&(0,i.jsx)(q,{state:e,dispatch:s}),"edit"===t&&(0,i.jsx)(U,{state:e,dispatch:s})]})}var H=t(4813);function L(){return(0,i.jsx)(H.G,{className:"repping-about-skeleton feature__section-skeleton",lines:5})}const O="srs:reppings.one.about";function G({state:e,dispatch:s}){const{t}=(0,l.$)("srs"),{data:a,status:r}=e.repping,{mode:d}=r.editbar;return(0,i.jsxs)(u.Z.Section,{className:"repping-about",mode:d,children:[(0,i.jsx)(u.Z.SectionHeader,{className:"repping-about__header",title:t(`${O}.title`),children:(0,i.jsx)(D.Z,{className:"repping-about",entity:"repping",status:r,dispatch:s})}),!a&&(0,i.jsx)(L,{}),a&&"edit"===d&&(0,i.jsx)(S,{state:e,dispatch:s}),a&&(0,i.jsx)(z,{state:e,dispatch:s})]})}var K=t(3979);function M(){return(0,i.jsx)("div",{className:"divels-skeleton",children:(0,i.jsx)(K.Z,{items:3})})}const T="divels",V=250;function Q({state:e,dispatch:s}){const t=(0,Z.oR)(Z.zr),i=(0,o.xA)({isDemo:t,validationOnly:!0}),a=(0,o.xA)({isDemo:t}),{data:r,status:{isSaved:l,isSaving:n}}=e[T];return(0,E.Z)((()=>{l||i.mutate(r)}),V,[r,l]),(0,d.useEffect)((()=>{i.isSuccess&&s(["validationCompleted",{entity:T}])}),[i.isSuccess]),(0,d.useEffect)((()=>{i.isError&&s(["validationFailed",{entity:T,error:i.error}])}),[i.isError,i.error]),(0,d.useEffect)((()=>{n&&a.mutate(r)}),[n,r]),(0,d.useEffect)((()=>{a.isSuccess&&s(["savingCompleted",{entity:T,data:a.data}])}),[a.isSuccess]),(0,d.useEffect)((()=>{a.isError&&s(["savingFailed",{entity:T,error:a.error}])}),[a.isError,a.error]),null}var X=t(2584);function B(){const{t:e}=(0,l.$)();return(0,i.jsx)("div",{className:"divels__empty",children:(0,i.jsx)("p",{children:e("srs:divels.many.empty.message")})})}var J=t(3727);const W="srs:divels.many",Y="divels_update";function ee({drag:e,index:s,state:t,dispatch:a}){const{t:r}=(0,l.$)("srs"),n=(0,Z.oR)(Z.zr),{data:o,error:c,status:{editbar:{mode:p}}}=t.divels,{reppingId:u,divels:m}=o,v=m?.[s],g=(0,d.useCallback)((({target:{name:e,value:t}})=>{a(["divelUpdated",{index:s,property:e,value:t}])}),[s]),h=(0,d.useCallback)((()=>{a(["divelDeleted",{index:s}])}),[v.id,u,s]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(J.rU,{className:"divels-list__item-link",to:F.Z.divel({isDemo:n,reppingId:u,id:v.id}),children:[(0,i.jsx)("span",{className:"divels-list__item-index",children:s+1}),"view"===p&&(0,i.jsx)("span",{className:"divels-list__item-title",children:v.title||""}),"view"===p&&v.isDefault&&(0,i.jsx)("span",{className:"divels-list__item-default",title:r(`${W}.list.properties.default.active`)})]}),"edit"===p&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R.Z,{className:"divels-list__item-title",name:"title",placeholder:r(`${W}.list.properties.title.placeholder`),isError:!!c?.meta?.errors?.[Y]?.divels?.[s]?.title,errors:c?.meta?.errors?.[Y]?.divels?.[s]?.title,errorPrefix:`${W}.list.properties.title.errors`,errorsDropdown:!0,value:v.title||"",onChange:g}),(0,i.jsx)(y.Z,{className:"divels-list__item-default-button",name:"isDefault","data-is-selected":!0===v.isDefault,title:r(`${W}.list.properties.default.button`),onClick:g}),(0,i.jsx)(y.Z,{className:"divels-list__item-delete delete-inline-button",onClick:h}),(0,i.jsx)("div",{className:"divels-list__item-drag drag-handle",...e})]})]})}const se="srs:divels.many";function te({state:e,dispatch:s}){const{t}=(0,l.$)("srs"),{data:a,status:{canAdd:r,editbar:{mode:n}}}=e.divels,{divels:o}=a||{},c=(0,d.useCallback)((()=>{s(["divelAdded",{}])}),[]),p=(0,d.useCallback)((({destination:e,source:t})=>{e&&e.index!==t.index&&s(["divelMoved",{destination:e.index,source:t.index}])}),[]);return"view"!==n||o?.length?(0,i.jsxs)(X.Z5,{onDragEnd:p,children:[o&&o.length>0&&(0,i.jsx)(X.bK,{droppableId:"divels",children:t=>(0,i.jsxs)("ul",{className:"divels-list",ref:t.innerRef,...t.droppableProps,children:[o.map(((t,a)=>(0,i.jsx)(X._l,{draggableId:`${t.id}`,index:a,isDragDisabled:"edit"!==n,children:(t,r)=>(0,i.jsx)("li",{className:"divels-list__item","data-is-dragging":r.isDragging,ref:t.innerRef,...t.draggableProps,children:(0,i.jsx)(ee,{drag:t.dragHandleProps,index:a,state:e,dispatch:s})})},t.id))),t.placeholder]})}),"edit"===n&&r&&(0,i.jsx)(y.Z,{className:"divels__add add-button",onClick:c,content:t(`${se}.list.add`)})]}):(0,i.jsx)(B,{})}const ie="srs:divels.many";function ae({state:e,dispatch:s}){const{t}=(0,l.$)("srs"),{data:a,status:r}=e.divels,{divels:d}=a||{},{mode:n}=r.editbar;return(0,i.jsxs)(u.Z.Section,{className:"divels",mode:n,children:[(0,i.jsx)(u.Z.SectionHeader,{className:"divels",title:t(`${ie}.title`),children:(0,i.jsx)(D.Z,{className:"divels__header",entity:"divels",status:r,dispatch:s})}),!d&&(0,i.jsx)(M,{}),d&&"edit"===n&&(0,i.jsx)(Q,{state:e,dispatch:s}),d&&(0,i.jsx)(te,{state:e,dispatch:s})]})}const re="srs:reppings.one.tabs";function de({id:e,isDemo:s}){const{t}=(0,l.$)(),{isLoading:a,data:r,error:m}=(0,o.s5)({id:e},{isDemo:s}),[v,g]=(0,d.useReducer)(N,f),{title:h}=v.meta;return(0,d.useEffect)((()=>{g(["isDemoSet",s])}),[s]),(0,d.useEffect)((()=>{document.title=n.Z.repping(t,{isDemo:s,repping:h})}),[t,s,h]),(0,d.useEffect)((()=>{r&&g(["dataReceived",r])}),[r]),"ValidationError"===m?.name||404===m?.status?(0,i.jsx)(c.Z,{}):(0,i.jsx)(u.Z,{entity:"repping",children:(0,i.jsxs)(p.mQ,{className:"feature__tabs",children:[(0,i.jsxs)(u.Z.Header,{children:[(0,i.jsx)(u.Z.Title,{isLoading:a,children:h}),!1,(0,i.jsx)(p.TX,{className:"feature__tabs-header",children:v.meta.tabs.headers.map((e=>(0,i.jsx)(p.GK,{disabled:v.meta.tabs.items[e].disabled,children:t(`${re}.${e}`)},e)))})]}),(0,i.jsxs)(u.Z.Content,{children:[(0,i.jsx)(p.I5,{className:"feature__tab-content",children:(0,i.jsx)(G,{state:v,dispatch:g})}),(0,i.jsx)(p.I5,{className:"feature__tab-content",children:(0,i.jsx)(ae,{state:v,dispatch:g})})]})]})})}function le({isDemo:e}){const{id:s}=(0,a.UO)(),{isLoading:t}=(0,r.Z)({isDemo:e,isAuthRequired:!0});return t?null:(0,i.jsx)(de,{id:s,isDemo:e})}},3979:(e,s,t)=>{t.d(s,{Z:()=>d});var i=t(5893),a=t(6010);function r({className:e}){return(0,i.jsx)("div",{className:(0,a.Z)(e,"skeleton")})}function d({items:e,className:s}){return(0,i.jsx)("ul",{className:(0,a.Z)(s,"skeleton-list"),children:[...Array(e).keys()].map((e=>(0,i.jsxs)("li",{className:"skeleton-list__item",children:[(0,i.jsx)(r,{className:"skeleton-list__item-marker"}),(0,i.jsx)(r,{className:"skeleton-list__item-content"})]},e)))})}}}]);