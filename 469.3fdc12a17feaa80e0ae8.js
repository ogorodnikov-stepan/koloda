"use strict";(self.webpackChunkkoloda=self.webpackChunkkoloda||[]).push([[469],{4730:(e,s,t)=>{t.d(s,{Z:()=>a});var n=t(7294);function a(e,s,t){void 0===s&&(s=0),void 0===t&&(t=[]);var a=function(e,s){void 0===s&&(s=0);var t=(0,n.useRef)(!1),a=(0,n.useRef)(),i=(0,n.useRef)(e),r=(0,n.useCallback)((function(){return t.current}),[]),c=(0,n.useCallback)((function(){t.current=!1,a.current&&clearTimeout(a.current),a.current=setTimeout((function(){t.current=!0,i.current()}),s)}),[s]),l=(0,n.useCallback)((function(){t.current=null,a.current&&clearTimeout(a.current)}),[]);return(0,n.useEffect)((function(){i.current=e}),[e]),(0,n.useEffect)((function(){return c(),l}),[s]),[r,l,c]}(e,s),i=a[0],r=a[1],c=a[2];return(0,n.useEffect)(c,t),[i,r]}},1469:(e,s,t)=>{t.r(s),t.d(s,{default:()=>T});var n=t(5893),a=t(6056),i=t(7294),r=t(2327),c=t(5608),l=t(4232),o=t(7450),d=t(8172),u=t(3465),m=t.n(u),f=t(1468),h=t.n(f),g=t(691);const v={meta:{},user:{status:{editbar:{variant:"click",mode:"view"},message:"initial",isSaved:!0,discard:{isEnabled:!0,isReady:!0},canEdit:!0}}},b={isDemoSet:g.s6,editbarModeSet:g.SE,dataReceived:function(e,{data:s}){e.user.data=m()(s),e.user.status.isLoaded=!0},propertyUpdated:function(e,{path:s,value:t}){const{data:n,status:a}=e.user;if(!n)return;h()(n,s,t),(0,g.D5)(a)},changesDiscarded:function(e){(0,g.Om)(e,{entity:"user"})},validationCompleted:g.zs,validationFailed:g.GG,savingInitiated:g.fn,savingFailed:g.y$,savingCompleted:function(e){(0,g.tH)(e.user)}};const p=(0,d.ZP)(((e,[s,t])=>(b[s]&&b[s](e,t),e)));var _=t(4220),x=t(4730),N=t(6228);const j="user",Z=100;function S({state:e,dispatch:s}){const t=(0,N.oR)(N.zr),n=(0,l.kD)({isDemo:t,validationOnly:!0}),a=(0,l.kD)({isDemo:t}),{data:r,status:{isSaved:c,isSaving:o}}=e[j];return(0,x.Z)((()=>{c||n.mutate(r)}),Z,[r,c]),(0,i.useEffect)((()=>{n.isSuccess&&s(["validationCompleted",{entity:j}])}),[n.isSuccess]),(0,i.useEffect)((()=>{n.isError&&s(["validationFailed",{entity:j,error:n.error}])}),[n.isError,n.error]),(0,i.useEffect)((()=>{o&&a.mutate(r)}),[o,r]),(0,i.useEffect)((()=>{a.isSuccess&&s(["savingCompleted",{entity:j,data:a.data}])}),[a.isSuccess]),(0,i.useEffect)((()=>{a.isError&&s(["savingFailed",{entity:j,error:a.error}])}),[a.isError,a.error]),null}var y=t(876),k=t(9598);const E=["new","rep"];function C({state:e}){const{t:s}=(0,r.$)(),{profile:t,settings:{learning:a}}=e.user.data;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Z.Subsection,{className:"account-profile",children:(0,n.jsx)(o.Z.SubsectionContent,{className:"account-profile__content",children:(0,n.jsxs)("div",{className:"account-profile__user",children:[(0,n.jsx)(k.Z,{className:"account-profile__user-avatar",profile:t}),(0,n.jsx)("span",{className:"account-profile__user-full-name",children:t?.fullName})]})})}),(0,n.jsxs)(o.Z.Subsection,{className:"account-settings",children:[(0,n.jsx)(o.Z.SubsectionHeader,{className:"account-settings__content",title:s("srs:learnings.settings.title")}),(0,n.jsx)(o.Z.SubsectionContent,{className:"account-settings__content",children:(0,n.jsxs)(y.Z,{className:"learning-settings",children:[(0,n.jsx)(y.Z.ItemTitle,{children:s("srs:learnings.settings.lessonLimits.title")}),(0,n.jsx)(y.Z.ItemContent,{children:(0,n.jsx)("div",{className:"learning-settings__lesson-limits",children:E.map((e=>(0,n.jsxs)("div",{className:"learning-settings__lesson-limit","data-lesson-type":e,children:[(0,n.jsx)("span",{className:"learning-settings__lesson-limit-label","data-lesson-type":e,children:s(`srs:learnings.settings.lessonLimits.${e}`)}),(0,n.jsx)("span",{className:"learning-settings__lesson-limit-value",children:a?.lessonLimits?.[e]||1})]},e)))})})]})})]})]})}var $=t(9589),D=t(7139),R=t(3809);function L({state:e,dispatch:s}){const{t}=(0,r.$)(),{profile:a,settings:{learning:c}}=e.user.data,l=(0,i.useCallback)((({target:{name:e,value:t}})=>{s(["propertyUpdated",{path:e,value:t}])}),[]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Z.Subsection,{className:"account-profile",children:(0,n.jsx)(o.Z.SubsectionContent,{className:"account-profile__content",children:(0,n.jsxs)("div",{className:"account-profile__user",children:[(0,n.jsx)(k.Z,{className:"account-profile__user-avatar",profile:a}),(0,n.jsx)(D.Z,{className:"account-profile__user-full-name",name:"profile.fullName",value:a?.fullName||"",onChange:l})]})})}),(0,n.jsxs)(o.Z.Subsection,{className:"account-settings",children:[(0,n.jsx)(o.Z.SubsectionHeader,{className:"account-settings__content",title:t("srs:learnings.settings.title")}),(0,n.jsx)(o.Z.SubsectionContent,{className:"account-settings__content",children:(0,n.jsxs)(y.Z,{className:"learning-settings",children:[(0,n.jsx)(y.Z.ItemTitle,{children:t("srs:learnings.settings.lessonLimits.title")}),(0,n.jsx)(y.Z.ItemContent,{children:(0,n.jsx)("div",{className:"learning-settings__lesson-limits",children:$.T4.map((e=>(0,n.jsxs)("div",{className:"learning-settings__lesson-limit","data-lesson-type":e,children:[(0,n.jsx)("span",{className:"learning-settings__lesson-limit-label","data-lesson-type":e,children:t(`srs:learnings.settings.lessonLimits.${e}`)}),(0,n.jsx)(R.Z,{className:"learning-settings__lesson-limit-value",name:`settings.learning.lessonLimits.${e}`,value:c?.lessonLimits?.[e]||1,onChange:l})]},e)))})})]})})]})]})}const w="auth:account";function I({state:e,dispatch:s}){const{t}=(0,r.$)(),{status:a}=e.user,{mode:i}=a.editbar;return(0,n.jsxs)(o.Z.Section,{className:"account",mode:i,children:[(0,n.jsx)(o.Z.SectionHeader,{className:"account__header",title:t(`${w}.title`),children:(0,n.jsx)(_.Z,{className:"account",entity:"user",status:a,dispatch:s})}),(0,n.jsxs)(o.Z.SectionContent,{className:"account__content",children:["view"===i&&(0,n.jsx)(C,{state:e}),"edit"===i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(S,{state:e,dispatch:s}),(0,n.jsx)(L,{state:e,dispatch:s})]})]})]})}function F({isDemo:e}){const{t:s}=(0,r.$)(),{data:t}=(0,l.rk)({isDemo:e}),[a,d]=(0,i.useReducer)(p,v),{status:{isLoaded:u}}=a.user;return(0,i.useEffect)((()=>{document.title=c.Z.account(s,{isDemo:e})}),[s,e]),(0,i.useEffect)((()=>{t&&d(["dataReceived",t])}),[t]),(0,n.jsx)(o.Z,{entity:"account",children:(0,n.jsx)(o.Z.Content,{children:u&&(0,n.jsx)(I,{state:a,dispatch:d})})})}function T({isDemo:e}){const{isLoading:s}=(0,a.Z)({isDemo:e,isAuthRequired:!0});return s?null:(0,n.jsx)(F,{isDemo:e})}},691:(e,s,t)=>{t.d(s,{D5:()=>f,GG:()=>d,Om:()=>h,Pn:()=>c,SE:()=>r,fn:()=>l,s6:()=>i,tH:()=>m,y$:()=>u,zs:()=>o});var n=t(3465),a=t.n(n);function i(e,s){e.meta.isDemo=s}function r(e,{entity:s,mode:t}){e[s].status.editbar.mode=t,e[s].status.message="initial",function(e){const{data:s,status:{canEdit:t,editbar:{mode:n}}}=e;"edit"===n&&t&&e.data&&(e.backup=a()(s))}(e[s])}function c(e,s){const{entity:t,property:n,value:a}=s;e[t].status.display[n]=a}function l(e,{entity:s}){e[s].status.message="saving",e[s].status.isSaving=!0,e[s].status.discard.isReady=!1}function o(e,{entity:s}){e[s].status.isError=!1,e[s].status.message="validated",e[s].error=null}function d(e,{entity:s,error:t}){e[s].status.isError=!0,e[s].status.message="error",e[s].error=t}function u(e,{entity:s,error:t}){e[s].status.isError=!0,e[s].status.isSaved=!1,e[s].status.isSaving=!1,e[s].status.message="error",e[s].error=t}function m(e){const{status:s,backup:t}=e;e.error=null,s.isError=!1,s.isSaved=!0,s.isSaving=!1,s.message="saved",s.discard.isAvailable=!!t,s.discard.isReady=!0,s.editbar.mode="view"}function f(e){e.isSaved=!1,e.discard.isEnabled&&(e.discard.isAvailable=!0)}function h(e,{entity:s}){const{backup:t,status:n}=e[s],{isEnabled:i,isAvailable:r,isReady:c}=n.discard;if(t&&(i&&r&&c)){const i="click"===n.editbar.variant;e[s].data=a()(t),e[s].backup=null,e[s].status.discard.isAvailable=!1,e[s].status.isSaved=i,i&&(e[s].status.editbar.mode="view",e[s].status.message="discarded",e[s].error=null)}}},6056:(e,s,t)=>{t.d(s,{Z:()=>l});var n=t(7294),a=t(5977),i=t(6228),r=t(6829),c=t(4232);function l({isDemo:e,isAuthRequired:s}){const{push:t}=(0,a.k6)(),l=(0,i.oR)(i.N1),{isLoading:o,data:d}=(0,c.rk)({isDemo:e});return(0,n.useEffect)((()=>{l(!!e)}),[e]),(0,n.useEffect)((()=>{!s||o||d?.data.uid||t(r.Z.home({isDemo:e}))}),[s,e,o,d?.data.uid]),{isLoading:s&&o}}},5608:(e,s,t)=>{t.d(s,{Z:()=>d});const n="app:titles",a=`${n}.delimiter`,i=`${n}.app`,r=`${n}.demo`,c=`${n}.reppings`,l=`${n}.decks`,o=(e,s)=>e.join(s),d={account:(e,{isDemo:s})=>o(s?[e(`${n}.account`),e(r),e(i)]:[e(`${n}.account`),e(i)],e(a)),learnings:(e,{isDemo:s})=>o(s?[e(r),e(i)]:[e(i)],e(a)),reppings:(e,{isDemo:s})=>o(s?[e(c),e(r),e(i)]:[e(c),e(i)],e(a)),repping:(e,{isDemo:s,repping:t})=>o(s?[t,e(c),e(r),e(i)]:[t,e(c),e(i)],e(a)),divel:(e,{isDemo:s,repping:t,divel:n})=>o(s?[n,t,e(c),e(r),e(i)]:[n,t,e(c),e(i)],e(a)),decks:(e,{isDemo:s})=>o(s?[e(l),e(r),e(i)]:[e(l),e(i)],e(a)),deck:(e,{isDemo:s,deck:t})=>o(s?[t,e(l),e(r),e(i)]:[t,e(l),e(i)],e(a)),lesson:(e,{isDemo:s})=>o(s?[e(`${n}.lesson`),e(r),e(i)]:[e(`${n}.lesson`),e(i)],e(a))}},4220:(e,s,t)=>{t.d(s,{Z:()=>b});var n=t(5893),a=t(6010),i=t(7294),r=t(2327),c=t(7325);function l(e){return"edit"===e.editbar.mode?"view":"edit"}function o(e){return"edit"===e.editbar.mode&&(e.isError||e.isSaving)}function d(e){return"edit"===e.editbar.mode&&(e.isError||e.isSaving)}const u="app:ui:statusbar.message.";function m({className:e,status:s,prefix:t}){const{t:i}=(0,r.$)("app"),{message:c}=s;return c?(0,n.jsx)("span",{className:(0,a.Z)(`${e}-message`,"editbar__message"),"data-message-type":c,children:i((t||u)+c)}):null}const f="app:ui:editbar.click.button.";function h({className:e,entity:s,status:t,dispatch:a}){const{t:d}=(0,r.$)(),{isSaved:u,discard:h}=t,g=(0,i.useCallback)((({target:{name:e}})=>{a(["editbarModeSet",{entity:s,mode:e}])}),[s]),v=(0,i.useCallback)((()=>{a(["savingInitiated",{entity:s}])}),[s]),b=(0,i.useCallback)((()=>{a(["changesDiscarded",{entity:s}])}),[s]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m,{className:e,status:t}),u?(0,n.jsx)(c.Z,{name:l(t),className:"editbar__button","data-mode":l(t),"data-action":"switch",onClick:g,content:d(f+l(t))}):(0,n.jsx)(c.Z,{className:"editbar__button","data-action":"save",disabled:o(t),onClick:v,children:"saving"===t.message?d(`${f}saving`):d(`${f}save`)}),!u&&h.isAvailable&&(0,n.jsx)(c.Z,{className:"editbar__button","data-action":"discard",disabled:!h.isReady,onClick:b,content:d(`${f}discard`)})]})}const g="app:ui:feature.section.header.button.";function v({className:e,entity:s,status:t,dispatch:a}){const{t:o}=(0,r.$)(),u=(0,i.useCallback)((({target:{name:e}})=>{a(["editbarModeSet",{entity:s,mode:e}])}),[s]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m,{className:e,status:t}),(0,n.jsx)(c.Z,{name:l(t),className:"editbar__button","data-mode":l(t),disabled:d(t),onClick:u,content:o(g+l(t))})]})}function b({className:e,entity:s,status:t,dispatch:i}){return t.isLoaded?(0,n.jsxs)("div",{className:(0,a.Z)(`${e}__editbar`,"editbar"),"data-variant":t.editbar.variant,children:["click"===t.editbar.variant&&(0,n.jsx)(h,{className:e,entity:s,status:t,dispatch:i}),"delay"===t.editbar.variant&&(0,n.jsx)(v,{className:e,entity:s,status:t,dispatch:i})]}):null}},7450:(e,s,t)=>{t.d(s,{Z:()=>l});var n=t(5893),a=t(6010);var i=t(2837);var r=t(4627);function c({className:e,entity:s,children:t,...i}){return(0,n.jsx)("div",{className:(0,a.Z)(e,"feature"),"data-entity":s,...i,children:t})}c.Header=function({children:e}){return(0,n.jsx)("header",{className:"feature__header",children:e})},c.Title=function({isLoading:e,children:s}){return e?(0,n.jsx)(i.Z,{}):(0,n.jsx)("h1",{className:"feature__title",children:s})},c.Toolbar=function({children:e}){return(0,n.jsx)("div",{className:"feature__toolbar",children:e})},c.Content=function({children:e}){return(0,n.jsx)(r.Z,{className:"feature__content",children:e})},c.Section=function({className:e,mode:s,children:t}){return(0,n.jsx)("div",{className:(0,a.Z)(e,"feature__section"),"data-mode":s,children:t})},c.SectionHeader=function({className:e,title:s,children:t}){return(0,n.jsxs)("div",{className:(0,a.Z)(e,"feature__section-header"),children:[s&&(0,n.jsx)("h2",{className:(0,a.Z)(`${e}__title`,"feature__section-header-title"),children:s}),t]})},c.SectionContent=function({className:e,children:s}){return(0,n.jsx)("div",{className:(0,a.Z)(e,"feature__section-content"),children:s})},c.Subsection=function({className:e,mode:s,children:t}){return(0,n.jsx)("div",{className:(0,a.Z)(e,"feature__subsection"),"data-mode":s,children:t})},c.SubsectionHeader=function({className:e,title:s,children:t}){return(0,n.jsxs)("div",{className:(0,a.Z)(e,"feature__subsection-header"),children:[s&&(0,n.jsx)("h3",{className:(0,a.Z)(`${e}__title`,"feature__subsection-header-title"),children:s}),t]})},c.SubsectionContent=function({className:e,children:s}){return(0,n.jsx)("div",{className:(0,a.Z)(e,"feature__subsection-content"),children:s})},c.Footer=function({children:e}){return(0,n.jsx)("header",{className:"feature__footer",children:e})};const l=c},3809:(e,s,t)=>{t.d(s,{Z:()=>l});var n=t(5893),a=t(7294),i=t(6010),r=t(2335),c=t(7325);function l({className:e,label:s,isError:t,onChange:l,...o}){const d=(0,a.useCallback)((({target:e})=>{e.nextElementSibling.stepUp();const s=new Event("change",{bubbles:!0});e.nextElementSibling.dispatchEvent(s),e.nextElementSibling.focus()}),[]),u=(0,a.useCallback)((({target:e})=>{e.previousElementSibling.stepDown();const s=new Event("change",{bubbles:!0});e.previousElementSibling.dispatchEvent(s),e.previousElementSibling.focus()}),[]);return(0,n.jsxs)("div",{className:(0,i.Z)(e,"number-input"),children:[(0,n.jsx)(r.Z,{className:"number-input__label label",label:s,id:o.id,isError:t}),(0,n.jsx)(c.Z,{className:"number-input__increment",tabIndex:-1,onClick:d}),(0,n.jsx)("input",{className:"number-input__value value",type:"number",value:o.value,"data-is-error":t,onChange:l,...o}),(0,n.jsx)(c.Z,{className:"number-input__decrement",tabIndex:-1,onClick:u})]})}},876:(e,s,t)=>{t.d(s,{Z:()=>r});var n=t(5893),a=t(6010);function i({className:e,children:s}){return(0,n.jsx)("dl",{className:(0,a.Z)(e,"settings"),children:s})}i.Item=function({className:e,children:s}){return(0,n.jsx)("div",{className:(0,a.Z)(e,"settings__item"),children:s})},i.ItemTitle=function({className:e,children:s}){return(0,n.jsx)("dt",{className:(0,a.Z)(e,"settings__item-title"),children:s})},i.ItemContent=function({className:e,children:s}){return(0,n.jsx)("dd",{className:(0,a.Z)(e,"settings__item-content"),children:s})};const r=i},2837:(e,s,t)=>{t.d(s,{Z:()=>i});var n=t(5893),a=t(6010);function i({className:e}){return(0,n.jsx)("div",{className:(0,a.Z)(e,"skeleton-title skeleton")})}}}]);