"use strict";(self.webpackChunkkoloda=self.webpackChunkkoloda||[]).push([[602],{9602:(e,s,a)=>{a.r(s),a.d(s,{default:()=>Os});var t=a(5893),d=a(5977),i=a(6056),l=a(7294),c=a(2327),n=a(5608),r=a(5619),o=a(9958),u=a(6118),m=a(2594),p=a(5443),g=a(7450),h=a(8172),_=a(3465),b=a.n(_),x=a(1468),f=a.n(x),j=a(691),k=a(6347),v=a(429);const y=(0,h.ZP)(((e,s)=>{const{isCompleted:a,dueAt:t,divel:d,phase:i}=s.progress||{};return a?e.completed+=1:t&&d&&i?(e.learning+=1,e.divels[d]&&(e.divels[d].total+=1)):e.initial+=1,e.total+=1,e}));function N(e,s){const{isCompleted:a,dueAt:t,divel:d,phase:i}=e.progress||{};if(a)e.meta={status:"completed"};else if(t&&d&&i){const a=s.divels.findIndex((e=>e.id===d)),t={index:a+1,title:s.divels?.[a]?.title};e.meta={status:"learning",divel:t}}else e.meta={status:"initial"}}const C={meta:{tabs:{headers:["progress","about","fields","cards"],items:{progress:{disabled:!0},about:{disabled:!0},fields:{disabled:!0},cards:{disabled:!0}}}},deck:{status:{editbar:{variant:"click",mode:"view"},message:"initial",isSaved:!0,discard:{isEnabled:!0,isReady:!0},canEdit:!0}},learning:{status:{editbar:{variant:"click",mode:"view"},message:"initial",isSaved:!0,discard:{isEnabled:!0,isReady:!0},canEdit:!0}},fields:{status:{editbar:{variant:"click",mode:"view"},message:"initial",isSaved:!0,discard:{isEnabled:!0,isReady:!0},canEdit:!0}},cards:{status:{editbar:{variant:"click",mode:"view"},message:"initial",isSaved:!0,discard:{isEnabled:!0,isReady:!0},canEdit:!0,display:{mode:"table",showProgress:!0,currentItem:{}}}},reppings:{}},$={isDemoSet:j.s6,editbarModeSet:j.SE,displayOptionSet:j.Pn,deckReceived:function(e,{data:s}){const{fields:a,...t}=b()(s);e.meta.title=t.title,e.deck.data=t,e.deck.status.isLoaded=!0,e.fields.status.isLoaded=!0,e.fields.data={deckId:t.id,fields:a},e.cards.data?e.cards.data.deckId=t.id:e.cards.data={deckId:t.id};I(e),Z(e)},learningReceived:function(e,{data:s}){e.learning.data=b()(s),e.learning.status.isLoaded=!0,S(e)},cardsReceived:function(e,{data:s}){e.cards.data&&(e.cards.data.cards=b()(s));e.cards.status.isLoaded=!0,E(e),Z(e),S(e),s[0]&&D(e,{id:s[0].id})},reppingsReceived:function(e,{data:s}){e.reppings.data=b()(s),e.reppings.isLoaded=!0,S(e)},deckUpdated:function(e,s){const{property:a,value:t}=s,{data:d,status:i}=e.deck;d&&d[a]!==t&&((0,j.D5)(i),d[a]=t)},learningAdded:function(e,s){e.learning.data=s.data,S(e)},learningUpdated:function(e,{path:s,value:a}){const{data:t,status:d}=e.learning;if(!t)return;f()(t,s,a),(0,j.D5)(d)},learningDeleted:function(e){e.learning.data=void 0},fieldAdded:function(e,{t:s}){const{data:a,status:t}=e.fields,{fields:d}=a||{},i=(0,k.Dc)(d||[]);if(d){const a=s("srs:decks.one.fields.many.table.properties.title.default");d.push({...v.DS,id:i,title:a}),(0,j.D5)(t),I(e),Z(e)}},fieldUpdated:function(e,s){const{index:a,property:t,value:d}=s,{data:i,status:l}=e.fields,{fields:c}=i||{};c&&(c[a][t]=d,(0,j.D5)(l),Z(e))},fieldSettingUpdated:function(e,s){const{index:a,path:t,value:d}=s,{data:i,status:l}=e.fields,{fields:c}=i||{};c&&(f()(c[a],t,d),(0,j.D5)(l),Z(e))},fieldDeleted:function(e,s){const{data:a,status:t}=e.fields,{fields:d}=a||{};if(d){const{index:a}=s;d.splice(a,1),(0,j.D5)(t),I(e),Z(e)}},fieldMoved:function(e,s){const{destination:a,source:t}=s,{data:d,status:i}=e.fields,{fields:l}=d||{};l&&(l.splice(a,0,l.splice(t,1)[0]),(0,j.D5)(i),Z(e))},cardAdded:function(e){const{data:s,status:a}=e.cards,{cards:t}=s||{},d=(0,k.Dc)(t||[]);t&&(t.push(b()({...v.OM,id:d})),(0,j.D5)(a),E(e),Z(e),D(e,{id:d}))},cardUpdated:function(e,{index:s,path:a,value:t}){const{data:{cards:d}={},status:i}=e.cards;d?.[s]&&a&&(f()(d[s],a,t),(0,j.D5)(i),Z(e))},cardProgressUpdated:function(e,{id:s,property:a}){const{repping:t}=e.learning.data||{},{data:d,status:i}=e.cards,{cards:l}=d||{};if(l&&t&&["progress","isCompleted"].includes(a)){const d=l.findIndex((e=>e.id===(0,k.e$)(s)));"progress"===a&&(l[d].progress={}),"isCompleted"===a&&(l[d].progress={isCompleted:!0}),N(l[d],t),(0,j.D5)(i),Z(e)}},cardDeleted:function(e,s){const{data:a,status:t}=e.cards,{cards:d}=a||{};if(d){const{index:a}=s;d.splice(a,1),(0,j.D5)(t),E(e),Z(e),t.display?.currentItem&&(t.display.currentItem={})}},cardMoved:function(e,s){const{destination:a,source:t}=s,{data:d,status:i}=e.cards,{cards:l}=d||{};l&&(l.splice(a,0,l.splice(t,1)[0]),(0,j.D5)(i),Z(e))},currentCardSet:D,changesDiscarded:function(e,{entity:s}){(0,j.Om)(e,{entity:s}),"fields"===s&&I(e);"cards"===s&&E(e);Z(e)},validationCompleted:j.zs,validationFailed:j.GG,savingInitiated:j.fn,savingFailed:j.y$,savingCompleted:function(e,{entity:s,data:a}){(0,j.tH)(e[s]),e.deck.data&&(e.deck.data.isEligible=a.isEligible,e.deck.data.requirements=a.requirements,e.deck.data.updatedAt=a.updatedAt,"deck"===s&&(e.meta.title=e.deck.data.title),"fields"===s&&(e.deck.data.fieldsTotal=a.fieldsTotal),"cards"===s&&(e.deck.data.cardsTotal=a.cardsTotal,S(e)));Z(e)}};function Z(e){if(!e.meta.tabs)return;const{progress:s,about:a,fields:t,cards:d}=e.meta.tabs.items;s.disabled=!1,a.disabled=!1,t.disabled="edit"===e.deck.status.editbar.mode||"edit"===e.cards.status.editbar.mode,d.disabled="edit"===e.deck.status.editbar.mode||"edit"===e.fields.status.editbar.mode}function I(e){const{fields:s}=e.fields?.data||{};s&&(e.fields.status.canAdd=s.length<v.e_)}function E(e){const{cards:s}=e.cards?.data||{};s&&(e.cards.status.canAdd=s.length<v.PK)}function D(e,s){if(e.cards.status.display&&e.cards.data?.cards){const a=(0,k.e$)(s.id),t=e.cards.data.cards.findIndex((e=>e.id===a));e.cards.status.display.currentItem={id:a,index:t}}}function S(e){const{cards:s}=e.cards.data||{},{repping:a}=e.learning.data||{};a&&s&&(!function(e,s){e.forEach(((a,t)=>{N(e[t],s)}))}(s,a),e.learning.meta=function(e,s){const a=s.divels.map((e=>({title:e.title,total:0})));return e.reduce(y,{completed:0,learning:0,initial:0,total:0,divels:a})}(s,a))}const w=(0,h.ZP)(((e,[s,a])=>($[s]&&$[s](e,a),e)));var P=a(7325);var A=a(4220),O=a(4813);function R(){return(0,t.jsx)(O.G,{className:"deck-summary-skeleton feature__section-skeleton",lines:3})}var L=a(4730),q=a(6228);const T="learning",U=100;function F({state:e,dispatch:s}){const a=(0,q.oR)(q.zr),t=(0,o.Kt)({isDemo:a,validationOnly:!0}),d=(0,o.Kt)({isDemo:a}),{data:i,status:{isSaved:c,isSaving:n}}=e[T];return(0,L.Z)((()=>{c||t.mutate(i)}),U,[i,c]),(0,l.useEffect)((()=>{t.isSuccess&&s(["validationCompleted",{entity:T}])}),[t.isSuccess]),(0,l.useEffect)((()=>{t.isError&&s(["validationFailed",{entity:T,error:t.error}])}),[t.isError,t.error]),(0,l.useEffect)((()=>{n&&d.mutate(i)}),[n,i]),(0,l.useEffect)((()=>{d.isSuccess&&s(["savingCompleted",{entity:T,data:d.data}])}),[d.isSuccess]),(0,l.useEffect)((()=>{d.isError&&s(["savingFailed",{entity:T,error:d.error}])}),[d.isError,d.error]),null}const M="srs:decks.one.progress.requirements";function K({state:e}){const{t:s}=(0,c.$)("srs"),a=e.deck.data,d=e.reppings.data||[];return(0,t.jsxs)("div",{className:"deck-progress__requirements",children:[(0,t.jsx)("h3",{className:"deck-progress__requirements-title",children:s(`${M}.title`)}),(0,t.jsxs)("ul",{className:"deck-progress__requirements-list",children:[(0,t.jsx)("li",{className:"deck-progress__requirements-list-item","data-requirement-value":a.fieldsTotal>0,children:s(`${M}.fields`)}),(0,t.jsx)("li",{className:"deck-progress__requirements-list-item","data-requirement-value":a.cardsTotal>0,children:s(`${M}.cards`)}),(0,t.jsx)("li",{className:"deck-progress__requirements-list-item","data-requirement-value":!!d.length,children:s(`${M}.reppings`)})]})]})}var V=a(2527);const z=e=>e?.title||"";function H({className:e,label:s,readOnly:a,reppings:d,value:i,onChange:c}){const n=(0,l.useMemo)((()=>d?i?d.find((e=>e.id===i)):d[0]:null),[d,i]);return d&&n?(0,t.jsx)(V.Z,{className:e,name:"reppingId",label:s,readOnly:a,items:d,selectedItem:n,onChange:c,getValue:z}):null}const G="srs:decks.one.progress.notLearning";function Y({state:e,dispatch:s}){const{t:a}=(0,c.$)("srs"),d=(0,q.oR)(q.zr),i=(0,o.dL)({isDemo:d}),n=e.reppings.data,[r,u]=(0,l.useState)({deckId:e.deck?.data?.id,reppingId:n[0].id}),m=(0,l.useCallback)((({target:{name:e,value:s}})=>{u((a=>({...a,[e]:s})))}),[]),p=(0,l.useCallback)((()=>{i.mutate(r)}),[r]);return(0,l.useEffect)((()=>{i.isSuccess&&s(["learningAdded",{data:i.data}])}),[i.isSuccess,i.data]),(0,t.jsxs)("div",{className:"deck-progress__not-learning",children:[(0,t.jsx)("h3",{className:"deck-progress__not-learning-title",children:a(`${G}.title`)}),(0,t.jsxs)("div",{className:"deck-progress__start",children:[(0,t.jsx)(H,{className:"deck-progress__start-repping",label:a("decks.selects.repping.label"),reppings:n,value:r.reppingId,onChange:m}),(0,t.jsx)(P.Z,{className:"deck-progress__start-button",name:"isLearning",value:"true",onClick:p,content:a(`${G}.start.button`)})]})]})}var B=a(1835),Q=a(3727),X=a(6829),W=a(876),J=a(3809);const ee="srs:decks.one.progress.learning.settings",se=["new","rep"];function ae({state:e,dispatch:s}){const{t:a}=(0,c.$)("srs"),d=(0,q.oR)(q.zr),{data:{repping:i,settings:n}={},status:{editbar:{mode:r}}}=e.learning,o=(0,l.useCallback)((({target:{name:e,value:a}})=>{s(["learningUpdated",{path:e,value:a}])}),[]);return(0,t.jsxs)("section",{className:"deck-progress__learning-settings",children:[(0,t.jsx)("h3",{className:"deck-progress__learning-settings-title",children:a(`${ee}.title`)}),(0,t.jsxs)(W.Z,{className:"learning-settings",children:[!!i&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(W.Z.ItemTitle,{children:a(`${ee}.repping`)}),(0,t.jsx)(W.Z.ItemContent,{children:(0,t.jsx)("span",{className:"learning-settings__repping",children:(0,t.jsx)(Q.rU,{className:"deck-progress__repping-link",to:X.Z.repping({id:i.id,isDemo:d}),children:i.title})})})]}),(0,t.jsx)(W.Z.ItemTitle,{children:a(`${ee}.lessonLimits.title`)}),(0,t.jsx)(W.Z.ItemContent,{children:(0,t.jsx)("div",{className:"learning-settings__lesson-limits",children:se.map((e=>(0,t.jsxs)("div",{className:"learning-settings__lesson-limit","data-lesson-type":e,children:[(0,t.jsx)("span",{className:"learning-settings__lesson-limit-label","data-lesson-type":e,children:a(`${ee}.lessonLimits.${e}`)}),"edit"===r?(0,t.jsx)(J.Z,{className:"learning-settings__lesson-limit-value",name:`settings.lessonLimits.${e}`,value:n?.lessonLimits?.[e]||1,onChange:o}):(0,t.jsx)("span",{className:"learning-settings__lesson-limit-value",children:n?.lessonLimits?.[e]||1})]},e)))})})]})]})}var te=a(4925);const de="srs:decks.one.progress.learning.stats",ie=["initial","learning","completed"];function le({state:e}){const{t:s}=(0,c.$)("srs"),{meta:a}=e.learning;if(!a)return null;const d={series:ie.map((e=>a[e]))};return(0,t.jsxs)("section",{className:"deck-progress__stats",children:[(0,t.jsx)("h3",{className:"deck-progress__stats-title",children:s(`${de}.title`)}),(0,t.jsxs)("div",{className:"deck-progress__types",children:[(0,t.jsx)(te.Z,{className:"deck-progress__chart",data:d,options:{donut:!0,donutWidth:"25%",ignoreEmptyValues:!0},type:"Pie"}),(0,t.jsx)("ul",{className:"deck-progress__legend",children:ie.map((e=>(0,t.jsxs)("li",{className:"deck-progress__legend-item","data-card-type":e,children:[(0,t.jsx)("span",{className:"deck-progress__legend-title",children:s(`${de}.cards.${e}`)}),(0,t.jsx)("span",{className:"deck-progress__legend-amount",children:a[e]})]},e)))})]})]})}const ce="srs:decks.one.progress.learning";function ne({state:e,dispatch:s}){const{t:a}=(0,c.$)("srs"),d=(0,q.oR)(q.zr),i=(0,o.Pm)({isDemo:d}),{data:n,status:{editbar:{mode:r}}}=e.learning,{deckId:u,startedAt:m,lastLearnedAt:p}=n;return(0,l.useEffect)((()=>{i.isSuccess&&s(["learningDeleted",{}])}),[i.isSuccess]),(0,t.jsxs)("div",{className:"deck-progress__learning",children:[(m||p)&&(0,t.jsxs)("div",{className:"deck-progress__timestamps timestamps",children:[m&&(0,t.jsx)("span",{className:"deck-progress__created-at",children:a(`${ce}.startedAt`,{value:new Date(m),formatParams:{value:{dateStyle:"long"}}})}),p&&p!==m&&(0,t.jsx)("span",{className:"deck-progress__created-at",children:a(`${ce}.lastLearnedAt`,{value:new Date(m),formatParams:{value:{dateStyle:"long"}}})})]}),(0,t.jsx)(ae,{state:e,dispatch:s}),"edit"===r&&(0,t.jsx)("div",{className:"deck-progress__actions",children:(0,t.jsx)(B.Z,{params:{deckId:u},mutation:i,prefix:`${ce}.stop`})}),(0,t.jsx)(le,{state:e})]})}function re({state:e,dispatch:s}){const{isEligible:a}=e.deck.data,d=e.reppings.data||[];return e.learning.data?.repping?(0,t.jsx)(ne,{state:e,dispatch:s}):a&&d.length?(0,t.jsx)(Y,{state:e,dispatch:s}):(0,t.jsx)(K,{state:e})}const oe="srs:decks.one.progress";function ue({state:e,dispatch:s}){const{t:a}=(0,c.$)(),{data:d,status:i}=e.learning,{mode:l}=i.editbar,n=e.deck.data;return(0,t.jsxs)(g.Z.Section,{className:"deck-progress",mode:i.editbar.mode,children:[(0,t.jsx)(g.Z.SectionHeader,{className:"deck-progress__header",title:a(`${oe}.title`),children:n&&d?.repping&&(0,t.jsx)(A.Z,{className:"deck-progress",entity:"learning",status:i,dispatch:s})}),(0,t.jsxs)(g.Z.SectionContent,{className:"deck-progress__content",children:[!n&&(0,t.jsx)(R,{}),n&&d&&"edit"===l&&(0,t.jsx)(F,{state:e,dispatch:s}),n&&(0,t.jsx)(re,{state:e,dispatch:s})]})]})}function me(){return(0,t.jsx)(O.G,{className:"deck-summary-skeleton feature__section-skeleton",lines:5})}const pe="deck",ge=100;function he({state:e,dispatch:s}){const a=(0,q.oR)(q.zr),t=(0,r.zk)({isDemo:a,validationOnly:!0}),d=(0,r.zk)({isDemo:a}),{data:i,status:{isSaved:c,isSaving:n}}=e[pe];return(0,L.Z)((()=>{c||t.mutate(i)}),ge,[i,c]),(0,l.useEffect)((()=>{t.isSuccess&&s(["validationCompleted",{entity:pe}])}),[t.isSuccess]),(0,l.useEffect)((()=>{t.isError&&s(["validationFailed",{entity:pe,error:t.error}])}),[t.isError,t.error]),(0,l.useEffect)((()=>{n&&d.mutate(i)}),[n,i]),(0,l.useEffect)((()=>{d.isSuccess&&s(["savingCompleted",{entity:pe,data:d.data}])}),[d.isSuccess]),(0,l.useEffect)((()=>{d.isError&&s(["savingFailed",{entity:pe,error:d.error}])}),[d.isError,d.error]),null}var _e=a(9907),be=a(5044),xe=a(6874);const fe="srs:decks.one.about";function je({state:e,dispatch:s}){const{t:a}=(0,c.$)("srs"),{data:d}=e.deck,i=(0,l.useCallback)((({target:{name:e,value:a}})=>{s(["deckUpdated",{property:e,value:a}])}),[]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"deck-about__timestamps timestamps",children:[d?.createdAt&&(0,t.jsx)("span",{className:"deck-about__created-at",children:a(`${fe}.properties.createdAt`,{value:new Date(d?.createdAt),formatParams:{value:{dateStyle:"long"}}})}),d?.updatedAt&&(0,t.jsx)("span",{className:"deck-about__updated-at",children:a(`${fe}.properties.updatedAt`,{value:new Date(d?.updatedAt),formatParams:{value:{dateStyle:"long"}}})})]}),(0,t.jsxs)("div",{className:"deck-about__eligibility eligibility",children:[(0,t.jsx)("div",{className:"deck-about__is-eligible is-eligible","data-is-eligible":!!d?.isEligible,children:(0,t.jsx)("span",{children:a(`${fe}.properties.isEligible.${!!d?.isEligible}`)})}),d?.requirements&&(0,t.jsx)("div",{className:"deck-about__requirements requirements",children:(0,t.jsxs)("ul",{className:"deck-about__requirements-list requirements-list",children:[(0,t.jsx)("li",{className:"deck-about__requirements-list-item requirements-list-item","data-is-checked":d.requirements.fields,children:a(`${fe}.properties.requirements.fields`)}),(0,t.jsx)("li",{className:"deck-about__requirements-list-item requirements-list-item","data-is-checked":d.requirements.cards,children:a(`${fe}.properties.requirements.cards`)})]})})]}),(0,t.jsxs)("div",{className:"deck-about__taxonomy",children:[(0,t.jsx)(be.Z,{categoryClassName:"deck-about__category",subjectClassName:"deck-about__subject",readOnly:!0,categoryId:d?.categoryId,subjectId:d?.subjectId,onCategoryChange:i,onSubjectChange:i}),(0,t.jsx)(xe.Z,{className:"deck-about__language",readOnly:!0,value:d?.languageId,onChange:i})]}),(0,t.jsx)(_e.Z,{className:"deck-about__description",name:"description",label:a(`${fe}.properties.description.label`),placeholder:a(`${fe}.properties.description.placeholder`),readOnly:!0,value:d?.description,onChange:i})]})}var ke=a(7139);const ve="srs:decks.one.about",ye="deck_update";function Ne({state:e,dispatch:s}){const{t:a}=(0,c.$)("srs"),d=(0,q.oR)(q.zr),i=(0,r.ez)({isDemo:d}),{data:n,error:o}=e.deck,u=(0,l.useCallback)((({target:{name:e,value:a}})=>{s(["deckUpdated",{property:e,value:a}])}),[]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ke.Z,{name:"title",className:"deck-about__title",label:a(`${ve}.properties.title.label`),isError:!!o?.meta?.errors?.[ye].title,errors:o?.meta?.errors?.[ye].title,errorPrefix:`${ve}.properties.title.errors`,value:n?.title||"",onChange:u}),(0,t.jsxs)("div",{className:"deck-about__taxonomy",children:[(0,t.jsx)(be.Z,{categoryClassName:"deck-about__category",subjectClassName:"deck-about__subject",categoryId:n?.categoryId,subjectId:n?.subjectId,onCategoryChange:u,onSubjectChange:u}),(0,t.jsx)(xe.Z,{className:"deck-about__language",value:n?.languageId,onChange:u})]}),(0,t.jsx)(_e.Z,{className:"deck-about__description",name:"description",label:a(`${ve}.properties.description.label`),placeholder:a(`${ve}.properties.description.placeholder`),value:n?.description,onChange:u}),(0,t.jsx)(B.Z,{params:{id:n?.id},mutation:i,url:X.Z.decks({isDemo:d}),prefix:`${ve}.delete`})]})}function Ce({state:e,dispatch:s}){const{status:{editbar:{mode:a}}}=e.deck;return(0,t.jsxs)(g.Z.SectionContent,{className:"deck-about__content",children:["view"===a&&(0,t.jsx)(je,{state:e,dispatch:s}),"edit"===a&&(0,t.jsx)(Ne,{state:e,dispatch:s})]})}const $e="srs:decks.one.about";function Ze({state:e,dispatch:s}){const{t:a}=(0,c.$)("srs"),{data:d,status:i}=e.deck,{mode:l}=i.editbar;return(0,t.jsxs)(g.Z.Section,{className:"deck-about",mode:l,children:[(0,t.jsx)(g.Z.SectionHeader,{className:"deck-about__header",title:a(`${$e}.title`),children:(0,t.jsx)(A.Z,{className:"deck-about",entity:"deck",status:i,dispatch:s})}),!d&&(0,t.jsx)(me,{}),d&&"edit"===l&&(0,t.jsx)(he,{state:e,dispatch:s}),d&&(0,t.jsx)(Ce,{state:e,dispatch:s})]})}var Ie=a(6010),Ee=a(6333);function De({rows:e,cols:s,className:a}){return(0,t.jsx)("table",{className:(0,Ie.Z)(a,"skeleton-table"),children:(0,t.jsx)("tbody",{children:[...Array(e).keys()].map((e=>(0,t.jsx)("tr",{children:[...Array(s).keys()].map((e=>(0,t.jsx)("td",{children:(0,t.jsx)(Ee.Z,{})},e)))},e)))})})}function Se(){return(0,t.jsx)(De,{rows:5,cols:3})}var we=a(2584);function Pe(){const{t:e}=(0,c.$)("srs");return(0,t.jsx)("div",{className:"deck-fields__empty",children:(0,t.jsx)("p",{children:e("srs:decks.one.fields.many.empty.message")})})}var Ae=a(3411),Oe=a(2608),Re=a(6941),Le=a(6508),qe=a(7199);const Te="srs:decks.one.fields.settings";function Ue({index:e,field:s,state:a,dispatch:d}){const{t:i}=(0,c.$)("srs"),{status:{editbar:{mode:l}}}=a.fields,n=({target:{name:s,checked:a}})=>{d(["fieldSettingUpdated",{index:e,path:s,value:a}])};return(0,t.jsx)("td",{className:"deck-fields__table-cell","data-cell-type":"body","data-cell-column":"settings",children:(0,t.jsx)(Re.Z,{className:"deck-fields__field-settings",link:"",children:(0,t.jsxs)("ul",{className:"deck-fields__field-settings__actions",children:[(0,t.jsxs)("li",{className:"deck-fields__field-settings__actions-item",children:[(0,t.jsx)("h4",{className:"deck-fields__field-settings__title",children:i(`${Te}.actions.show`)}),(0,t.jsx)(Le.Z,{className:"deck-fields__field-settings__item",id:`field-settings-${s.id}-show-is-label-visible`,name:"settings.actions.show.isLabelVisible",label:i(`${Te}.values.isLabelVisible`),disabled:"view"===l,checked:s?.settings?.actions?.show?.isLabelVisible,onChange:n})]}),(0,t.jsxs)("li",{className:"deck-fields__field-settings__actions-item",children:[(0,t.jsx)("h4",{className:"deck-fields__field-settings__title",children:i(`${Te}.actions.typeTest`)}),(0,t.jsx)(Le.Z,{className:"deck-fields__field-settings__item",id:`field-settings-${s.id}-typeTest-is-label-visible`,name:"settings.actions.typeTest.isLabelVisible",label:i(`${Te}.values.isLabelVisible`),disabled:"view"===l,checked:s?.settings?.actions?.typeTest?.isLabelVisible,onChange:n}),Object.keys(qe.t).map((e=>(0,t.jsx)(Le.Z,{className:"deck-fields__field-settings__item",id:`field-settings-${s.id}-typeTest-${e}`,name:`settings.actions.typeTest.processings.${e}`,label:i(`${Te}.values.${e}`),disabled:"view"===l,checked:s?.settings?.actions?.typeTest?.processings?.[e],onChange:n},e)))]})]})})})}const Fe="srs:decks.one.fields.many.table",Me="srs:decks.one.fields",Ke="unknown",Ve="fields_set";function ze({drag:e,index:s,field:a,state:d,dispatch:i}){const{t:n}=(0,c.$)("srs"),{error:r,status:{editbar:{mode:o}}}=d.fields,u=(0,l.useCallback)((e=>n(`${Me}.types.${(0,Oe.MR)(e?.id)||Ke}`)),[]),m=(0,l.useCallback)((e=>n(`${Me}.roles.${(0,Oe.cI)(e?.id)||Ke}`)),[]),p=(0,l.useCallback)((({target:{name:e,value:a}})=>{i(["fieldUpdated",{index:s,property:e,value:a}])}),[s]),g=(0,l.useCallback)((()=>{i(["fieldDeleted",{index:s}])}),[s]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("td",{className:"deck-fields__table-cell","data-cell-type":"body","data-cell-column":"index",children:(0,t.jsx)("span",{className:"deck-fields__table-cell-value",children:s+1})}),(0,t.jsx)("td",{className:"deck-fields__table-cell","data-cell-type":"body","data-cell-column":"title",children:"edit"===o?(0,t.jsx)(ke.Z,{className:"fields-table__title",name:"title",placeholder:n(`${Fe}.properties.title.placeholder`),isError:!!r?.meta?.errors?.[Ve]?.fields?.[s]?.title,errors:r?.meta?.errors?.[Ve]?.fields?.[s]?.title,errorPrefix:`${Fe}.properties.title.errors`,errorsDropdown:!0,value:a.title||"",onChange:p}):(0,t.jsx)("span",{className:"deck-fields__table-cell-value",children:a.title})}),(0,t.jsx)("td",{className:"deck-fields__table-cell","data-cell-type":"body","data-cell-column":"type",children:"edit"===o?(0,t.jsx)(Ae.Z,{className:"fields-table__type",name:"type",items:Oe.Z9,selectedItem:(0,Oe.tm)(a.type),getValue:u,onChange:p}):(0,t.jsx)("span",{className:"deck-fields__table-cell-value",children:u((0,Oe.tm)(a.type))})}),(0,t.jsx)("td",{className:"deck-fields__table-cell","data-cell-type":"body","data-cell-column":"role",children:"edit"===o?(0,t.jsx)(Ae.Z,{className:"deck-fields-table__role",name:"role",items:Oe.ij,selectedItem:(0,Oe.Ko)(a.role),getValue:m,onChange:p}):(0,t.jsx)("span",{className:"deck-fields__table-cell-value",children:m((0,Oe.Ko)(a.role))})}),(0,t.jsx)(Ue,{index:s,field:a,state:d,dispatch:i}),"edit"===o&&(0,t.jsxs)("td",{className:"deck-fields__table-cell","data-cell-type":"body","data-cell-column":"actions",children:[(0,t.jsx)(P.Z,{className:"deck-fields__table-delete delete-inline-button",onClick:g}),(0,t.jsx)("div",{className:"deck-fields__table-drag drag-handle",...e})]})]})}const He="srs:decks.one.fields.many.table",Ge=["index","title","type","role","settings","actions"];function Ye({state:e,dispatch:s}){const{t:a}=(0,c.$)("srs"),{data:d,status:{canAdd:i,editbar:{mode:n}}}=e.fields,{fields:r}=d||{},o=(0,l.useCallback)((()=>{s(["fieldAdded",{t:a}])}),[]),u=(0,l.useCallback)((({destination:e,source:a})=>{e&&e.index!==a.index&&s(["fieldMoved",{destination:e.index,source:a.index}])}),[]);return"view"!==n||r?.length?(0,t.jsx)("div",{className:"deck-fields__content",children:(0,t.jsx)(we.Z5,{onDragEnd:u,children:(0,t.jsxs)("table",{className:"deck-fields__table",children:[(0,t.jsx)("thead",{className:"deck-fields__table-head",children:(0,t.jsx)("tr",{className:"deck-fields__table-row","data-row-type":"head",children:Ge.map((e=>(0,t.jsx)("td",{className:"deck-fields__table-cell","data-cell-type":"head","data-cell-column":e,children:(0,t.jsx)("span",{className:"deck-fields__table-cell-value",children:a(`${He}.properties.${e}.caption`)})},e)))})}),r&&r.length>0&&(0,t.jsx)(we.bK,{droppableId:"fields",children:a=>(0,t.jsxs)("tbody",{ref:a.innerRef,...a.droppableProps,children:[r.map(((a,d)=>(0,t.jsx)(we._l,{draggableId:`${a.id}`,index:d,isDragDisabled:"edit"!==n,children:(i,l)=>(0,t.jsx)("tr",{className:"deck-fields__table-row","data-row-type":"body","data-is-dragging":l.isDragging,ref:i.innerRef,...i.draggableProps,children:(0,t.jsx)(ze,{drag:i.dragHandleProps,index:d,field:a,state:e,dispatch:s})})},a.id))),a.placeholder]})}),(0,t.jsx)("tbody",{children:(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:99,children:"edit"===n&&i&&(0,t.jsx)(P.Z,{className:"deck-fields__add add-button",onClick:o,content:a(`${He}.add`)})})})})]})})}):(0,t.jsx)(Pe,{})}const Be="fields",Qe=100;function Xe({state:e,dispatch:s}){const a=(0,q.oR)(q.zr),t=(0,r.tF)({isDemo:a,validationOnly:!0}),d=(0,r.tF)({isDemo:a}),{data:i,status:{isSaved:c,isSaving:n}}=e.fields;return(0,L.Z)((()=>{c||t.mutate(i)}),Qe,[c,i]),(0,l.useEffect)((()=>{t.isSuccess&&s(["validationCompleted",{entity:Be}])}),[t.isSuccess]),(0,l.useEffect)((()=>{t.isError&&s(["validationFailed",{entity:Be,error:t.error}])}),[t.isError,t.error]),(0,l.useEffect)((()=>{n&&d.mutate(i)}),[n,i]),(0,l.useEffect)((()=>{d.isSuccess&&s(["savingCompleted",{entity:Be,data:d.data}])}),[d.isSuccess]),(0,l.useEffect)((()=>{d.isError&&s(["savingFailed",{entity:Be,error:d.error}])}),[d.isError,d.error]),null}const We="srs:decks.one.fields.many";function Je({state:e,dispatch:s}){const{t:a}=(0,c.$)(),{data:d,status:{isLoaded:i,editbar:{mode:l}}}=e.fields;return(0,t.jsxs)(g.Z.Section,{className:"deck-fields",mode:l,children:[(0,t.jsx)(g.Z.SectionHeader,{className:"deck-progress__header",title:a(`${We}.title`),children:(0,t.jsx)(A.Z,{className:"deck-fields",entity:"fields",status:e.fields.status,dispatch:s})}),!i&&(0,t.jsx)(Se,{}),d&&"edit"===l&&(0,t.jsx)(Xe,{state:e,dispatch:s}),d&&(0,t.jsx)(Ye,{state:e,dispatch:s})]})}const es="cards",ss=["table","slider"],as="srs:decks.one.cards.many.displayModes";function ts({state:e,dispatch:s}){const{t:a}=(0,c.$)(),d=(0,l.useCallback)((({target:{name:e}})=>{s(["displayOptionSet",{entity:es,property:"mode",value:e}])}),[]);return(0,t.jsx)("ul",{className:"deck-cards__display-modes",children:ss.map((s=>(0,t.jsx)("li",{className:"deck-cards__display-mode",children:(0,t.jsx)(P.Z,{className:"deck-cards__display-mode-button",name:s,"data-is-active":e.cards.status.display?.mode===s,title:a(`${as}.${s}`),onClick:d})},s)))})}function ds(){const{t:e}=(0,c.$)("srs");return(0,t.jsx)("div",{className:"deck-cards__no-fields",children:(0,t.jsx)("p",{children:e("decks.one.cards.many.noFields.message")})})}function is(){return(0,t.jsx)(De,{rows:10,cols:3})}const ls="cards";function cs({state:e,dispatch:s}){const{meta:{isDemo:a},cards:{data:t,status:{isSaving:d}}}=e,i=(0,r.kM)({isDemo:a});return(0,l.useEffect)((()=>{d&&t&&i.mutate(t)}),[d,t]),(0,l.useEffect)((()=>{i.isSuccess&&s(["savingCompleted",{entity:ls,data:i.data}])}),[i.isSuccess]),(0,l.useEffect)((()=>{i.isError&&s(["savingFailed",{entity:ls,error:i.error}])}),[i.isError,i.error]),null}function ns(){const{t:e}=(0,c.$)("srs");return(0,t.jsx)("div",{className:"deck-cards__empty",children:(0,t.jsx)("p",{children:e("decks.one.cards.many.empty.message")})})}const rs="srs:decks.one.cards.many";function os({state:e}){const{t:s}=(0,c.$)("srs"),{fields:a}=e.fields?.data||{},d=e.learning.data?.repping,{status:{display:{showProgress:i}={},editbar:{mode:l}}}=e.cards;return(0,t.jsx)("thead",{className:"deck-cards__table-head",children:(0,t.jsxs)("tr",{className:"deck-cards__table-row","data-row-type":"head",children:[(0,t.jsx)("td",{className:"deck-cards__table-cell","data-cell-type":"head","data-cell-column":"index",children:(0,t.jsx)("span",{className:"deck-cards__table-cell-value",children:s(`${rs}.properties.index.caption`)})}),a&&a.map((e=>(0,t.jsx)("td",{className:"deck-cards__table-cell","data-cell-type":"head","data-cell-column":"value",children:(0,t.jsx)("span",{className:"deck-cards__table-cell-value",children:e.title})},e.id))),i&&d&&(0,t.jsx)("td",{className:"deck-cards__table-cell","data-cell-type":"head","data-cell-column":"progress",children:(0,t.jsx)("span",{className:"deck-cards__table-cell-value",children:s(`${rs}.properties.progress.caption`)})}),i&&"edit"===l&&(0,t.jsx)("td",{className:"deck-cards__table-cell","data-cell-type":"head","data-cell-column":"progress-actions",children:(0,t.jsx)("span",{className:"deck-cards__table-cell-value",children:s(`${rs}.properties.progressActions.caption`)})}),"edit"===l&&(0,t.jsx)("td",{className:"deck-cards__table-cell","data-cell-type":"head","data-cell-column":"actions",children:(0,t.jsx)("span",{className:"deck-cards__table-cell-value",children:s(`${rs}.properties.actions.caption`)})})]})})}const us={1:function({className:e,label:s,mode:a,name:d,value:i,onChange:l}){const{t:n}=(0,c.$)("srs");return(0,t.jsx)(ke.Z,{className:e,label:s,name:d,placeholder:n("srs:decks.one.cards.many.properties.value.placeholder"),readOnly:"view"===a,"data-field-type":"text","data-is-readonly":"view"===a,value:i?.text||"",onChange:l})}};function ms({className:e,label:s,type:a,name:d,mode:i,value:c,onChange:n}){const r=(0,l.useMemo)((()=>us?.[a]),[a]);return(0,t.jsx)(r,{className:e,label:s,mode:i,name:d,value:c,onChange:n})}var ps=a(2644),gs=a(2552);const hs="srs:decks.one.cards.many.properties";function _s({card:e}){const{t:s,i18n:{language:a}}=(0,c.$)(),{progress:{dueAt:d}={},meta:{status:i,divel:l}={}}=e,n=!(!d||(0,ps.Z)(new Date(d)));return(0,t.jsx)("td",{className:"deck-cards__table-cell","data-cell-type":"body","data-cell-column":"progress",children:(0,t.jsxs)("span",{className:"deck-cards__progress",children:[(0,t.jsx)("span",{className:"deck-cards__progress-status","data-status":i,"data-is-overdue":n,children:(0,t.jsx)("span",{className:"deck-cards__progress-status-text",children:"learning"===i?d&&(n?s(`${hs}.progress.values.overdue`):s(`${hs}.progress.values.dueAt`,{value:(0,gs.j)(a,new Date(d))})):s(`${hs}.progress.values.${i}`)})}),"learning"===i&&(0,t.jsxs)("span",{className:"deck-cards__progress-divel",children:[(0,t.jsx)("span",{className:"deck-cards__progress-divel-index",title:l?.title||"",children:l?.index}),(0,t.jsx)("span",{className:"deck-cards__progress-divel-title",children:l?.title})]})]})})}const bs="srs:decks.one.cards.many.properties.progress";function xs({card:e,dispatch:s}){const{t:a}=(0,c.$)(),{progress:{isCompleted:d}={},meta:{status:i}={}}=e,n=(0,l.useCallback)((({target:{name:e}})=>{s(["cardProgressUpdated",{id:e,property:"isCompleted"}])}),[]),r=(0,l.useCallback)((({target:{name:e}})=>{s(["cardProgressUpdated",{id:e,property:"progress"}])}),[]);return(0,t.jsxs)("td",{className:"deck-cards__table-cell","data-cell-type":"body","data-cell-column":"progress-actions",children:[(0,t.jsx)(P.Z,{className:"deck-cards__table-item-progress-reset-button",name:`${e.id}`,title:a(`${bs}.actions.reset`),disabled:"initial"===i,onClick:r}),(0,t.jsx)(P.Z,{className:"deck-cards__table-item-progress-complete-button",name:`${e.id}`,title:a(`${bs}.actions.complete`),disabled:d,onClick:n})]})}function fs({drag:e,index:s,card:a,fields:d,state:i,dispatch:c}){const n=i.learning.data?.repping,{status:{display:{showProgress:r}={},editbar:{mode:o}}}=i.cards,u=(0,l.useCallback)((({target:{name:e,value:a}})=>{c(["cardUpdated",{index:s,path:e,value:a}])}),[s]),m=(0,l.useCallback)((()=>{c(["cardDeleted",{index:s}])}),[s]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("td",{className:"deck-cards__table-cell","data-cell-type":"body","data-cell-column":"index",children:(0,t.jsx)("span",{className:"deck-cards__table-cell-value",children:s+1})}),d.map((e=>(0,t.jsx)("td",{className:"deck-cards__table-cell","data-cell-type":"body","data-cell-column":"value",children:(0,t.jsx)(ms,{className:"deck-cards__table-item-property",name:`content.${e.id}.[0].text`,type:e.type,mode:o,value:a?.content?.[e.id]?.[0]||{},onChange:u})},e.id))),r&&n&&(0,t.jsx)(_s,{card:a}),r&&n&&"edit"===o&&(0,t.jsx)(xs,{card:a,dispatch:c}),"edit"===o&&(0,t.jsxs)("td",{className:"deck-cards__table-cell","data-cell-type":"body","data-cell-column":"actions",children:[(0,t.jsx)(P.Z,{className:"deck-cards__table-delete delete-inline-button",onClick:m}),(0,t.jsx)("div",{className:"deck-cards__table-drag drag-handle",...e})]})]})}const js="srs:decks.one.cards.many.table";function ks({state:e,dispatch:s}){const{t:a}=(0,c.$)("srs"),{fields:d}=e.fields?.data||{},{data:i,status:{canAdd:n,editbar:{mode:r}}}=e.cards,{cards:o}=i||{},u=(0,l.useCallback)((()=>{s(["cardAdded",{}])}),[]),m=(0,l.useCallback)((({destination:e,source:a})=>{e&&e.index!==a.index&&s(["cardMoved",{destination:e.index,source:a.index}])}),[]);return d?(0,t.jsxs)(we.Z5,{onDragEnd:m,children:[(0,t.jsx)("div",{className:"deck-cards__table-wrapper",children:(0,t.jsxs)("table",{className:"deck-cards__table",children:[(0,t.jsx)(os,{state:e}),o&&o.length>0&&(0,t.jsx)(we.bK,{droppableId:"cards",children:a=>(0,t.jsxs)("tbody",{ref:a.innerRef,...a.droppableProps,children:[o.map(((a,i)=>(0,t.jsx)(we._l,{draggableId:`${a.id}`,index:i,isDragDisabled:"edit"!==r,children:(l,c)=>(0,t.jsx)("tr",{className:"deck-cards__table-row","data-row-type":"body","data-is-dragging":c.isDragging,ref:l.innerRef,...l.draggableProps,children:(0,t.jsx)(fs,{drag:l.dragHandleProps,index:i,card:a,fields:d,state:e,dispatch:s})})},a.id))),a.placeholder]})})]})}),"edit"===r&&n&&(0,t.jsx)(P.Z,{className:"deck-cards__table-add add-button",onClick:u,content:a(`${js}.add`)})]}):null}var vs=a(7055);const ys="srs:decks.one.cards.many.properties.progress";function Ns({card:e,mode:s,dispatch:a}){const{t:d}=(0,c.$)(),{progress:{isCompleted:i,dueAt:n}={},meta:{status:r,divel:o}={}}=e,u=!(!n||(0,ps.Z)(new Date(n))),m=(0,l.useCallback)((({target:{name:e}})=>{a(["cardProgressUpdated",{id:e,property:"isCompleted"}])}),[]),p=(0,l.useCallback)((({target:{name:e}})=>{a(["cardProgressUpdated",{id:e,property:"progress"}])}),[]);return(0,t.jsxs)("div",{className:"deck-cards__slider-card-progress",children:[(0,t.jsx)("span",{className:"deck-cards__progress-status","data-status":r,"data-is-overdue":u,children:"learning"===r?(0,t.jsx)("span",{className:"deck-cards__progress-due-at",children:n&&(u?d(`${ys}.values.overdue`):d(`${ys}.values.dueAt`,{value:(0,vs.Z)(new Date(n),new Date)}))}):d(`${ys}.values.${r}`)}),o&&(0,t.jsxs)("span",{className:"deck-cards__progress-divel",children:[(0,t.jsx)("span",{className:"deck-cards__progress-divel-index",children:o?.index}),(0,t.jsx)("span",{className:"deck-cards__progress-divel-title",children:o?.title})]}),"edit"===s&&(0,t.jsxs)(t.Fragment,{children:["initial"!==r&&(0,t.jsx)(P.Z,{className:"deck-cards__slider-card-progress-reset-button",name:`${e.id}`,onClick:p,content:d(`${ys}.actions.reset`)}),!i&&(0,t.jsx)(P.Z,{className:"deck-cards__slider-card-progress-complete-button",name:`${e.id}`,onClick:m,content:d(`${ys}.actions.complete`)})]})]})}const Cs="srs:decks.one.cards.many.slider";function $s({index:e,card:s,fields:a,state:d,dispatch:i}){const{t:n}=(0,c.$)(),r=d.learning.data?.repping,{status:{editbar:{mode:o}}}=d.cards,u=(0,l.useCallback)((({target:{name:s,value:a}})=>{i(["cardUpdated",{index:e,path:s,value:a}])}),[e]),m=(0,l.useCallback)((()=>{i(["cardDeleted",{index:e}])}),[e]);return(0,t.jsxs)("div",{className:"deck-cards__slider-card",children:[(0,t.jsx)("h3",{className:"deck-cards__slider-card-title",children:n(`${Cs}.titles.content`)}),a.map((e=>(0,t.jsx)(ms,{className:"deck-cards__slider-card-property",label:e.title,name:`content[${e.id}][0].text`,type:e.type,mode:o,value:s?.content?.[e.id]?.[0]||{},onChange:u},e.id))),r&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h3",{className:"deck-cards__slider-card-title",children:n(`${Cs}.titles.progress`)}),(0,t.jsx)(Ns,{card:s,mode:o,dispatch:i})]}),"edit"===o&&(0,t.jsx)("div",{className:"deck-cards__slider-card-actions",children:(0,t.jsx)(P.Z,{className:"deck-cards__slider-delete delete-button",onClick:m,content:"Delete card"})})]})}const Zs="srs:decks.one.cards.many.slider";function Is({state:e,dispatch:s}){const{t:a}=(0,c.$)("srs"),{data:d,status:{canAdd:i,display:n,editbar:{mode:r}}}=e.cards,{fields:o}=e.fields?.data||{},{cards:u}=d||{},{currentItem:m={}}=n||{},p=(0,l.useMemo)((()=>u&&u.find((e=>e.id===m.id))),[u,m]),g=(0,l.useCallback)((({target:{name:e}})=>{s(["currentCardSet",{id:e}])}),[]),h=(0,l.useCallback)((()=>{s(["cardAdded",{}])}),[]),_=(0,l.useCallback)((({destination:e,source:a})=>{e&&e.index!==a.index&&s(["cardMoved",{destination:e.index,source:a.index}])}),[]);return o?(0,t.jsxs)("div",{className:"deck-cards__slider",children:[(0,t.jsx)(we.Z5,{onDragEnd:_,children:u&&(0,t.jsx)(we.bK,{droppableId:"deck-cards",direction:"horizontal",children:e=>(0,t.jsx)("div",{className:"deck-cards__slider-header",children:(0,t.jsxs)("ul",{className:"deck-cards__slider-list",ref:e.innerRef,...e.droppableProps,children:[u.map(((e,s)=>(0,t.jsx)(we._l,{draggableId:`${e.id}`,index:s,isDragDisabled:"edit"!==r,children:(a,d)=>(0,t.jsxs)("li",{className:"deck-cards__slider-list-item","data-is-dragging":d.isDragging,ref:a.innerRef,...a.draggableProps,children:[(0,t.jsx)(P.Z,{className:"deck-cards__slider-list-item-index",name:`${e.id}`,"data-is-selected":e.id===m.id,onClick:g,children:s+1}),"edit"===r&&(0,t.jsx)("div",{className:"deck-cards__slider-drag drag-handle",...a.dragHandleProps})]})},e.id))),e.placeholder,"edit"===r&&i&&(0,t.jsx)("li",{className:"deck-cards__slider-list-item",children:(0,t.jsx)(P.Z,{className:"deck-cards__slider-add add-button",onClick:h,content:a(`${Zs}.add`)})})]})})})}),p&&(0,t.jsx)($s,{index:m.index,card:p,fields:o,state:e,dispatch:s})]}):null}function Es({state:e,dispatch:s}){const{data:a,status:{display:d,editbar:{mode:i}}}=e.cards,{cards:l}=a||{};return(0,t.jsx)("div",{className:"deck-cards__content",children:"view"!==i||l?.length?(0,t.jsxs)(t.Fragment,{children:["table"===d?.mode&&(0,t.jsx)(ks,{state:e,dispatch:s}),"slider"===d?.mode&&(0,t.jsx)(Is,{state:e,dispatch:s})]}):(0,t.jsx)(ns,{})})}const Ds="srs:decks.one.cards.many";function Ss({state:e,dispatch:s}){const{t:a}=(0,c.$)(),{data:{cards:d}={},status:{editbar:{mode:i}}}=e.cards,l=e.deck?.data?.fieldsTotal>0;return(0,t.jsxs)(g.Z.Section,{className:"deck-cards",mode:i,children:[(0,t.jsx)(g.Z.SectionHeader,{className:"deck-cards__header",title:a(`${Ds}.title`),children:l&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ts,{state:e,dispatch:s}),(0,t.jsx)(A.Z,{className:"deck-cards",entity:"cards",status:e.cards.status,dispatch:s})]})}),!l&&(0,t.jsx)(ds,{}),l&&!d&&(0,t.jsx)(is,{}),l&&d&&"edit"===i&&(0,t.jsx)(cs,{state:e,dispatch:s}),l&&d&&(0,t.jsx)(Es,{state:e,dispatch:s})]})}const ws="srs:decks.one.tabs",Ps={sort:"+title",filters:{isEligible:[!0]}};function As({id:e,isDemo:s}){const{t:a}=(0,c.$)(),{isLoading:d,data:i,error:h}=(0,r.qG)({id:e},{isDemo:s}),_=(0,o.XC)({deckId:e},{isDemo:s}),b=(0,r.Bq)({deckId:e},{isDemo:s}),x=(0,u.Cr)(Ps,{isDemo:s}),[f,j]=(0,l.useReducer)(w,C),{title:k}=f.meta;return(0,l.useEffect)((()=>{document.title=n.Z.deck(a,{isDemo:s,deck:k})}),[a,s,k]),(0,l.useEffect)((()=>{j(["isDemoSet",s])}),[s]),(0,l.useEffect)((()=>{i&&j(["deckReceived",i])}),[i]),(0,l.useEffect)((()=>{_.data&&j(["learningReceived",_.data])}),[_.data]),(0,l.useEffect)((()=>{b.data&&j(["cardsReceived",b.data])}),[b.data]),(0,l.useEffect)((()=>{x.data&&j(["reppingsReceived",x.data])}),[x.data]),"ValidationError"===h?.name||404===h?.status?(0,t.jsx)(m.Z,{}):(0,t.jsx)(g.Z,{entity:"deck",children:(0,t.jsxs)(p.mQ,{className:"feature__tabs",defaultIndex:0,children:[(0,t.jsxs)(g.Z.Header,{children:[(0,t.jsx)(g.Z.Title,{isLoading:d,children:k}),!1,(0,t.jsx)(p.TX,{className:"feature__tabs-header",children:f.meta.tabs.headers.map((e=>(0,t.jsx)(p.GK,{disabled:f.meta.tabs.items[e].disabled,children:a(`${ws}.${e}`)},e)))})]}),(0,t.jsxs)(g.Z.Content,{children:[(0,t.jsx)(p.I5,{className:"feature__tab-content",children:(0,t.jsx)(ue,{state:f,dispatch:j})}),(0,t.jsx)(p.I5,{className:"feature__tab-content",children:(0,t.jsx)(Ze,{state:f,dispatch:j})}),(0,t.jsx)(p.I5,{className:"feature__tab-content",children:(0,t.jsx)(Je,{state:f,dispatch:j})}),(0,t.jsx)(p.I5,{className:"feature__tab-content",children:(0,t.jsx)(Ss,{state:f,dispatch:j})})]})]})})}function Os({isDemo:e}){const{id:s}=(0,d.UO)(),{isLoading:a}=(0,i.Z)({isDemo:e,isAuthRequired:!0});return a?null:(0,t.jsx)(As,{id:s,isDemo:e})}},6508:(e,s,a)=>{a.d(s,{Z:()=>l});var t=a(5893),d=a(6010),i=a(2335);function l({className:e,id:s,label:a,checked:l,disabled:c,...n}){return(0,t.jsxs)("div",{className:(0,d.Z)(e,"checkbox"),children:[(0,t.jsx)("input",{className:(0,d.Z)(e&&`${e}-input`,"checkbox__input input"),type:"checkbox",id:s,checked:!!l,disabled:c,...n}),(0,t.jsx)(i.Z,{className:(0,d.Z)(e&&`${e}-label`,"checkbox__label label"),id:s,label:a})]})}},3809:(e,s,a)=>{a.d(s,{Z:()=>n});var t=a(5893),d=a(7294),i=a(6010),l=a(2335),c=a(7325);function n({className:e,label:s,isError:a,onChange:n,...r}){const o=(0,d.useCallback)((({target:e})=>{e.nextElementSibling.stepUp();const s=new Event("change",{bubbles:!0});e.nextElementSibling.dispatchEvent(s),e.nextElementSibling.focus()}),[]),u=(0,d.useCallback)((({target:e})=>{e.previousElementSibling.stepDown();const s=new Event("change",{bubbles:!0});e.previousElementSibling.dispatchEvent(s),e.previousElementSibling.focus()}),[]);return(0,t.jsxs)("div",{className:(0,i.Z)(e,"number-input"),children:[(0,t.jsx)(l.Z,{className:"number-input__label label",label:s,id:r.id,isError:a}),(0,t.jsx)(c.Z,{className:"number-input__increment",tabIndex:-1,onClick:o}),(0,t.jsx)("input",{className:"number-input__value value",type:"number",value:r.value,"data-is-error":a,onChange:n,...r}),(0,t.jsx)(c.Z,{className:"number-input__decrement",tabIndex:-1,onClick:u})]})}},2527:(e,s,a)=>{a.d(s,{Z:()=>u});var t=a(5893),d=a(7294),i=a(6010),l=a(805);const c=e=>e?.id||"",n=e=>e?.value||"",r=(e,s,a)=>e.filter((e=>s(e).toLowerCase().startsWith(a.toLowerCase()))),o=[l.Kb.stateChangeTypes.ToggleButtonClick,l.Kb.stateChangeTypes.InputKeyDownArrowDown,l.Kb.stateChangeTypes.InputKeyDownArrowUp];function u({name:e,...s}){const a=s.getKey||c,u=s.getValue||n,m=(0,d.useCallback)((({selectedItem:a})=>{s.onChange({target:{name:e,value:a.id,item:a}})}),[e,s.onChange]),[p,g]=(0,d.useState)(s.items),[h,_]=(0,d.useState)(""),{getLabelProps:b,getComboboxProps:x,getInputProps:f,getToggleButtonProps:j,getMenuProps:k,getItemProps:v,isOpen:y,selectedItem:N,highlightedIndex:C,toggleMenu:$}=(0,l.Kb)({items:p,inputValue:h,initialSelectedItem:s.selectedItem,selectedItem:s.selectedItem,itemToString:u,onSelectedItemChange:m,onInputValueChange:e=>{_(e.inputValue)},onIsOpenChange:e=>{e.isOpen&&o.includes(e.type)&&_("")}});return(0,d.useEffect)((()=>{y||_(u(N))}),[y,N,u]),(0,d.useEffect)((()=>{g(r(s.items,u,h))}),[h,s.items,u]),(0,t.jsxs)("div",{className:(0,i.Z)(s.className,"autocomplete select"),"data-is-open":y,"data-is-readonly":!!s.readOnly,children:[s.label&&(0,t.jsx)("label",{...b({className:"label"}),children:s.label}),(0,t.jsxs)("div",{...x({className:"autocomplete__content"}),children:[(0,t.jsx)("input",{...f({className:"autocomplete__input",disabled:s.disabled||s.readOnly,placeholder:u(N)})}),(0,t.jsx)("button",{className:"autocomplete__control",disabled:s.disabled||s.readOnly,onClick:$,...j()}),(0,t.jsx)("ul",{...k({className:"autocomplete__items select__items"}),children:y&&p.map(((e,s)=>(0,t.jsx)("li",{"data-is-highlighted":C===s,"data-is-selected":N===e,...v({className:"autocomplete__item select__item",item:e,index:s}),children:u(e)},a(e))))})]})]})}},876:(e,s,a)=>{a.d(s,{Z:()=>l});var t=a(5893),d=a(6010);function i({className:e,children:s}){return(0,t.jsx)("dl",{className:(0,d.Z)(e,"settings"),children:s})}i.Item=function({className:e,children:s}){return(0,t.jsx)("div",{className:(0,d.Z)(e,"settings__item"),children:s})},i.ItemTitle=function({className:e,children:s}){return(0,t.jsx)("dt",{className:(0,d.Z)(e,"settings__item-title"),children:s})},i.ItemContent=function({className:e,children:s}){return(0,t.jsx)("dd",{className:(0,d.Z)(e,"settings__item-content"),children:s})};const l=i},6874:(e,s,a)=>{a.d(s,{Z:()=>o});var t=a(5893),d=a(7294),i=a(2327),l=a(6010),c=a(5619),n=a(2527);const r="srs:decks.selects.language";function o({className:e,label:s,readOnly:a,hasNullOption:o,value:u,onChange:m}){const{i18n:{language:p},t:g}=(0,i.$)("srs"),{data:h}=(0,c.Hc)({language:p}),_=(0,d.useMemo)((()=>h?.data?o?[{id:null,value:g(`${r}.items.none`)},...h.data]:h.data:null),[h,o,g]),b=(0,d.useMemo)((()=>_?_.find((e=>e.id===u))||_[0]:null),[_,u,o]);return _?(0,t.jsx)(n.Z,{className:(0,l.Z)(e,"language-select"),name:"languageId",label:s||g(`${r}.label`),readOnly:a,items:_,selectedItem:b,onChange:m}):null}},5044:(e,s,a)=>{a.d(s,{Z:()=>b});var t=a(5893),d=a(7294),i=a(2327),l=a(6010),c=a(5619),n=a(2527),r=a(8172);const o={categoryId:1,subjectId:1,options:{}},u=e=>({...o,...e}),m={dataReceived:function(e,s){e.categories=[...s],e.options.category&&e.categories.unshift(e.options.category);p(e,e.categoryId)},nullOptionUpdated:function(e,s){const{category:a,subject:t}=s;a&&(e.options.category={id:null,value:a});t&&(e.options.subject={id:null,value:t})},categoryChanged:p,subjectChanged:g};function p(e,s){e.categoryId=s,e.categories&&(e.category=s?e.categories.find((e=>e.id===s)):e.categories[0],(e.category?.subjects||e.options.subject)&&(e.subjects=e.category?.subjects||[],e.options.subject&&1!==e.subjects.length&&e.subjects.unshift(e.options.subject),e.subject=e.subjects[0],e.subjectId=e.subject.id,g(e,e.subjectId)))}function g(e,s){e.subjectId=s,e.category&&Array.isArray(e.subjects)&&(e.subject=s?e.subjects.find((e=>e.id===s)):e.subjects[0])}const h=(0,r.ZP)(((e,[s,a])=>(m[s]&&m[s](e,a),e))),_="srs:decks.selects";function b({readOnly:e,hasNullOption:s,categoryId:a,subjectId:r,onCategoryChange:o,onSubjectChange:m,...p}){const{i18n:{language:g},t:b}=(0,i.$)("srs"),{data:x}=(0,c.Dk)({language:g}),[f,j]=(0,d.useReducer)(h,{categoryId:a,subjectId:r},u),{categories:k,subjects:v,category:y,subject:N}=f;return(0,d.useEffect)((()=>{j(["nullOptionUpdated",{category:s&&b(`${_}.category.items.none`),subject:s&&b(`${_}.subject.items.none`)}])}),[s,b]),(0,d.useEffect)((()=>{x?.data&&j(["dataReceived",x?.data])}),[x?.data]),(0,d.useEffect)((()=>{j(["categoryChanged",a])}),[a]),(0,d.useEffect)((()=>{j(["subjectChanged",r])}),[r]),k&&v?(0,t.jsxs)(t.Fragment,{children:[k&&(0,t.jsx)(n.Z,{className:(0,l.Z)(p.categoryClassName,"category-select"),name:"categoryId",label:b(`${_}.category.label`),readOnly:e,items:k,selectedItem:y,onChange:o}),v&&(0,t.jsx)(n.Z,{className:(0,l.Z)(p.subjectClassName,"subject-select"),name:"subjectId",label:b(`${_}.subject.label`),readOnly:e,items:v,selectedItem:N,onChange:m})]}):null}},9958:(e,s,a)=>{a.d(s,{Kt:()=>n,Pm:()=>r,XC:()=>l,dL:()=>c,fN:()=>i});var t=a(8767),d=a(781);function i(e,s){return(0,t.useInfiniteQuery)(["learnings","paginated",e],(async({pageParam:a})=>(0,d.Y)("srs","learnings_get",[200],{...e,offset:a},s)),{getNextPageParam:e=>e.meta.pagination.nextOffset})}function l(e,s){return(0,t.useQuery)(["learnings","one"],(async()=>(0,d.Y)("srs","learning_get",[200,404],e,s)))}function c(e){return(0,t.useMutation)((async s=>(0,d.Y)("srs","learning_add",[200],s,e)))}function n(e){return(0,t.useMutation)((async s=>(0,d.Y)("srs","learning_update",[200],s,e)))}function r(e){return(0,t.useMutation)((async s=>(0,d.Y)("srs","learning_delete",[204],s,e)))}},7199:(e,s,a)=>{a.d(s,{H:()=>i,t:()=>d});const t=[["á","a"],["Á","A"],["é","e"],["É","E"],["í","i"],["Í","I"],["ó","o"],["Ó","O"],["ú","u"],["Ú","U"],["ü","u"],["Ü","U"],["ñ","n"],["Ñ","N"],["ё","е"],["Ё","Е"]],d={trimSpaces:function(e){return e.map((e=>e.trim()))},ignoreCase:function(e){return e.map((e=>e.toLowerCase()))},ignorePunctuation:function(e){return e.map((e=>e.replace(/[^\w\s]|_/g,"")))},ignoreAccents:function(e){return t.reduce((([e,s],[a,t])=>[e.replace(a,t),s.replace(a,t)]),e)}};function i(e){const s=e.value||"",a=e?.content?.[0]?.text||"";if(s===a)return!0;const{processings:t={}}=e.settings.actions?.typeTest||{},i=Object.keys(t).filter((e=>t[e])),[l,c]=i.reduce((([e,s],a)=>Object.prototype.hasOwnProperty.call(d,a)?d[a]([e,s]):[e,s]),[s,a]);return l===c}}}]);