"use strict";(self.webpackChunkkoloda=self.webpackChunkkoloda||[]).push([[298],{5298:(e,t,s)=>{s.r(t),s.d(t,{default:()=>L});var a=s(5893),n=s(6056),i=s(7294),l=s(2327),c=s(5608),r=s(5619),d=s(7450),o=s(8836),u=s(8172),m=s(7917),h=s(691);const g=["+title","-title","+created_at","-created_at","+updated_at","-updated_at"],f=[{name:"isEligible",values:[!0,!1],convert:m.gP}],p=["categoryId","subjectId","languageId"],j={meta:{},decks:{},params:{sort:"+title",limit:10},ui:{filters:{}}},_={isDemoSet:h.s6,dataUpdated:function(e,t){e.decks.data=t?.pages?t.pages.reduce(((e,t)=>[...e,...t.data]),[]):void 0},sortUpdated:m.wO,filterUpdated:function(e,t){const{name:s,value:a}=t;p.includes(s)?(e.params.filters||(e.params.filters={}),a?e.params.filters[s]=[a]:delete e.params.filters[s]):(0,m.jl)(e,t,f);(0,m.bD)(e)},filtersCleared:m.lf};const y=(0,u.ZP)(((e,[t,s])=>(_[t]&&_[t](e,s),e)));var b=s(6347),x=s(6829),v=s(6228);const N="srs:decks.many.list";function k({deck:e}){const{t}=(0,l.$)(),s=(0,v.oR)(v.zr);return(0,a.jsxs)(o.Z.ListItemLink,{entity:"decks",to:x.Z.deck({isDemo:s,id:e.id}),children:[(0,a.jsx)("span",{className:"decks__item-title",children:e.title}),(0,a.jsx)("span",{className:"decks__item-cards",children:t(`${N}.cards`,{count:(0,b.e$)(e.cardsTotal)})}),(0,a.jsx)("span",{className:"decks__item-fields",children:t(`${N}.fields`,{count:(0,b.e$)(e.fieldsTotal)})})]})}var Z=s(5044),C=s(6874),$=s(6508);const I="srs:decks.many.options";function D({state:e,dispatch:t}){const{t:s}=(0,l.$)(),{meta:n,params:c,ui:r}=e,d=(0,i.useCallback)((e=>s(`${I}.sorting.${e}`)),[]),u=(0,i.useCallback)((({target:{value:e}})=>{t(["sortUpdated",e])}),[]),m=(0,i.useCallback)((({target:{name:e,value:s}})=>{t(["filterUpdated",{name:e,value:s}])}),[]),h=(0,i.useCallback)((({target:{name:e,checked:s}})=>{t(["filterUpdated",{name:e,checked:s}])}),[]),p=(0,i.useCallback)((()=>{t(["filtersCleared",{}])}),[]);return(0,a.jsxs)(o.Z.Options,{children:[(0,a.jsx)(o.Z.Options.Sorting,{items:g,item:c.sort,getValue:d,onChange:u}),(0,a.jsxs)(o.Z.Options.Filters,{isEmpty:n.areFiltersEmpty,onClear:p,children:[(0,a.jsx)(Z.Z,{categoryClassName:"decks__category",subjectClassName:"decks__subject",hasNullOption:!0,categoryId:c.filters?.categoryId?.[0],subjectId:c.filters?.subjectId?.[0],onCategoryChange:m,onSubjectChange:m}),(0,a.jsx)(C.Z,{className:"decks__language",hasNullOption:!0,value:c.filters?.languageId?.[0],onChange:m}),f.map((e=>(0,a.jsx)(o.Z.Options.Filter,{title:s(`${I}.filters.${e.name}.title`),children:e.values.map((t=>(0,a.jsx)($.Z,{label:s(`${I}.filters.${e.name}.${t}`),name:`${e.name}__${t}`,id:`${e.name}__${t}`,checked:!0===r.filters?.[`${e.name}__${t}`],onChange:h},`${e.name}__${t}`)))},e.name)))]})]})}const O="decks",E="srs:decks.many";function S({isDemo:e}){const{t}=(0,l.$)(),[s,n]=(0,i.useReducer)(y,j),u=(0,r.k_)(s.params,{isDemo:e}),{data:m=[]}=s.decks;return(0,i.useEffect)((()=>{document.title=c.Z.decks(t,{isDemo:e})}),[t,e]),(0,i.useEffect)((()=>{n(["dataUpdated",u.data])}),[u.data]),(0,a.jsxs)(d.Z,{entity:O,children:[(0,a.jsx)(d.Z.Header,{children:(0,a.jsx)(d.Z.Title,{children:t(`${E}.title`)})}),(0,a.jsx)(d.Z.Content,{children:(0,a.jsxs)(o.Z,{entity:O,children:[(0,a.jsxs)(o.Z.Content,{query:u,children:[(0,a.jsx)(o.Z.List,{length:m.length,children:m.map((e=>(0,a.jsx)(o.Z.ListItem,{children:(0,a.jsx)(k,{deck:e})},e.id)))}),(0,a.jsx)(o.Z.Empty,{length:m.length,children:t(`${E}.empty`)})]}),(0,a.jsx)(D,{state:s,dispatch:n})]})})]})}function L({isDemo:e}){const{isLoading:t}=(0,n.Z)({isDemo:e,isAuthRequired:!0});return t?null:(0,a.jsx)(S,{isDemo:e})}},7917:(e,t,s)=>{s.d(t,{bD:()=>l,gP:()=>a,jl:()=>i,lf:()=>c,wO:()=>n});const a=e=>"true"===e;function n(e,t){e.params.sort=t}function i(e,{name:t,checked:s},a){e.params.filters||(e.params.filters={}),e.ui.filters||(e.ui.filters={});const{filters:n}=e.params,[i,l]=t.split("__"),{convert:c,values:r}=a.find((e=>e.name===i))||{};s?e.ui.filters[t]=s:delete e.ui.filters[t],c&&r&&(s&&(n[i]?(n[i].push(c(l)),n[i].length===r.length&&delete n[i]):n[i]=[c(l)]),s||(n[i]?(n[i]=n[i].filter((e=>e!==c(l))),n[i].length||delete n[i]):n[i]=r.filter((e=>e!==c(l)))))}function l(e){e.params.filters||(e.params.filters={}),e.ui.filters||(e.ui.filters={}),e.meta.areFiltersEmpty=0===Object.keys(e.ui.filters).length&&0===Object.keys(e.params.filters).length}function c(e){delete e.ui.filters,delete e.params.filters,e.meta.areFiltersEmpty=!0}},691:(e,t,s)=>{s.d(t,{D5:()=>h,GG:()=>o,Om:()=>g,Pn:()=>c,SE:()=>l,fn:()=>r,s6:()=>i,tH:()=>m,y$:()=>u,zs:()=>d});var a=s(3465),n=s.n(a);function i(e,t){e.meta.isDemo=t}function l(e,{entity:t,mode:s}){e[t].status.editbar.mode=s,e[t].status.message="initial",function(e){const{data:t,status:{canEdit:s,editbar:{mode:a}}}=e;"edit"===a&&s&&e.data&&(e.backup=n()(t))}(e[t])}function c(e,t){const{entity:s,property:a,value:n}=t;e[s].status.display[a]=n}function r(e,{entity:t}){e[t].status.message="saving",e[t].status.isSaving=!0,e[t].status.discard.isReady=!1}function d(e,{entity:t}){e[t].status.isError=!1,e[t].status.message="validated",e[t].error=null}function o(e,{entity:t,error:s}){e[t].status.isError=!0,e[t].status.message="error",e[t].error=s}function u(e,{entity:t,error:s}){e[t].status.isError=!0,e[t].status.isSaved=!1,e[t].status.isSaving=!1,e[t].status.message="error",e[t].error=s}function m(e){const{status:t,backup:s}=e;e.error=null,t.isError=!1,t.isSaved=!0,t.isSaving=!1,t.message="saved",t.discard.isAvailable=!!s,t.discard.isReady=!0,t.editbar.mode="view"}function h(e){e.isSaved=!1,e.discard.isEnabled&&(e.discard.isAvailable=!0)}function g(e,{entity:t}){const{backup:s,status:a}=e[t],{isEnabled:i,isAvailable:l,isReady:c}=a.discard;if(s&&(i&&l&&c)){const i="click"===a.editbar.variant;e[t].data=n()(s),e[t].backup=null,e[t].status.discard.isAvailable=!1,e[t].status.isSaved=i,i&&(e[t].status.editbar.mode="view",e[t].status.message="discarded",e[t].error=null)}}},6056:(e,t,s)=>{s.d(t,{Z:()=>r});var a=s(7294),n=s(5977),i=s(6228),l=s(6829),c=s(4232);function r({isDemo:e,isAuthRequired:t}){const{push:s}=(0,n.k6)(),r=(0,i.oR)(i.N1),{isLoading:d,data:o}=(0,c.rk)({isDemo:e});return(0,a.useEffect)((()=>{r(!!e)}),[e]),(0,a.useEffect)((()=>{!t||d||o?.data.uid||s(l.Z.home({isDemo:e}))}),[t,e,d,o?.data.uid]),{isLoading:t&&d}}},5608:(e,t,s)=>{s.d(t,{Z:()=>o});const a="app:titles",n=`${a}.delimiter`,i=`${a}.app`,l=`${a}.demo`,c=`${a}.reppings`,r=`${a}.decks`,d=(e,t)=>e.join(t),o={account:(e,{isDemo:t})=>d(t?[e(`${a}.account`),e(l),e(i)]:[e(`${a}.account`),e(i)],e(n)),learnings:(e,{isDemo:t})=>d(t?[e(l),e(i)]:[e(i)],e(n)),reppings:(e,{isDemo:t})=>d(t?[e(c),e(l),e(i)]:[e(c),e(i)],e(n)),repping:(e,{isDemo:t,repping:s})=>d(t?[s,e(c),e(l),e(i)]:[s,e(c),e(i)],e(n)),divel:(e,{isDemo:t,repping:s,divel:a})=>d(t?[a,s,e(c),e(l),e(i)]:[a,s,e(c),e(i)],e(n)),decks:(e,{isDemo:t})=>d(t?[e(r),e(l),e(i)]:[e(r),e(i)],e(n)),deck:(e,{isDemo:t,deck:s})=>d(t?[s,e(r),e(l),e(i)]:[s,e(r),e(i)],e(n)),lesson:(e,{isDemo:t})=>d(t?[e(`${a}.lesson`),e(l),e(i)]:[e(`${a}.lesson`),e(i)],e(n))}},7450:(e,t,s)=>{s.d(t,{Z:()=>r});var a=s(5893),n=s(6010);var i=s(2837);var l=s(4627);function c({className:e,entity:t,children:s,...i}){return(0,a.jsx)("div",{className:(0,n.Z)(e,"feature"),"data-entity":t,...i,children:s})}c.Header=function({children:e}){return(0,a.jsx)("header",{className:"feature__header",children:e})},c.Title=function({isLoading:e,children:t}){return e?(0,a.jsx)(i.Z,{}):(0,a.jsx)("h1",{className:"feature__title",children:t})},c.Toolbar=function({children:e}){return(0,a.jsx)("div",{className:"feature__toolbar",children:e})},c.Content=function({children:e}){return(0,a.jsx)(l.Z,{className:"feature__content",children:e})},c.Section=function({className:e,mode:t,children:s}){return(0,a.jsx)("div",{className:(0,n.Z)(e,"feature__section"),"data-mode":t,children:s})},c.SectionHeader=function({className:e,title:t,children:s}){return(0,a.jsxs)("div",{className:(0,n.Z)(e,"feature__section-header"),children:[t&&(0,a.jsx)("h2",{className:(0,n.Z)(`${e}__title`,"feature__section-header-title"),children:t}),s]})},c.SectionContent=function({className:e,children:t}){return(0,a.jsx)("div",{className:(0,n.Z)(e,"feature__section-content"),children:t})},c.Subsection=function({className:e,mode:t,children:s}){return(0,a.jsx)("div",{className:(0,n.Z)(e,"feature__subsection"),"data-mode":t,children:s})},c.SubsectionHeader=function({className:e,title:t,children:s}){return(0,a.jsxs)("div",{className:(0,n.Z)(e,"feature__subsection-header"),children:[t&&(0,a.jsx)("h3",{className:(0,n.Z)(`${e}__title`,"feature__subsection-header-title"),children:t}),s]})},c.SubsectionContent=function({className:e,children:t}){return(0,a.jsx)("div",{className:(0,n.Z)(e,"feature__subsection-content"),children:t})},c.Footer=function({children:e}){return(0,a.jsx)("header",{className:"feature__footer",children:e})};const r=c},8836:(e,t,s)=>{s.d(t,{Z:()=>g});var a=s(5893),n=s(2327),i=s(7325);var l=s(7294),c=s(3411);const r=e=>e;const d="app:ui.feature.many.options.filters";function o({children:e}){const{t}=(0,n.$)(),[s,c]=(0,l.useReducer)((e=>!e),!1);return(0,a.jsxs)("div",{className:"many__options",children:[(0,a.jsx)(i.Z,{className:"many__options-toggle","data-is-open":s,onClick:c,content:t("app:ui.feature.many.options.title")}),(0,a.jsx)("div",{className:"many__options-content","data-is-open":s,children:e})]})}o.Sorting=function({items:e,item:t,getValue:s,onChange:i}){const{t:l}=(0,n.$)();return(0,a.jsx)(c.Z,{className:"many__sorting",name:"sort",label:l("app:ui.feature.many.options.sorting.label"),items:e,selectedItem:t,getKey:r,getValue:s,onChange:i})},o.Filters=function({isEmpty:e,onClear:t,children:s}){const{t:l}=(0,n.$)();return(0,a.jsxs)("div",{className:"many__filters",children:[(0,a.jsxs)("div",{className:"many__filters-header",children:[(0,a.jsx)("span",{className:"many__filters-title",children:l(`${d}.title`)}),!1===e&&(0,a.jsx)(i.Z,{className:"many__filters-clear",disabled:e,onClick:t,content:l(`${d}.clear`)})]}),(0,a.jsx)("div",{className:"many__filters-content",children:s})]})},o.Filter=function({title:e,isOpenByDefault:t,children:s}){const[n,c]=(0,l.useReducer)((e=>!e),!!t);return(0,a.jsxs)("div",{className:"many__filter",children:[(0,a.jsx)(i.Z,{className:"many__filter-toggle","data-is-open":n,onClick:c,children:(0,a.jsx)("span",{className:"many__filter-title",children:e})}),(0,a.jsx)("div",{className:"many__filter-content","data-is-open":n,children:s})]})};const u=o;var m=s(3727);function h({entity:e,children:t}){return(0,a.jsx)("div",{className:"many","data-entity":e,children:t})}h.Content=function({query:e,children:t}){const{t:s}=(0,n.$)();return(0,a.jsxs)("div",{className:"many__content",children:[t,e.hasNextPage&&(0,a.jsx)(i.Z,{className:"many__load",onClick:()=>e.fetchNextPage(),content:s("app:ui.feature.many.load")})]})},h.Options=u,h.Empty=function({length:e,children:t}){return e?null:(0,a.jsx)("div",{className:"many__empty",children:(0,a.jsx)("span",{className:"many__empty-content",children:t})})},h.List=function({length:e,children:t}){return e?(0,a.jsx)("ul",{className:"many__list",children:t}):null},h.ListItem=function({children:e}){return(0,a.jsx)("li",{className:"many__list-item",children:e})},h.ListItemLink=function({to:e,entity:t,children:s}){return(0,a.jsx)(m.rU,{className:"many__list-item-link","data-entity":t,to:e,children:(0,a.jsx)("div",{className:"many__list-item-link-content","data-entity":t,children:s})})};const g=h},6508:(e,t,s)=>{s.d(t,{Z:()=>l});var a=s(5893),n=s(6010),i=s(2335);function l({className:e,id:t,label:s,checked:l,disabled:c,...r}){return(0,a.jsxs)("div",{className:(0,n.Z)(e,"checkbox"),children:[(0,a.jsx)("input",{className:(0,n.Z)(e&&`${e}-input`,"checkbox__input input"),type:"checkbox",id:t,checked:!!l,disabled:c,...r}),(0,a.jsx)(i.Z,{className:(0,n.Z)(e&&`${e}-label`,"checkbox__label label"),id:t,label:s})]})}},2527:(e,t,s)=>{s.d(t,{Z:()=>u});var a=s(5893),n=s(7294),i=s(6010),l=s(805);const c=e=>e?.id||"",r=e=>e?.value||"",d=(e,t,s)=>e.filter((e=>t(e).toLowerCase().startsWith(s.toLowerCase()))),o=[l.Kb.stateChangeTypes.ToggleButtonClick,l.Kb.stateChangeTypes.InputKeyDownArrowDown,l.Kb.stateChangeTypes.InputKeyDownArrowUp];function u({name:e,...t}){const s=t.getKey||c,u=t.getValue||r,m=(0,n.useCallback)((({selectedItem:s})=>{t.onChange({target:{name:e,value:s.id,item:s}})}),[e,t.onChange]),[h,g]=(0,n.useState)(t.items),[f,p]=(0,n.useState)(""),{getLabelProps:j,getComboboxProps:_,getInputProps:y,getToggleButtonProps:b,getMenuProps:x,getItemProps:v,isOpen:N,selectedItem:k,highlightedIndex:Z,toggleMenu:C}=(0,l.Kb)({items:h,inputValue:f,initialSelectedItem:t.selectedItem,selectedItem:t.selectedItem,itemToString:u,onSelectedItemChange:m,onInputValueChange:e=>{p(e.inputValue)},onIsOpenChange:e=>{e.isOpen&&o.includes(e.type)&&p("")}});return(0,n.useEffect)((()=>{N||p(u(k))}),[N,k,u]),(0,n.useEffect)((()=>{g(d(t.items,u,f))}),[f,t.items,u]),(0,a.jsxs)("div",{className:(0,i.Z)(t.className,"autocomplete select"),"data-is-open":N,"data-is-readonly":!!t.readOnly,children:[t.label&&(0,a.jsx)("label",{...j({className:"label"}),children:t.label}),(0,a.jsxs)("div",{..._({className:"autocomplete__content"}),children:[(0,a.jsx)("input",{...y({className:"autocomplete__input",disabled:t.disabled||t.readOnly,placeholder:u(k)})}),(0,a.jsx)("button",{className:"autocomplete__control",disabled:t.disabled||t.readOnly,onClick:C,...b()}),(0,a.jsx)("ul",{...x({className:"autocomplete__items select__items"}),children:N&&h.map(((e,t)=>(0,a.jsx)("li",{"data-is-highlighted":Z===t,"data-is-selected":k===e,...v({className:"autocomplete__item select__item",item:e,index:t}),children:u(e)},s(e))))})]})]})}},2837:(e,t,s)=>{s.d(t,{Z:()=>i});var a=s(5893),n=s(6010);function i({className:e}){return(0,a.jsx)("div",{className:(0,n.Z)(e,"skeleton-title skeleton")})}},6874:(e,t,s)=>{s.d(t,{Z:()=>o});var a=s(5893),n=s(7294),i=s(2327),l=s(6010),c=s(5619),r=s(2527);const d="srs:decks.selects.language";function o({className:e,label:t,readOnly:s,hasNullOption:o,value:u,onChange:m}){const{i18n:{language:h},t:g}=(0,i.$)("srs"),{data:f}=(0,c.Hc)({language:h}),p=(0,n.useMemo)((()=>f?.data?o?[{id:null,value:g(`${d}.items.none`)},...f.data]:f.data:null),[f,o,g]),j=(0,n.useMemo)((()=>p?p.find((e=>e.id===u))||p[0]:null),[p,u,o]);return p?(0,a.jsx)(r.Z,{className:(0,l.Z)(e,"language-select"),name:"languageId",label:t||g(`${d}.label`),readOnly:s,items:p,selectedItem:j,onChange:m}):null}},5044:(e,t,s)=>{s.d(t,{Z:()=>j});var a=s(5893),n=s(7294),i=s(2327),l=s(6010),c=s(5619),r=s(2527),d=s(8172);const o={categoryId:1,subjectId:1,options:{}},u=e=>({...o,...e}),m={dataReceived:function(e,t){e.categories=[...t],e.options.category&&e.categories.unshift(e.options.category);h(e,e.categoryId)},nullOptionUpdated:function(e,t){const{category:s,subject:a}=t;s&&(e.options.category={id:null,value:s});a&&(e.options.subject={id:null,value:a})},categoryChanged:h,subjectChanged:g};function h(e,t){e.categoryId=t,e.categories&&(e.category=t?e.categories.find((e=>e.id===t)):e.categories[0],(e.category?.subjects||e.options.subject)&&(e.subjects=e.category?.subjects||[],e.options.subject&&1!==e.subjects.length&&e.subjects.unshift(e.options.subject),e.subject=e.subjects[0],e.subjectId=e.subject.id,g(e,e.subjectId)))}function g(e,t){e.subjectId=t,e.category&&Array.isArray(e.subjects)&&(e.subject=t?e.subjects.find((e=>e.id===t)):e.subjects[0])}const f=(0,d.ZP)(((e,[t,s])=>(m[t]&&m[t](e,s),e))),p="srs:decks.selects";function j({readOnly:e,hasNullOption:t,categoryId:s,subjectId:d,onCategoryChange:o,onSubjectChange:m,...h}){const{i18n:{language:g},t:j}=(0,i.$)("srs"),{data:_}=(0,c.Dk)({language:g}),[y,b]=(0,n.useReducer)(f,{categoryId:s,subjectId:d},u),{categories:x,subjects:v,category:N,subject:k}=y;return(0,n.useEffect)((()=>{b(["nullOptionUpdated",{category:t&&j(`${p}.category.items.none`),subject:t&&j(`${p}.subject.items.none`)}])}),[t,j]),(0,n.useEffect)((()=>{_?.data&&b(["dataReceived",_?.data])}),[_?.data]),(0,n.useEffect)((()=>{b(["categoryChanged",s])}),[s]),(0,n.useEffect)((()=>{b(["subjectChanged",d])}),[d]),x&&v?(0,a.jsxs)(a.Fragment,{children:[x&&(0,a.jsx)(r.Z,{className:(0,l.Z)(h.categoryClassName,"category-select"),name:"categoryId",label:j(`${p}.category.label`),readOnly:e,items:x,selectedItem:N,onChange:o}),v&&(0,a.jsx)(r.Z,{className:(0,l.Z)(h.subjectClassName,"subject-select"),name:"subjectId",label:j(`${p}.subject.label`),readOnly:e,items:v,selectedItem:k,onChange:m})]}):null}}}]);