"use strict";(self.webpackChunkkoloda=self.webpackChunkkoloda||[]).push([[625],{781:(e,t,i)=>{i.d(t,{Y:()=>h});var s=i(6264),r=i(1581),n=i.n(r),a=i(5477),d=i.n(a);const o={app:JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","definitions":{"language":{"$id":"#language","enum":["en","ru"]},"demo_filename":{"$id":"#demo_filename","type":"string"}},"properties":{"languages_get":{"type":"object","properties":{},"required":[],"additionalProperties":false},"demo_clear":{"type":"object","properties":{},"required":[],"additionalProperties":false},"demo_get":{"type":"object","properties":{"language":{"$ref":"#/definitions/language"}},"required":["language"],"additionalProperties":false},"demo_repping_get":{"type":"object","properties":{"language":{"$ref":"#/definitions/language"},"name":{"$ref":"#/definitions/demo_filename"}},"required":["language"],"additionalProperties":false},"demo_deck_get":{"type":"object","properties":{"language":{"$ref":"#/definitions/language"},"name":{"$ref":"#/definitions/demo_filename"}},"required":["language"],"additionalProperties":false}},"type":"object","required":[],"additionalProperties":false}'),auth:JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","definitions":{"uid":{"$id":"#uid","type":"string","format":"uuid"},"login":{"$id":"#login","type":"string","format":"email"},"login_password":{"$id":"#login_password","type":"string","minLength":1},"email":{"$id":"#email","type":"string","format":"email"},"full_name":{"$id":"#full_name","type":"string","pattern":"^\\\\S[\\\\s\\\\S]+$","maxLength":128},"password":{"$id":"#password","type":"string","minLength":8,"maxLength":32,"pattern":"^[\\\\s\\\\S]*$"},"confirm_token":{"$id":"#confirm_token","type":"string","minLength":52,"maxLength":52,"pattern":"^[2346789bdfghjmnpqrtBDFGHJLMNPQRT]+$"},"user_profile":{"$id":"#user_profile","type":"object","properties":{"full_name":{"$ref":"#/definitions/full_name"}},"required":["full_name"],"additionalProperties":false}},"properties":{"login":{"type":"object","properties":{"login":{"$ref":"#/definitions/login"},"password":{"$ref":"#/definitions/login_password"}},"required":["login","password"],"additionalProperties":false},"signup_demo":{"type":"object","properties":{"full_name":{"$ref":"#/definitions/full_name"}},"required":["full_name"],"additionalProperties":false},"signup_email_1":{"type":"object","properties":{"email":{"$ref":"#/definitions/email"}},"required":["email"],"additionalProperties":false},"signup_email_2":{"type":"object","properties":{"confirm_token":{"$ref":"#/definitions/confirm_token"}},"required":["confirm_token"],"additionalProperties":false},"signup_email_3":{"type":"object","properties":{"full_name":{"$ref":"#/definitions/full_name"},"password":{"$ref":"#/definitions/password"},"password_confirmation":{"const":{"$data":"1/password"}},"confirm_token":{"$ref":"#/definitions/confirm_token"}},"required":["full_name","password","password_confirmation","confirm_token"],"additionalProperties":false},"user_get":{"type":"object","properties":{"uid":{"$ref":"#/definitions/uid"}},"required":["uid"],"additionalProperties":false},"user_update":{"type":"object","properties":{"uid":{"$ref":"#/definitions/uid"},"profile":{"$ref":"#/definitions/user_profile"},"settings":{"type":"object"}},"required":["uid"],"additionalProperties":false},"user_profile_get":{"type":"object","properties":{"uid":{"$ref":"#/definitions/uid"}},"required":["uid"],"additionalProperties":false},"user_tutorial_update":{"type":"object","properties":{"uid":{"$ref":"#/definitions/uid"},"tutorial":{"type":"object"}},"required":["uid"],"additionalProperties":false}},"type":"object","required":[],"additionalProperties":false}'),srs:JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","definitions":{"app_language":{"$id":"#app_language","enum":["en","ru"]},"is_eligible":{"$id":"#is_eligible","type":"boolean"},"is_eligible_filter":{"type":"array","items":{"$ref":"#/definitions/is_eligible"}},"repping_id":{"$id":"#repping_id","type":"string","format":"uuid"},"repping_title":{"$id":"#repping_title","type":"string","pattern":"^[\\\\s|\\\\S]*$","minLength":1,"maxLength":128},"repping_description":{"$id":"#repping_description","type":"array"},"repping_divels":{"type":"array","items":{"type":"object","properties":{"id":{"$ref":"#/definitions/divel_id"},"title":{"$ref":"#/definitions/divel_title"},"phases":{"$ref":"#/definitions/divel_phases"},"is_default":{"type":"boolean"}},"required":["id","title"],"additionalProperties":false}},"divel_id":{"$id":"#divel_id","type":"integer","minimum":0},"divel_title":{"$id":"#divel_title","type":"string","pattern":"^[\\\\s|\\\\S]*$","minLength":1,"maxLength":128},"divel_phases":{"$id":"#divel_phases","type":"array","items":{"$ref":"#/definitions/phase"}},"phase":{"$id":"#phase","type":"object","properties":{"id":{"$ref":"#/definitions/phase_id"},"title":{"$ref":"#/definitions/phase_title"},"actions":{"$ref":"#/definitions/phase_actions"},"triggers":{"$ref":"#/definitions/phase_triggers"}},"required":["id","actions","triggers"],"additionalProperties":false},"phase_id":{"$id":"#phase_id","type":"integer","minimum":0},"phase_title":{"$id":"#phase_title","type":"string","pattern":"^[\\\\s|\\\\S]*$","minLength":1,"maxLength":128},"phase_actions":{"$id":"#phase_actions","type":"array","items":{"type":"array","items":[{"enum":[1,2,3],"$comment":"action type"},{"type":"integer","minimum":1,"maximum":99,"$comment":"action times"}],"minItems":2,"maxItems":2}},"phase_triggers":{"$id":"#phase_triggers","type":"object","properties":{"0":{"$ref":"#/definitions/phase_trigger"},"1":{"$ref":"#/definitions/phase_trigger"}},"required":["0","1"],"additionalProperties":false},"phase_trigger":{"$id":"#phase_trigger","type":"object","properties":{"offset":{"type":"array","items":[{"enum":[1,2,3,4,5],"$comment":"offset type"},{"type":"integer","minimum":0,"$comment":"offset value"}],"minItems":2,"maxItems":2},"delay":{"type":"array","items":[{"type":"integer","minimum":0,"maximum":10,"$comment":"years"},{"type":"integer","minimum":0,"maximum":11,"$comment":"months"},{"type":"integer","minimum":0,"maximum":4,"$comment":"weeks"},{"type":"integer","minimum":0,"maximum":30,"$comment":"days"},{"type":"integer","minimum":0,"maximum":23,"$comment":"hours"}],"minItems":5,"maxItems":5}},"required":["offset","delay"],"additionalProperties":false},"deck_id":{"$id":"#deck_id","type":"string","format":"uuid"},"deck_title":{"$id":"#deck_title","type":"string","pattern":"^[\\\\s|\\\\S]*$","minLength":1,"maxLength":128},"deck_description":{"$id":"#deck_description","type":"array"},"deck_category_id":{"$id":"#category_id","type":["integer","null"],"minimum":1},"category_id_filter":{"type":"array","items":{"$ref":"#/definitions/deck_category_id"}},"deck_subject_id":{"$id":"#subject_id","type":["integer","null"],"minimum":1},"subject_id_filter":{"type":"array","items":{"$ref":"#/definitions/deck_subject_id"}},"deck_language_id":{"$id":"#language_id","type":["integer","null"],"minimum":1},"language_id_filter":{"type":"array","items":{"$ref":"#/definitions/deck_language_id"}},"field_id":{"$id":"#field_id","type":"integer","minimum":0},"field_title":{"$id":"#field_title","type":"string","pattern":"^[\\\\s|\\\\S]*$","minLength":1,"maxLength":128},"field_type":{"$id":"#field_type","type":"integer","minimum":0},"field_role":{"$id":"#field_role","type":"integer","minimum":0},"field_settings":{"$id":"#field_settings","type":"object","properties":{"actions":{"type":"object","properties":{"show":{"type":"object","properties":{"is_label_visible":{"type":"boolean"}},"required":[],"additionalProperties":false},"type_test":{"type":"object","properties":{"is_label_visible":{"type":"boolean"},"processings":{"type":"object","properties":{"trim_spaces":{"type":"boolean"},"ignore_case":{"type":"boolean"},"ignore_punctuation":{"type":"boolean"},"ignore_accents":{"type":"boolean"}},"required":[],"additionalProperties":false}},"required":[],"additionalProperties":false}},"required":[],"additionalProperties":false}},"required":[],"additionalProperties":false},"deck_fields":{"$id":"#deck_fields","type":"array","items":{"type":"object","properties":{"id":{"$ref":"#/definitions/field_id"},"title":{"$ref":"#/definitions/field_title"},"type":{"$ref":"#/definitions/field_type"},"role":{"$ref":"#/definitions/field_role"},"settings":{"$ref":"#/definitions/field_settings"}},"required":["id","title","type","role"],"additionalProperties":false}},"card_id":{"$id":"#card_id","type":"integer","minimum":0},"card_content":{"$id":"#card_content","type":"object","propertyNames":{"pattern":"^[1-9][0-9]*"},"patternProperties":{"":{"type":"array","items":{"type":"object","properties":{"text":{"type":"string"}},"additionalProperties":false},"minItems":1,"maxItems":10}}},"card_progress":{"$id":"#card_progress","type":"object","properties":{"is_completed":{"$ref":"#/definitions/result_is_completed"},"due_at":{"$ref":"#/definitions/result_due_at"},"divel":{"$ref":"#/definitions/divel_id"},"phase":{"$ref":"#/definitions/phase_id"}}},"deck_cards":{"$id":"#deck_cards","type":"array","items":{"type":"object","properties":{"id":{"$ref":"#/definitions/card_id"},"content":{"$ref":"#/definitions/card_content"},"progress":{"$ref":"#/definitions/card_progress"}},"required":["id","content"],"additionalProperties":false}},"learning_created_at":{"$id":"#learning_created_at","type":"string","format":"date-time"},"last_learned_at":{"$id":"#last_learned_at","type":"string","format":"date-time"},"lesson_type":{"$id":"#lesson_type","type":"string","enum":["new","rep"]},"lesson_deck_limit":{"$id":"#lesson_deck_limit","type":"integer","minimum":1,"maximum":500},"result_due_at":{"$id":"#result_due_at","type":"string","format":"date-time"},"result_is_completed":{"$id":"#result_is_completed","type":"boolean"},"learning_settings":{"$id":"#learning_settings","type":"object","properties":{"lesson_limits":{"type":"object","properties":{"new":{"$ref":"#/definitions/lesson_deck_limit"},"rep":{"$ref":"#/definitions/lesson_deck_limit"}}}}}},"properties":{"subjects_get":{"type":"object","properties":{"language":{"$ref":"#/definitions/app_language"}},"required":["language"],"additionalProperties":false},"languages_get":{"type":"object","properties":{"language":{"$ref":"#/definitions/app_language"}},"required":["language"],"additionalProperties":false},"reppings_get":{"type":"object","properties":{"sort":{"enum":["+title","-title","+created_at","-created_at","+updated_at","-updated_at"]},"filters":{"type":"object","properties":{"is_eligible":{"$ref":"#/definitions/is_eligible_filter"}},"additionalProperties":false},"limit":{"type":"integer","minimum":0,"maximum":200},"offset":{"type":"integer","minimum":1}},"required":[],"additionalProperties":false},"repping_import":{"type":"object","properties":{"title":{"$ref":"#/definitions/repping_title"},"description":{"$ref":"#/definitions/repping_description"},"divels":{"$ref":"#/definitions/repping_divels"}},"required":["title"],"additionalProperties":false},"repping_export":{"type":"object","properties":{"id":{"$ref":"#/definitions/repping_id"}},"required":["id"],"additionalProperties":false},"repping_add":{"type":"object","properties":{"title":{"$ref":"#/definitions/repping_title"}},"required":["title"],"additionalProperties":false},"repping_get":{"type":"object","properties":{"id":{"$ref":"#/definitions/repping_id"}},"required":["id"],"additionalProperties":false},"repping_update":{"type":"object","properties":{"id":{"$ref":"#/definitions/repping_id"},"title":{"$ref":"#/definitions/repping_title"},"description":{"$ref":"#/definitions/repping_description"}},"required":["id","title"],"additionalProperties":false},"repping_delete":{"type":"object","properties":{"id":{"$ref":"#/definitions/repping_id"}},"required":["id"],"additionalProperties":false},"divels_update":{"type":"object","properties":{"repping_id":{"$ref":"#/definitions/repping_id"},"divels":{"$ref":"#/definitions/repping_divels"}},"required":["repping_id"],"additionalProperties":false},"divel_get":{"type":"object","properties":{"repping_id":{"$ref":"#/definitions/repping_id"},"id":{"$ref":"#/definitions/divel_id"}},"required":["repping_id","id"],"additionalProperties":false},"divel_update":{"type":"object","properties":{"repping_id":{"$ref":"#/definitions/repping_id"},"id":{"$ref":"#/definitions/divel_id"},"title":{"$ref":"#/definitions/divel_title"},"phases":{"$ref":"#/definitions/divel_phases"}},"required":["repping_id","id"],"additionalProperties":false},"decks_get":{"type":"object","properties":{"sort":{"enum":["+title","-title","+created_at","-created_at","+updated_at","-updated_at"]},"limit":{"type":"integer","minimum":1,"maximum":200},"offset":{"type":"integer","minimum":1},"filters":{"type":"object","properties":{"category_id":{"$ref":"#/definitions/category_id_filter"},"subject_id":{"$ref":"#/definitions/subject_id_filter"},"language_id":{"$ref":"#/definitions/language_id_filter"},"is_eligible":{"$ref":"#/definitions/is_eligible_filter"}},"required":[],"additionalProperties":false}},"required":[],"additionalProperties":false},"deck_import":{"type":"object","properties":{"title":{"$ref":"#/definitions/deck_title"},"description":{"$ref":"#/definitions/deck_description"},"category_id":{"$ref":"#/definitions/deck_category_id"},"subject_id":{"$ref":"#/definitions/deck_subject_id"},"language_id":{"$ref":"#/definitions/deck_language_id"},"fields":{"$ref":"#/definitions/deck_fields"},"cards":{"$ref":"#/definitions/deck_cards"},"repping_id":{"$ref":"#/definitions/repping_id"}},"required":["title","category_id","subject_id","language_id","fields","cards"],"additionalProperties":false},"deck_export":{"type":"object","properties":{"id":{"$ref":"#/definitions/deck_id"}},"required":["id"],"additionalProperties":false},"deck_add":{"type":"object","properties":{"title":{"$ref":"#/definitions/deck_title"}},"required":["title"],"additionalProperties":false},"deck_get":{"type":"object","properties":{"id":{"$ref":"#/definitions/deck_id"}},"required":["id"],"additionalProperties":false},"deck_update":{"type":"object","properties":{"id":{"$ref":"#/definitions/deck_id"},"title":{"$ref":"#/definitions/deck_title"},"description":{"$ref":"#/definitions/deck_description"},"category_id":{"$ref":"#/definitions/deck_category_id"},"subject_id":{"$ref":"#/definitions/deck_subject_id"},"language_id":{"$ref":"#/definitions/deck_language_id"}},"required":["id","title"],"additionalProperties":false},"deck_delete":{"type":"object","properties":{"id":{"$ref":"#/definitions/deck_id"}},"required":["id"],"additionalProperties":false},"fields_get":{"type":"object","properties":{"deck_id":{"$ref":"#/definitions/deck_id"}},"required":["deck_id"],"additionalProperties":false},"fields_set":{"type":"object","properties":{"deck_id":{"$ref":"#/definitions/deck_id"},"fields":{"$ref":"#/definitions/deck_fields"}},"required":["deck_id","fields"],"additionalProperties":false},"cards_get":{"type":"object","properties":{"deck_id":{"$ref":"#/definitions/deck_id"}},"required":["deck_id"],"additionalProperties":false},"cards_set":{"type":"object","properties":{"deck_id":{"$ref":"#/definitions/deck_id"},"cards":{"$ref":"#/definitions/deck_cards"}},"required":["deck_id","cards"],"additionalProperties":false},"learnings_get":{"type":"object","properties":{"sort":{"enum":["+title","-title","+last_learned_at","-last_learned_at"]},"filters":{"type":"object","properties":{"category_id":{"$ref":"#/definitions/category_id_filter"},"subject_id":{"$ref":"#/definitions/subject_id_filter"},"language_id":{"$ref":"#/definitions/language_id_filter"}},"required":[],"additionalProperties":false},"limit":{"type":"integer","minimum":0,"maximum":200},"offset":{"type":"integer","minimum":1}},"required":[],"additionalProperties":false},"learning_add":{"type":"object","properties":{"deck_id":{"$ref":"#/definitions/deck_id"},"repping_id":{"$ref":"#/definitions/repping_id"}},"required":["deck_id"],"additionalProperties":false},"learning_get":{"type":"object","properties":{"deck_id":{"$ref":"#/definitions/deck_id"}},"required":["deck_id"],"additionalProperties":false},"learning_update":{"type":"object","properties":{"deck_id":{"$ref":"#/definitions/deck_id"},"settings":{"$ref":"#/definitions/learning_settings"}},"required":["deck_id","settings"],"additionalProperties":false},"learning_delete":{"type":"object","properties":{"deck_id":{"$ref":"#/definitions/deck_id"}},"required":["deck_id"],"additionalProperties":false},"learnings_meta_get":{"enum":[{}]},"lesson_get":{"type":"object","properties":{"type":{"$ref":"#/definitions/lesson_type"},"limit":{"$ref":"#/definitions/lesson_deck_limit"},"deck":{"$ref":"#/definitions/deck_id"}},"required":["type"],"additionalProperties":false},"lesson_deck_get":{"type":"object","properties":{"type":{"$ref":"#/definitions/lesson_type"},"limit":{"$ref":"#/definitions/lesson_deck_limit"},"id":{"$ref":"#/definitions/deck_id"}},"required":["type","id"],"additionalProperties":false},"lesson_repping_get":{"type":"object","properties":{"id":{"$ref":"#/definitions/repping_id"}},"required":["id"],"additionalProperties":false},"lesson_results_set":{"type":"object","properties":{"data":{"type":"array","items":{"type":"object","properties":{"deck_id":{"$ref":"#/definitions/deck_id"},"cards":{"type":"array","items":{"type":"object","properties":{"card_id":{"$ref":"#/definitions/card_id"},"divel":{"$ref":"#/definitions/divel_id"},"phase":{"$ref":"#/definitions/phase_id"},"due_at":{"$ref":"#/definitions/result_due_at"},"is_completed":{"$ref":"#/definitions/result_is_completed"}},"required":["card_id","due_at"],"additionalProperties":false}}},"required":["deck_id","cards"],"additionalProperties":false}}},"required":["data"],"additionalProperties":false}},"type":"object","required":[],"additionalProperties":false}')},l={allErrors:!0,verbose:!0,removeAdditional:!0,coerceTypes:!0,$data:!0};var c=i(9208),u=i.n(c),p=i(1468),m=i.n(p),g=i(3802);class f extends g.Z{constructor(e,t,i={}){super(e,t,i)}}function _(e,t,i){return new Promise(((s,r)=>{try{const[a,c,u]=function(e,t,i){const s=new(n())(l);d()(s);const r=s.compile(e),a={[t]:i},o=r(a);return[o,r.errors,a[t]]}(o[e],t,i);a?s(u):r(new f(e,`validation.${t}`,{meta:{errors:y(c)}}))}catch(e){r(new g.Z("app","validation.schema.invalid",{message:e.message}))}}))}function y(e){return e&&e.reduce(((e,t)=>{const[,...i]=t.instancePath.split("/");"required"===t.keyword&&i.push(t.params.missingProperty);const s=u()(e,i)||[];return s.push(t.keyword),m()(e,i,s),e}),{})}var k=i(6544);async function h(e,t,i,r,n={}){return n.validationOnly?_(e,t,(0,s.decamelizeKeys)(r)):async function(e,t,i,r,n={}){return _(e,t,(0,s.decamelizeKeys)(r)).then((i=>{const r=n.isDemo?(0,s.camelizeKeys)(i):i;return(0,k.WY)(e,t,r,n)})).then((s=>{if(i.includes(s.status))return s;throw new k.Lu(e,`request.${t}`,{status:s.status,meta:{responseObject:s}})}))}(e,t,i,r,n).then((e=>e.ok?e.json():{})).then(s.camelizeKeys)}},6544:(e,t,i)=>{i.d(t,{Lu:()=>K,IV:()=>O,U2:()=>M,v_:()=>z,gz:()=>R,qs:()=>Q,WY:()=>W});const s={languages_get:(e,t={})=>M("https://ogorodnikov-stepan.github.io/koloda/locales/languages.json",t)};var r=i(9520);class n extends r.ZP{users;reppings;decks;cards;constructor(){super("appDB"),this.version(3).stores({users:"uid",reppings:"id, title, createdAt, updatedAt",decks:"id, title, createdAt, updatedAt, lastLearnedAt, categoryId, subjectId, languageId",cards:"pk, id, deckId"})}}const a=new n,d="https://ogorodnikov-stepan.github.io/koloda/locales";const o={languages_get:(e,t={})=>M(`${d}/languages.json`,t),demo_clear:async function(){return await Promise.all([a.users.clear(),a.reppings.clear(),a.decks.clear(),a.cards.clear()]),Promise.resolve({ok:!0,status:200,json:()=>({})})},demo_get:({language:e},t={})=>M(`${d}/${e}/demo/demo.json`,t),demo_repping_get:({language:e,name:t},i={})=>M(`${d}/${e}/demo/reppings/${t}.json`,i),demo_deck_get:({language:e,name:t},i={})=>M(`${d}/${e}/demo/decks/${t}.json`,i)},l="http://localhost/api/auth",c={login:(e,t={})=>z(`${l}/login`,e,t),user_profile_get:(e,t)=>M(`${l}/users/${e.uid}/profile`,t)};var u=i(8721),p=i(2378),m=i.n(p),g=i(2552),f=i(506);const _={login:async function(e){return Promise.resolve(e)},signup_demo:async function({fullName:e}){const t=(0,g.o)(new Date),i={...f.ib,uid:(0,u.Z)(),profile:{fullName:e},createdAt:t},s=await a.users.add(i);return Promise.resolve({ok:!0,status:201,json:()=>({id:s})})},user_get:async function({uid:e}){const t=await a.users.get(e);return t?Promise.resolve({ok:!0,status:200,json:()=>({data:t})}):Promise.resolve({ok:!1,status:404})},user_update:async function({uid:e,...t}){const i=await a.users.get(e);if(!i)return Promise.resolve({ok:!1,status:404});const s=(0,g.o)(new Date);return await a.users.update(e,{...t,updatedAt:s}),Promise.resolve({ok:!0,status:200,json:()=>({...i,...t,updatedAt:s})})},user_profile_get:async function({uid:e}){const t=await a.users.get(e);return t?Promise.resolve({ok:!0,status:200,json:()=>({data:t.profile})}):Promise.resolve({ok:!1,status:404})},user_tutorial_update:async function({uid:e,tutorial:t}){const i=await a.users.get(e);if(!i)return Promise.resolve({ok:!1,status:404});const s={tutorial:m()(i.tutorial,t)};return await a.users.update(e,s),Promise.resolve({ok:!0,status:200,json:()=>({data:s})})}},y="http://localhost/api/srs",k="https://ogorodnikov-stepan.github.io/koloda/locales",h={subjects_get:(e,t={})=>M(`${k}/${e.language}/srs-subjects.json`,t),languages_get:(e,t={})=>M(`${k}/${e.language}/srs-languages.json`,t),reppings_get:(e,t={})=>M(`${y}/reppings`,t),repping_add:(e,t={})=>z(`${y}/reppings`,e,t),repping_get:(e,t={})=>M(`${y}/reppings/${e.id}`,t),repping_update:(e,t={})=>R(`${y}/reppings/${e.id}`,e,t),repping_delete:(e,t={})=>O(`${y}/reppings/${e.id}`,t),divels_update:(e,t={})=>R(`${y}/reppings/${e.repping_id}/divels`,e,t),divel_get:(e,t={})=>M(`${y}/reppings/${e.repping_id}/divels/${e.id}`,t),divel_update:(e,t={})=>R(`${y}/reppings/${e.repping_id}/divels/${e.id}`,e,t),decks_get:(e,t={})=>M(`${y}/decks`,t),deck_add:(e,t={})=>z(`${y}/decks`,e,t),deck_get:(e,t={})=>M(`${y}/decks/${e.id}`,t),deck_update:(e,t={})=>R(`${y}/decks/${e.id}`,e,t),deck_delete:(e,t={})=>O(`${y}/decks/${e.id}`,t),fields_get:(e,t={})=>M(`${y}/decks/${e.deck_id}/fields`,t),fields_set:(e,t={})=>R(`${y}/decks/${e.deck_id}/fields`,e,t),cards_get:(e,t={})=>M(`${y}/decks/${e.deck_id}/cards`,t),cards_set:(e,t={})=>R(`${y}/decks/${e.deck_id}/cards`,e,t),learnings_get:(e,t={})=>M(`${y}/learnings${Q(e)}`,t),learning_add:(e,t={})=>z(`${y}/learnings`,e,t),learning_get:(e,t={})=>M(`${y}/learnings/${e.deck_id}`,t),learning_update:(e,t={})=>R(`${y}/learnings/${e.deck_id}`,e,t),learning_delete:(e,t={})=>O(`${y}/learnings/${e.deck_id}`,t),lesson_get:(e,t={})=>M(`${y}/lessons/${e.type}${Q(e,["deck_id","limit"])}`,t),lesson_deck_get:(e,t={})=>M(`${y}/lessons/${e.type}/decks/${e.id}${Q(e,["limit"])}`,t),lesson_repping_get:(e,t={})=>M(`${y}/reppings/${e.id}`,t),lesson_results_set:(e,t={})=>R(`${y}/results`,e,t)};var $=i(5030),j=i.n($),b=i(2644),v=i(6264),x=i(6347);async function P(e,t){const{sort:i,filters:s,limit:r,offset:n}=t,a="-"===i?.charAt(0),d=i?await e.orderBy((0,v.camelize)(i?.substring(1))):e,o=a?await d.reverse():d,l=s?await o.filter((e=>function(e,t){return Object.keys(t).reduce(((i,s)=>!!i&&(Array.isArray(t[s])?t[s].includes(e[s]):t[s]===e[s])),!0)}(e,s))):o,c=r?await l.offset((0,x.e$)(n)).limit(r):l,u=await c.toArray(),p=!!r&&u.length>r;p&&u.pop();return{data:u,meta:{pagination:{has_more:p,nextOffset:p?r+n:void 0}}}}var w=i(7474),N=i(429),I=i(9589),Z=i(8651);function q(e){const t=e?.fieldsTotal>0,i=e?.cardsTotal>0;return{isEligible:t&&i,requirements:{fields:t,cards:i}}}var D=i(1700);const A="https://ogorodnikov-stepan.github.io/koloda/locales";async function L({deckId:e,cards:t}){const i=t.map(((t,i)=>({...t,pk:`${e}/${t.id}`,deckId:e,index:i})));await a.cards.where({deckId:e}).delete(),await a.cards.bulkAdd(i);const s=await a.decks.get(e);if(!s)return Promise.resolve({ok:!1,status:404});const r=t.length,{isEligible:n,requirements:d}=q({...s,cardsTotal:r}),o=(0,g.o)(new Date);return await a.decks.update(e,{isEligible:n,requirements:d,cardsTotal:r,updatedAt:o}),Promise.resolve({ok:!0,status:200,json:()=>({...s,isEligible:n,requirements:d,cardsTotal:r,updatedAt:o})})}function E(e){return!!(e?.isEligible&&e?.isLearning&&e?.reppingId)}const S={backend:{app:s,auth:c,srs:h},storage:{app:o,auth:_,srs:{subjects_get:(e,t={})=>M(`${A}/${e.language}/srs-subjects.json`,t),languages_get:(e,t={})=>M(`${A}/${e.language}/srs-languages.json`,t),reppings_get:async function(e){const{data:t,meta:i}=await P(a.reppings,e);return Promise.resolve({ok:!0,status:200,json:()=>({data:t,meta:i})})},repping_import:async function(e){const t=(0,g.o)(new Date),i=t,s={...w.w4,id:(0,u.Z)(),createdAt:t,updatedAt:i,...e},{isEligible:r,requirements:n}=(0,Z.P)(s),d=await a.reppings.add({...s,isEligible:r,requirements:n});return Promise.resolve({ok:!0,status:201,json:()=>({data:{id:d}})})},repping_export:async function({id:e}){const t=await a.reppings.get(e);if(!t)return Promise.resolve({ok:!1,status:404});const i=["title","description","divels"];return Promise.resolve({ok:!0,status:200,json:()=>j()(t,i)})},repping_add:async function(e){const t=(0,g.o)(new Date),i=t,s={...w.w4,id:(0,u.Z)(),createdAt:t,updatedAt:i,...e},r=await a.reppings.add(s);return Promise.resolve({ok:!0,status:201,json:()=>({data:{id:r}})})},repping_get:async function({id:e}){const t=await a.reppings.get(e);return Promise.resolve(t?{ok:!0,status:200,json:()=>({data:t})}:{ok:!1,status:404})},repping_update:async function({id:e,...t}){const i=await a.reppings.get(e);if(!i)return Promise.resolve({ok:!1,status:404});const{isEligible:s,requirements:r}=(0,Z.P)(i),n=(0,g.o)(new Date);return await a.reppings.update(e,{...t,isEligible:s,requirements:r,updatedAt:n}),Promise.resolve({ok:!0,status:200,json:()=>({...i,...t,isEligible:s,updatedAt:n})})},repping_delete:async function({id:e}){return await a.reppings.get(e)?(await a.reppings.delete(e),Promise.resolve({ok:!0,status:204,json:()=>{}})):Promise.resolve({ok:!1,status:404})},divels_update:async function({reppingId:e,divels:t}){const i=await a.reppings.get(e);if(!i)return Promise.resolve({ok:!1,status:404});const s=t.map((e=>{const t=e.phases||i.divels.find((t=>t.id===e.id))?.phases||[];return{...e,phases:t}})),{isEligible:r,requirements:n}=(0,Z.P)({...i,divels:s}),d=(0,g.o)(new Date);return await a.reppings.update(e,{divels:s,isEligible:r,requirements:n,updatedAt:d}),Promise.resolve({ok:!0,status:200,json:()=>({...i,divels:s,isEligible:r,requirements:n,updatedAt:d})})},divel_get:async function({reppingId:e,id:t}){const i=await a.reppings.get(e),s=i?.divels.find((e=>e.id===t));return Promise.resolve(s?{ok:!0,status:200,json:()=>({data:s})}:{ok:!1,status:404})},divel_update:async function({reppingId:e,id:t,...i}){const s=await a.reppings.get(e);if(!s)return Promise.resolve({ok:!1,status:404});if(!s.divels.find((e=>e.id===t)))return Promise.resolve({ok:!1,status:404});const r=s.divels.map((e=>e.id===t?{...e,...i}:e)),{isEligible:n,requirements:d}=(0,Z.P)({...s,divels:r}),o=(0,g.o)(new Date);return await a.reppings.update(e,{divels:r,isEligible:n,requirements:d,updatedAt:o}),Promise.resolve({ok:!0,status:204,json:()=>{}})},decks_get:async function(e){const{data:t,meta:i}=await P(a.decks,e);return Promise.resolve({ok:!0,status:200,json:()=>({data:t,meta:i})})},deck_import:async function(e){const t=(0,g.o)(new Date),i=t,s=t,r=t,n=e.reppingId?{startedAt:s,lastLearnedAt:r,isLearning:!0,settings:D.Y}:{},d=e.fields.length,o=e.cards.length,l={...N.GH,id:(0,u.Z)(),createdAt:t,updatedAt:i,fieldsTotal:d,cardsTotal:o,...n,...e},{isEligible:c,requirements:p}=q(l),m=await a.decks.add({...l,isEligible:c,requirements:p});return await L({deckId:m,cards:e.cards}),Promise.resolve({ok:!0,status:201,json:()=>({data:{id:m}})})},deck_export:async function({id:e}){const t=await a.decks.get(e);if(!t)return Promise.resolve({ok:!1,status:404});const i=await a.cards.where({deckId:e}).sortBy("index");t.cards=i.map((e=>j()(e,["id","content"])));const s=["title","description","categoryId","subjectId","languageId","fields","cards"];return Promise.resolve({ok:!0,status:200,json:()=>j()(t,s)})},deck_add:async function(e){const t=(0,g.o)(new Date),i=t,s={...N.GH,id:(0,u.Z)(),createdAt:t,updatedAt:i,...e},r=await a.decks.add(s);return Promise.resolve({ok:!0,status:201,json:()=>({data:{id:r}})})},deck_get:async function({id:e}){const t=await a.decks.get(e);if(!t)return Promise.resolve({ok:!1,status:404});const{learning:i,...s}=t;return Promise.resolve({ok:!0,status:200,json:()=>({data:s})})},deck_update:async function({id:e,...t}){const i=await a.decks.get(e);if(!i)return Promise.resolve({ok:!1,status:404});const{isEligible:s,requirements:r}=q(i),n=(0,g.o)(new Date);return await a.decks.update(e,{...t,isEligible:s,requirements:r,updatedAt:n}),Promise.resolve({ok:!0,status:200,json:()=>({...i,...t,isEligible:s,requirements:r,updatedAt:n})})},deck_delete:async function({id:e}){return await a.decks.get(e)?(await a.decks.delete(e),await a.cards.where({deckId:e}).delete(),Promise.resolve({ok:!0,status:204,json:()=>{}})):Promise.resolve({ok:!1,status:404})},fields_get:async function({deckId:e}){const t=await a.decks.get(e);return t?Promise.resolve({ok:!0,status:200,json:()=>({data:t.fields})}):Promise.resolve({ok:!1,status:404})},fields_set:async function({deckId:e,fields:t}){await a.decks.update(e,{fields:t});const i=await a.decks.get(e);if(!i)return Promise.resolve({ok:!1,status:404});const s=t.length,{isEligible:r,requirements:n}=q({...i,fieldsTotal:s}),d=(0,g.o)(new Date);return await a.decks.update(e,{isEligible:r,requirements:n,fieldsTotal:s,updatedAt:d}),Promise.resolve({ok:!0,status:200,json:()=>({...i,isEligible:r,requirements:n,fieldsTotal:s,updatedAt:d})})},cards_get:async function({deckId:e}){const t=await a.cards.where({deckId:e}).sortBy("index");return Promise.resolve({ok:!0,status:200,json:()=>({data:t})})},cards_set:L,learnings_get:async function(e){const t={...e.filters,isEligible:[!0],isLearning:[!0]},{data:i,meta:s}=await P(a.decks,{...e,filters:t}),r=await Promise.all(i.map((async e=>{const t=await a.cards.where({deckId:e.id}).filter((({progress:e})=>!e?.dueAt&&!e?.isCompleted)).count(),i=await a.cards.where({deckId:e.id}).filter((({progress:e})=>!!e?.dueAt&&!(0,b.Z)(new Date(e.dueAt))&&!e?.isCompleted)).count();return{id:e.id,title:e.title,initial:t,learning:i}})));return Promise.resolve({ok:!0,status:200,json:()=>({data:r,meta:s})})},learning_add:async function({deckId:e,reppingId:t,...i}){const s=await a.decks.get(e);if(!s)return Promise.resolve({ok:!1,status:404});if(!s.isEligible||s.reppingId)return Promise.resolve({ok:!1,status:409});const r=await a.reppings.get(t);if(!r)return Promise.resolve({ok:!1,status:404});const n=(0,g.o)(new Date),d=(0,g.o)(new Date),o=D.Y,l={...i,isLearning:!0,reppingId:t,settings:o,startedAt:n,lastLearnedAt:d};return await a.decks.update(e,l),Promise.resolve({ok:!0,status:200,json:()=>({deckId:e,repping:r,settings:o,startedAt:n,lastLearnedAt:d})})},learning_get:async function({deckId:e}){const t=await a.decks.get(e);if(!t?.reppingId)return Promise.resolve({ok:!1,status:404});const{settings:i,reppingId:s,startedAt:r,lastLearnedAt:n}=t,d=await a.reppings.get(s);if(!d)return Promise.resolve({ok:!1,status:404});const o={deckId:e,repping:d,settings:i,startedAt:r,lastLearnedAt:n};return Promise.resolve({ok:!0,status:200,json:()=>({data:o})})},learning_update:async function({deckId:e,...t}){return await a.decks.get(e)?(await a.decks.update(e,{...t}),Promise.resolve({ok:!0,status:200,json:()=>({})})):Promise.resolve({ok:!1,status:404})},learning_delete:async function({deckId:e}){const t=await a.decks.get(e);if(!t?.reppingId)return Promise.resolve({ok:!1,status:404});return await a.decks.update(e,{isLearning:!1,reppingId:null,settings:null,startedAt:null,lastLearnedAt:null}),Promise.resolve({ok:!0,status:204,json:()=>({})})},lesson_get:async function(e){const{deck:t}=e;if(t){const e=await a.decks.get(t);if(!E(e))return Promise.resolve({ok:!1,status:404});const i=[{deckId:t,title:e?.title,reppingId:e?.reppingId,settings:e?.settings}];return Promise.resolve({ok:!0,status:200,json:()=>({data:i})})}return Promise.resolve({ok:!1,status:404})},lesson_deck_get:async function(e){const{type:t,id:i,limit:s}=e,r=await a.decks.get(i);if(!r||!E(r))return Promise.resolve({ok:!1,status:404});const n=r.settings.lessonLimits[t];let d;t===I.Yw&&(d=await a.cards.where({deckId:r?.id}).filter((({progress:e})=>!e?.dueAt&&!e?.isCompleted)).limit(s||n).toArray());t===I.uT&&(d=await a.cards.where({deckId:r?.id}).filter((({progress:e})=>!!e?.dueAt&&new Date(e.dueAt)<new Date&&!e?.isCompleted)).limit(s||n).toArray());const o={...r,cards:d};return Promise.resolve({ok:!0,status:200,json:()=>({data:o})})},lesson_repping_get:async function({id:e}){const t=await a.reppings.get(e);return Promise.resolve(t?{ok:!0,status:200,json:()=>({data:t})}:{ok:!1,status:404})},lesson_results_set:async function({data:e}){return e.forEach((({deckId:e,cards:t})=>{t.forEach((async({cardId:t,...i})=>{await a.cards.update(`${e}/${t}`,{progress:i}),await a.decks.update(e,{lastLearnedAt:(0,g.o)(new Date)})}))})),e?Promise.resolve({ok:!0,status:204,json:()=>({})}):Promise.resolve({ok:!0,status:409,json:()=>({})})}}}},C={headers:()=>{const e=sessionStorage.getItem(f.B1)||localStorage.getItem(f.B1);return{"content-type":"application/json",authorization:e?`Bearer ${e}`:void 0}}};var Y=i(3802);function T(e,t,i={}){const{body:s=null,headers:r={},...n}=i,a={method:e,headers:{...C.headers(),...r},body:s?JSON.stringify(s):void 0,...n};return window.fetch(t,a)}function M(e,t){return T("get",e,t)}function z(e,t,i){return T("post",e,{body:t,...i})}function R(e,t,i){return T("put",e,{body:t,...i})}function O(e,t){return T("delete",e,{...t})}function W(e,t,i,s){const r=s.isDemo?S.storage:S.backend;if("function"==typeof r[e][t])return r[e][t](i,s).catch((e=>{throw new Y.Z("app","request.fetch",{meta:{errorObject:e}})}));throw new Y.Z("app","request.misssing",{meta:{domain:e,operation:t}})}function Q(e,t){if("object"!=typeof e||!e)return"";const i=Array.isArray(t)?t.reduce(((t,i)=>i in e?{...t,[i]:e[i]}:t),{}):e,s=new URLSearchParams(i).toString();return s?`?${s}`:""}class K extends Y.Z{constructor(e,t,i={}){super(e,t,i)}}},5625:(e,t,i)=>{i.r(t),i.d(t,{default:()=>le});var s=i(5893),r=i(7294),n=i(5933),a=i.n(n),d=i(4232),o=i(6228),l=i(530),c=i(7443),u=i(5977),p=i(5989),m=i(7723),g=i(6829);const f=(0,r.lazy)((()=>Promise.all([i.e(465),i.e(849),i.e(479),i.e(1)]).then(i.bind(i,9001)))),_=(0,r.lazy)((()=>Promise.all([i.e(465),i.e(849),i.e(561),i.e(469)]).then(i.bind(i,1469)))),y=(0,r.lazy)((()=>Promise.all([i.e(465),i.e(849),i.e(479),i.e(953)]).then(i.bind(i,7953)))),k=(0,r.lazy)((()=>Promise.all([i.e(465),i.e(849),i.e(298)]).then(i.bind(i,5298)))),h=(0,r.lazy)((()=>Promise.all([i.e(465),i.e(992),i.e(925),i.e(849),i.e(561),i.e(973),i.e(602)]).then(i.bind(i,9602)))),$=(0,r.lazy)((()=>Promise.all([i.e(465),i.e(849),i.e(920)]).then(i.bind(i,6920)))),j=(0,r.lazy)((()=>Promise.all([i.e(465),i.e(992),i.e(849),i.e(973),i.e(196)]).then(i.bind(i,3975)))),b=(0,r.lazy)((()=>Promise.all([i.e(465),i.e(849),i.e(561),i.e(846)]).then(i.bind(i,1846)))),v=(0,r.lazy)((()=>Promise.all([i.e(465),i.e(849),i.e(997)]).then(i.bind(i,5997)))),x=!0;function P(e){return(0,s.jsxs)(u.rs,{location:e.location,children:[(0,s.jsx)(u.AW,{path:g.Z.home({}),exact:!0,children:(0,s.jsx)(r.Suspense,{fallback:null,children:(0,s.jsx)(f,{})})}),(0,s.jsx)(u.AW,{path:g.Z.home({isDemo:x}),exact:!0,children:(0,s.jsx)(r.Suspense,{fallback:null,children:(0,s.jsx)(f,{isDemo:!0})})}),(0,s.jsx)(u.AW,{path:g.Z.account({}),exact:!0,children:(0,s.jsx)(r.Suspense,{fallback:null,children:(0,s.jsx)(_,{})})}),(0,s.jsx)(u.AW,{path:g.Z.account({isDemo:x}),exact:!0,children:(0,s.jsx)(r.Suspense,{fallback:null,children:(0,s.jsx)(_,{isDemo:!0})})}),(0,s.jsx)(u.AW,{path:g.Z.dashboard({isDemo:x}),exact:!0,children:(0,s.jsx)(r.Suspense,{fallback:null,children:(0,s.jsx)(y,{isDemo:!0})})}),(0,s.jsx)(u.AW,{path:g.Z.divel({reppingId:":reppingId",id:":id",isDemo:x}),children:(0,s.jsx)(r.Suspense,{fallback:null,children:(0,s.jsx)(b,{isDemo:!0})})}),(0,s.jsx)(u.AW,{path:g.Z.repping({id:":id",isDemo:x}),children:(0,s.jsx)(r.Suspense,{fallback:null,children:(0,s.jsx)(j,{isDemo:!0})})}),(0,s.jsx)(u.AW,{path:g.Z.reppings({isDemo:x}),children:(0,s.jsx)(r.Suspense,{fallback:null,children:(0,s.jsx)($,{isDemo:!0})})}),(0,s.jsx)(u.AW,{path:g.Z.deck({id:":id",isDemo:x}),children:(0,s.jsx)(r.Suspense,{fallback:null,children:(0,s.jsx)(h,{isDemo:!0})})}),(0,s.jsx)(u.AW,{path:g.Z.decks({isDemo:x}),children:(0,s.jsx)(r.Suspense,{fallback:null,children:(0,s.jsx)(k,{isDemo:!0})})}),(0,s.jsx)(u.AW,{path:g.Z.lesson({type:":type",isDemo:x}),children:(0,s.jsx)(r.Suspense,{fallback:null,children:(0,s.jsx)(v,{isDemo:!0})})}),(0,s.jsx)(u.AW,{path:g.Z.divel({reppingId:":reppingId",id:":id"}),children:(0,s.jsx)(r.Suspense,{fallback:null,children:(0,s.jsx)(b,{})})}),(0,s.jsx)(u.AW,{path:g.Z.repping({id:":id"}),children:(0,s.jsx)(r.Suspense,{fallback:null,children:(0,s.jsx)(j,{})})}),(0,s.jsx)(u.AW,{path:g.Z.reppings({}),children:(0,s.jsx)(r.Suspense,{fallback:null,children:(0,s.jsx)($,{})})}),(0,s.jsx)(u.AW,{path:g.Z.deck({id:":id"}),children:(0,s.jsx)(r.Suspense,{fallback:null,children:(0,s.jsx)(h,{})})}),(0,s.jsx)(u.AW,{path:g.Z.decks({}),children:(0,s.jsx)(r.Suspense,{fallback:null,children:(0,s.jsx)(k,{})})})]})}var w=i(2327),N=i(4627);const I=[500,502];function Z({status:e}){const{t}=(0,w.$)("app");return(0,s.jsx)(N.Z,{className:`error status-${e}`,children:(0,s.jsx)("p",{children:t(I.includes(e)?`pages.error.${e}`:"pages.error.unknown")})})}const q=200;function D(){const e=(0,u.TH)(),t=(0,o.oR)(o.zr),{isError:i,error:r}=(0,d.rk)({isDemo:t});return i&&r?.status?(0,s.jsx)(Z,{status:r.status}):(0,s.jsx)(p.Z,{mode:"out-in",children:(0,s.jsx)(m.Z,{classNames:"route-transition",timeout:q,children:(0,s.jsx)(P,{location:e})},e.pathname)})}var A=i(3727),L=i(7325),E=i(6941);function S({name:e,items:t}){const{t:i}=(0,w.$)("app"),{pathname:n}=(0,u.TH)(),[a,d]=(0,r.useState)(!1),o=(0,r.useCallback)((()=>{d((e=>!e))}),[]);return(0,r.useEffect)((()=>{a&&o()}),[n]),t?.length?(0,s.jsxs)("nav",{className:`${e} menu`,"data-menu-name":e,children:[(0,s.jsx)("div",{className:`${e}__overlay menu__overlay`,"data-is-open":a,onClick:o,"aria-hidden":"true"}),(0,s.jsx)(L.Z,{className:`${e}__toggle menu__toggle`,"data-is-open":a,onClick:o,content:""}),(0,s.jsx)("ul",{className:`${e}__items menu__items`,"data-is-open":a,children:t.map((t=>(0,s.jsxs)("li",{className:`${e}__item menu__item`,children:[t.url&&(0,s.jsx)(A.OL,{className:`${e}__item-link menu__item-link`,to:t.url,activeClassName:"active",exact:!0,children:i(t.t)}),t.dropdown&&(0,s.jsx)(E.Z,{link:i(t.t),children:(0,s.jsx)(t.dropdown,{})}),t.component&&(0,s.jsx)(t.component,{})]},t.t)))})]}):null}var C=i(6333),Y=i(5443),T=i(5619),M=i(7139);const z="srs:decks.add",R="deck_add";function O(){const{t:e}=(0,w.$)("srs"),{push:t}=(0,u.k6)(),i=(0,o.oR)(o.zr),[n,a]=(0,r.useState)({title:""}),{isLoading:d,error:l,mutate:c}=(0,T.U)({isDemo:i}),p=(0,r.useCallback)((({target:{name:e,value:t}})=>{a((i=>({...i,[e]:t})))}),[a]),m=(0,r.useCallback)((()=>{c(n,{onSuccess:e=>{t(g.Z.deck({isDemo:i,id:e.data.id}))}})}),[n,i]);return(0,s.jsxs)("form",{className:"add-deck",children:[(0,s.jsx)(M.Z,{className:"add-repping__title",name:"title",label:e(`${z}.properties.title.label`),placeholder:e(`${z}.properties.title.placeholder`),isError:!!l?.meta?.errors?.[R].title,errors:l?.meta?.errors?.[R].title,errorPrefix:"srs:decks.one.about.properties.title.errors",value:n.title||"",onChange:p}),(0,s.jsx)(L.Z,{className:"add-repping__submit",disabled:d,onClick:m,content:e(`${z}.submit`)})]})}var W=i(6118);const Q="srs:reppings.add",K="repping_add";function B(){const{t:e}=(0,w.$)("srs"),{push:t}=(0,u.k6)(),i=(0,o.oR)(o.zr),[n,a]=(0,r.useState)({title:""}),{isLoading:d,error:l,mutate:c}=(0,W.Cq)({isDemo:i}),p=(0,r.useCallback)((({target:{name:e,value:t}})=>{a((i=>({...i,[e]:t})))}),[a]),m=(0,r.useCallback)((()=>{c(n,{onSuccess:e=>{t(g.Z.repping({isDemo:i,id:e.data.id}))}})}),[n,i]);return(0,s.jsxs)("form",{className:"add-repping",children:[(0,s.jsx)(M.Z,{className:"add-repping__title",name:"title",label:e(`${Q}.properties.title.label`),placeholder:e(`${Q}.properties.title.placeholder`),isError:!!l?.meta?.errors?.[K].title,errors:l?.meta?.errors?.[K].title,errorPrefix:"srs:reppings.one.about.properties.title.errors",value:n.title||"",onChange:p}),(0,s.jsx)(L.Z,{className:"add-repping__submit",type:"submit",disabled:d,onClick:m,content:e(`${Q}.submit`)})]})}const G="app:layout.header.menu.main.new.items";function H(){const{t:e}=(0,w.$)("app");return(0,s.jsx)("div",{className:"main-menu__add",children:(0,s.jsxs)(Y.mQ,{children:[(0,s.jsxs)(Y.TX,{children:[(0,s.jsx)(Y.GK,{children:e(`${G}.deck`)}),(0,s.jsx)(Y.GK,{children:e(`${G}.repping`)})]}),(0,s.jsx)(Y.I5,{children:(0,s.jsx)(O,{})}),(0,s.jsx)(Y.I5,{children:(0,s.jsx)(B,{})})]})})}const V="app:layout.header.menu.main",F=e=>[{t:`${V}.home`,url:g.Z.home(e)},{t:`${V}.decks`,url:g.Z.decks(e)},{t:`${V}.reppings`,url:g.Z.reppings(e)},{t:`${V}.new.text`,dropdown:H}],U=()=>[],J=()=>F({}).map((e=>({t:e.t,component:C.Z})));function X(){const e=(0,o.oR)(o.zr),{isLoading:t,data:i}=(0,d.rk)({isDemo:e}),n=(0,r.useMemo)((()=>t?J():i?.data.uid?F({isDemo:e}):U()),[t,e,!!i?.data.uid]);return 0===n.length?(0,s.jsx)("div",{className:"main-menu"}):(0,s.jsx)(S,{items:n,name:"main-menu"})}var ee=i(8767),te=i(9598);const ie="app:layout.header.menu.secondary.user";function se(){const{t:e}=(0,w.$)("app"),{push:t}=(0,u.k6)(),i=(0,ee.useQueryClient)(),n=(0,o.oR)(o.zr),{data:a}=(0,d.rk)({isDemo:n}),{mutate:l}=(0,d._y)({isDemo:n}),{profile:c}=a?.data||{},p=(0,r.useCallback)((()=>{l({},{onSuccess:()=>{i.resetQueries(["users","current"]),t(g.Z.home({isDemo:n}))}})}),[n]);return(0,s.jsxs)(s.Fragment,{children:[c&&(0,s.jsxs)("div",{className:"user-menu__user",children:[(0,s.jsx)(te.Z,{className:"user-menu__user-avatar",profile:c}),(0,s.jsx)("span",{className:"user-menu__user-full-name",children:c.fullName})]}),(0,s.jsxs)("ul",{className:"user-menu__items",children:[(0,s.jsx)("li",{className:"user-menu__item",children:(0,s.jsx)(A.OL,{className:"user-menu__profile user-menu__link",to:g.Z.account({isDemo:n}),activeClassName:"active",exact:!0,children:e(`${ie}.profile`)})}),(0,s.jsx)("li",{className:"user-menu__item",children:(0,s.jsx)(L.Z,{className:"user-menu__logout user-menu__link",onClick:p,content:e(`${ie}.logout`)})})]})]})}var re=i(9025);function ne(){const{i18n:e}=(0,w.$)("app"),t=(0,r.useCallback)((({target:{value:t}})=>{e.changeLanguage(t)}),[]);return(0,s.jsx)(re.Z,{className:"app-language-select",value:e.language,onChange:t})}function ae(){const e=(0,o.oR)(o.zr),{isLoading:t,data:i}=(0,d.rk)({isDemo:e});return t?null:(0,s.jsx)("nav",{className:"secondary-menu",children:(0,s.jsxs)("ul",{className:"secondary-menu__items",children:[(0,s.jsx)("li",{className:"secondary-menu__item",children:(0,s.jsx)(ne,{})}),i?.data.uid&&(0,s.jsx)("li",{className:"secondary-menu__item",children:(0,s.jsx)(E.Z,{className:"user-menu",hasOverlay:!0,link:"",children:(0,s.jsx)(se,{})})})]})})}function de(){const e=(0,o.oR)(o.zr);return(0,s.jsx)("div",{className:"app-logo",children:(0,s.jsx)(A.rU,{className:"app-logo__link",to:g.Z.home({isDemo:e}),children:"koloda"})})}function oe(){return(0,o.oR)(o.Gl)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l.Z,{children:[(0,s.jsx)(de,{}),(0,s.jsx)(X,{}),(0,s.jsx)(ae,{})]}),(0,s.jsx)(c.Z,{children:(0,s.jsx)(D,{})})]}):(0,s.jsx)(D,{})}function le(){const e=(0,o.oR)(o.zr),t=(0,o.oR)(o.zv),{data:i}=(0,d.rk)({isDemo:e});return(0,r.useEffect)((()=>{a().load({google:{families:["Inter:100,200,300,400,500,600,700,800,900"]},classes:!1})}),[]),(0,r.useEffect)((()=>{t(!1===i?.data?.tutorial?.isDone)}),[i?.data?.tutorial?.isDone]),(0,s.jsx)(r.Suspense,{fallback:null,children:(0,s.jsx)(oe,{})})}},4434:(e,t,i)=>{i.d(t,{Hc:()=>a,PY:()=>l,SC:()=>c,YJ:()=>d,vB:()=>o});var s=i(8767),r=i(781);const n={isDemo:!0};function a(){return(0,s.useQuery)(["app","languages"],(async()=>(0,r.Y)("app","languages_get",[200],{})))}function d(){return(0,s.useMutation)((async e=>(0,r.Y)("app","demo_clear",[200],e,n)))}function o(e){return(0,s.useQuery)(["app","demo",e.language],(async()=>(0,r.Y)("app","demo_get",[200],e,n)),{enabled:e.enabled})}function l(e){return(0,s.useQuery)(["app","demo","reppings",e.language,e.name],(async()=>(0,r.Y)("app","demo_repping_get",[200],e,n)),{enabled:!!e.name})}function c(e){return(0,s.useQuery)(["app","demo","decks",e.language,e.name],(async()=>(0,r.Y)("app","demo_deck_get",[200],e,n)),{enabled:!!e.name})}},6228:(e,t,i)=>{i.d(t,{Gl:()=>a,N1:()=>l,PV:()=>d,oR:()=>n,zr:()=>o,zv:()=>c});var s=i(4671),r=i(8172);const n=(0,s.Z)((e=>({ui:{isLayoutRendered:!0},demo:{},tutorial:{isOn:!1},setIsLayoutRendered:t=>e((0,r.ZP)((e=>{e.ui.isLayoutRendered=t}))),setIsDemo:t=>e((0,r.ZP)((e=>{e.demo.isDemo=t}))),setTutorialIsOn:t=>e((0,r.ZP)((e=>{e.tutorial.isOn=t})))}))),a=e=>e.ui.isLayoutRendered,d=e=>e.setIsLayoutRendered,o=e=>e.demo.isDemo,l=e=>e.setIsDemo,c=e=>e.setTutorialIsOn},2552:(e,t,i)=>{i.d(t,{j:()=>a,o:()=>n});var s=i(7055),r=i(5873);function n(e){return e.toISOString()}function a(e,t,i=new Date){const n="en"===e?{}:{locale:r.Z};return(0,s.Z)(t,i,n)}},3802:(e,t,i)=>{function s(e){0}i.d(t,{Z:()=>n});const r={AppError:e=>(s(),{t:e.code}),ValidationError:e=>(s(),{}),RequestError:e=>(s(),{t:`${e.code}.${e.status}`})};class n extends Error{constructor(e,t,i={}){const s=t||"";super(s),this.name=this.constructor.name,this.domain=e,this.code=t,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(s).stack;for(const e in i)i.hasOwnProperty(e)&&(this[e]=i[e]);const n=r?.[this.name](this);if("object"==typeof n&&n)for(const e in n)n.hasOwnProperty(e)&&(this[e]=n[e])}}},9025:(e,t,i)=>{i.d(t,{Z:()=>o});var s=i(5893),r=i(7294),n=i(4434),a=i(3411);function d({item:e}){return(0,s.jsx)("span",{className:"app-language-select__language","data-language":e.id,children:e.value})}function o({className:e,label:t,disabled:i,value:o,onChange:l}){const{data:{data:c}={}}=(0,n.Hc)(),u=(0,r.useMemo)((()=>c?.find((e=>e?.id===o))),[c,o]);return c?(0,s.jsx)(a.Z,{className:e,name:"language",label:t,disabled:i,items:c,selectedItem:u,ValueComponent:d,ItemComponent:d,onChange:l}):null}},530:(e,t,i)=>{i.d(t,{Z:()=>n});var s=i(5893),r=i(6010);function n({prefix:e,children:t}){return(0,s.jsx)("header",{className:(0,r.Z)(e&&`${e}-header`,"app-header"),children:(0,s.jsx)("div",{className:(0,r.Z)(e&&`${e}-header__content`,"app-header__content"),children:t})})}},7443:(e,t,i)=>{i.d(t,{Z:()=>n});var s=i(5893),r=i(6010);function n({prefix:e,children:t}){return(0,s.jsx)("main",{className:(0,r.Z)(e&&`${e}-main`,"app-main"),children:t})}},6347:(e,t,i)=>{function s(e){return function(e){const t=e.sort(((e,t)=>e-t));return t.reduce(((e,t)=>e+1===t?t:e),0)+1}(e.filter((e=>e.id)).map((e=>e.id)))}function r(e,t=0){const i=parseInt(e,10);return Number.isNaN(i)?t:i}function n(e,t,i,s=!1){return e<t?s?i:t:e>i?s?t:i:e}i.d(t,{Dc:()=>s,_z:()=>n,e$:()=>r})},6829:(e,t,i)=>{i.d(t,{Z:()=>d});var s=i(6544);const r="/koloda",n=`${r}/try`,a=({isDemo:e},t)=>e?n+t:r+t,d={home:e=>a(e,"/"),account:e=>a(e,"/account"),dashboard:e=>a(e,"/dashboard"),demo:()=>n,reppings:e=>a(e,"/reppings"),newRepping:()=>"/reppings/new",repping:e=>a(e,`/reppings/${e?.id}`),divel:e=>a(e,`/reppings/${e?.reppingId}/divels/${e?.id}`),decks:e=>a(e,"/decks"),newDeck:()=>"/decks/new",deck:e=>a(e,`/decks/${e?.id}`),lesson:e=>a(e,`/learn/${e.type}${(0,s.qs)(e,["deck"])}`)}},4627:(e,t,i)=>{i.d(t,{Z:()=>n});var s=i(5893),r=i(6010);function n(e){return(0,s.jsx)("div",{className:(0,r.Z)("content-block",e.className),children:e.children})}},6941:(e,t,i)=>{i.d(t,{Z:()=>l});var s=i(5893),r=i(7294),n=i(5977),a=i(9293),d=i(6010),o=i(7325);function l({className:e,hasOverlay:t,link:i,children:l}){const c=(0,n.TH)(),[u,p]=(0,r.useReducer)((e=>!e),!1),m=(0,r.useRef)(null);return(0,a.Z)(m,(()=>{u&&p()})),(0,r.useEffect)((()=>{u&&p()}),[c.pathname]),(0,s.jsxs)("div",{className:(0,d.Z)(e,"dropdown"),ref:m,children:[t&&(0,s.jsx)("div",{className:(0,d.Z)(e&&`${e}__overlay`,"dropdown__overlay"),"data-is-open":u,onClick:p,"aria-hidden":"true"}),(0,s.jsx)(o.Z,{className:(0,d.Z)(e&&`${e}__toggle`,"dropdown__toggle"),"data-is-open":u,onClick:p,children:i&&(0,s.jsx)("span",{className:(0,d.Z)(e&&`${e}__toggle-value`,"dropdown__toggle-value"),children:i})}),(0,s.jsx)("div",{className:(0,d.Z)(e&&`${e}__content`,"dropdown__content"),"data-is-open":u,children:l})]})}},5398:(e,t,i)=>{i.d(t,{N9:()=>n,f5:()=>p,ku:()=>c,th:()=>o,w9:()=>l,yw:()=>u});var s=i(8156),r=i(174);const n=[{type:"p",children:[{text:""}]}],a={"mod+b":"bold","mod+i":"italic","mod+u":"underline"},d=["ol","ul"];function o(e,t){const i=c(e,t),s=d.includes(t);r.YR.unwrapNodes(e,{match:e=>!r.ML.isEditor(e)&&r.W_.isElement(e)&&d.some((t=>t===e.type)),split:!0}),r.YR.setNodes(e,{type:i?"p":"li"}),!i&&s&&r.YR.wrapNodes(e,{type:t,children:[]})}function l(e,t){u(e,t)?r.ML.removeMark(e,t):r.ML.addMark(e,t,!0)}function c(e,t){const{selection:i}=e;if(!i)return!1;const[s]=Array.from(r.ML.nodes(e,{at:r.ML.unhangRange(e,i),match:e=>!r.ML.isEditor(e)&&r.W_.isElement(e)&&e.type===t}));return!!s}function u(e,t){const i=r.ML.marks(e);return!!i&&!0===i[t]}function p(e,t){Object.keys(a).forEach((i=>{if((0,s.ZP)(i,e)){e.preventDefault();const s=a[i];l(t,s)}}))}},7325:(e,t,i)=>{i.d(t,{Z:()=>n});var s=i(5893),r=i(6010);function n({className:e,type:t,content:i,children:n,...a}){return(0,s.jsx)("button",{className:(0,r.Z)(e,"button"),type:t||"button",...a,children:i??n})}},2335:(e,t,i)=>{i.d(t,{Z:()=>r});var s=i(5893);function r({id:e,isError:t,className:i,label:r,...n}){return r?(0,s.jsx)("label",{htmlFor:e,className:i,"data-is-error":t,...n,children:r}):null}},7139:(e,t,i)=>{i.d(t,{Z:()=>c});var s=i(5893),r=i(6010),n=i(2335),a=i(7294),d=i(2327),o=i(7325);function l({className:e,isError:t,errors:i,errorsDropdown:r,errorPrefix:n}){const{t:l}=(0,d.$)(),[c,u]=(0,a.useState)(!1);return t?(0,s.jsxs)(s.Fragment,{children:[t&&i&&r&&(0,s.jsx)(o.Z,{className:`${e}__errors-toggle`,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1)}),t&&i&&(0,s.jsx)("ul",{className:`${e}__errors-list`,"data-is-dropdown":!!r,"data-is-open":c,children:i.map((t=>(0,s.jsx)("li",{className:`${e}__errors-list-item`,children:l(`${n}.${t}`)},t)))})]}):null}function c({className:e,id:t,label:i,isError:a,errors:d,errorsDropdown:o,errorPrefix:c,...u}){return(0,s.jsxs)("div",{className:(0,r.Z)(e,"text-input"),children:[(0,s.jsx)(n.Z,{className:(0,r.Z)(e&&`${e}-label`,"text-input__label label"),id:t,label:i,isError:a}),(0,s.jsx)("input",{className:(0,r.Z)(e&&`${e}-value`,"text-input__value value"),type:u.type||"input",id:t,value:u.value||"","data-is-error":a,...u}),(0,s.jsx)(l,{className:"text-input",isError:a,errors:d,errorsDropdown:o,errorPrefix:c})]})}},3411:(e,t,i)=>{i.d(t,{Z:()=>l});var s=i(5893),r=i(7294),n=i(805),a=i(6010);const d=e=>e?.id||"",o=e=>e?.value||"";function l({className:e,name:t,ValueComponent:i,ItemComponent:l,...c}){const u=c.getKey||d,p=c.getValue||o,m=(0,a.Z)(e&&`${e}-label`,"select__label label"),g=(0,a.Z)(e&&`${e}__value`,"select__value"),f=(0,a.Z)(e&&`${e}__items`,"select__items"),_=(0,a.Z)(e&&`${e}__item`,"select__item"),y=(0,r.useCallback)((({selectedItem:e})=>{c.onChange({target:{name:t,value:u(e),item:e}})}),[t,c.onChange,u]),{getLabelProps:k,getToggleButtonProps:h,getMenuProps:$,getItemProps:j,isOpen:b,selectedItem:v,highlightedIndex:x,toggleMenu:P}=(0,n.L7)({items:c.items,initialSelectedItem:c.selectedItem,selectedItem:c.selectedItem,itemToString:p,onSelectedItemChange:y});return(0,s.jsxs)("div",{className:(0,a.Z)(e,"select"),"data-is-open":b,"data-is-readonly":!!c.readOnly,children:[c.label&&(0,s.jsx)("label",{...k({className:m}),children:c.label}),(0,s.jsxs)("div",{className:"select__content",children:[(0,s.jsx)("button",{className:"select__control",disabled:c.disabled||c.readOnly,onClick:P,...h(),children:(0,s.jsx)("span",{className:g,children:i?(0,s.jsx)(i,{item:v}):p(v)})}),(0,s.jsx)("ul",{...$({className:f}),children:b&&c.items.map(((e,t)=>(0,s.jsx)("li",{"data-is-highlighted":x===t,"data-is-selected":v===e,...j({className:_,item:e,index:t}),children:l?(0,s.jsx)(l,{item:e}):p(e)},u(e))))})]})]})}},6333:(e,t,i)=>{i.d(t,{Z:()=>n});var s=i(5893),r=i(6010);function n({className:e}){return(0,s.jsx)("div",{className:(0,r.Z)(e,"skeleton-line skeleton")})}},5443:(e,t,i)=>{i.d(t,{GK:()=>o,I5:()=>l,TX:()=>d,mQ:()=>a});var s=i(5893),r=i(6010),n=i(340);function a({children:e,...t}){return(0,s.jsx)(n.mQ,{className:"tabs",disabledTabClassName:"disabled",selectedTabClassName:"selected",selectedTabPanelClassName:"selected",...t,children:e})}function d({className:e,...t}){return(0,s.jsx)(n.td,{className:(0,r.Z)(e,"tabs-header"),...t})}function o({className:e,children:t,...i}){return(0,s.jsx)(n.OK,{className:(0,r.Z)(e,"tab__header"),...i,children:t})}function l({className:e,...t}){return(0,s.jsx)(n.x4,{className:(0,r.Z)(e,"tab__content"),...t})}d.tabsRole="TabList",o.tabsRole="Tab",l.tabsRole="TabPanel"},506:(e,t,i)=>{i.d(t,{B1:()=>a,CA:()=>n,Wo:()=>r,ib:()=>d});var s=i(1700);const r="auth.uid",n="auth.demo_uid",a="auth.token",d={settings:{learning:s.Y,tutorial:{isDisabled:!1}},tutorial:{isDone:!1}}},4232:(e,t,i)=>{i.d(t,{rk:()=>d,YA:()=>l,_y:()=>c,sU:()=>o,kD:()=>u});var s=i(8767),r=i(781),n=i(506);function a({token:e,id:t},{isDemo:i}){i?localStorage.setItem(n.CA,t):(localStorage.setItem(n.B1,e),localStorage.setItem(n.Wo,t))}function d(e){return(0,s.useQuery)(["users","current"],(async()=>{const t=localStorage.getItem(e.isDemo?n.CA:n.Wo);return(0,r.Y)("auth","user_get",[200,400,401,404],{uid:t},e)}),{enabled:void 0!==e.isDemo,staleTime:1/0,retry:!1,refetchOnWindowFocus:!1,refetchOnMount:!1})}function o(e){return(0,s.useMutation)((async t=>(0,r.Y)("auth","signup_demo",[201],t,e)),{onSuccess:e=>a(e,{isDemo:!0})})}function l(e){return(0,s.useMutation)((async t=>(0,r.Y)("auth","login",[200],t,e)),{onSuccess:t=>a(t,e)})}function c(e){return(0,s.useMutation)((async()=>{!function({isDemo:e}){e||localStorage.removeItem(n.B1),localStorage.removeItem(e?n.CA:n.Wo)}(e)}))}function u(e){return(0,s.useMutation)((async t=>(0,r.Y)("auth","user_update",[200],t,e)))}},9598:(e,t,i)=>{i.d(t,{Z:()=>n});var s=i(5893),r=i(6010);function n({className:e,profile:t}){return(0,s.jsx)("div",{className:(0,r.Z)(e,"avatar"),"data-name-starts-with":t?.fullName?.charAt(0)})}},429:(e,t,i)=>{i.d(t,{DS:()=>l,GH:()=>o,OM:()=>c,PK:()=>d,e_:()=>a});var s=i(5398),r=i(9589),n=i(2608);const a=9,d=999,o={description:s.N9,categoryId:1,subjectId:1,languageId:1,fields:[],fieldsTotal:0,cardsTotal:0,isEligible:!1,isLearning:!1},l={title:"",type:(0,n.a1)("show"),role:(0,n.Ku)("extra"),settings:{actions:{show:{isLabelVisible:!1},typeTest:{isLabelVisible:!1,processings:{}}}}},c={id:0,content:{},progress:{},lesson:{...r.Ez},meta:{status:"initial"}}},5619:(e,t,i)=>{i.d(t,{Bq:()=>p,Dk:()=>a,Hc:()=>d,U:()=>c,ez:()=>g,kM:()=>_,k_:()=>o,qG:()=>u,tF:()=>f,xD:()=>l,zk:()=>m});var s=i(8767),r=i(1068),n=i(781);function a({language:e}){return(0,s.useQuery)(["subjects",e],(async()=>(0,n.Y)("srs","subjects_get",[200],{language:e})),{enabled:!!e})}function d({language:e}){return(0,s.useQuery)(["languages",e],(async()=>(0,n.Y)("srs","languages_get",[200],{language:e})),{enabled:!!e})}function o(e,t){return(0,s.useInfiniteQuery)(["decks","many",e],(async({pageParam:i})=>(0,n.Y)("srs","decks_get",[200],{...e,offset:i},t)),{getNextPageParam:e=>e.meta.pagination.nextOffset})}function l(e){return(0,s.useMutation)((async t=>(0,n.Y)("srs","deck_import",[201],t,e)))}function c(e){return(0,s.useMutation)((async t=>(0,n.Y)("srs","deck_add",[201],t,e)))}function u({id:e},t){return(0,s.useQuery)(["decks","one",e],(async()=>(0,n.Y)("srs","deck_get",[200],{id:e},t)),r.km)}function p({deckId:e},t){return(0,s.useQuery)(["cards","many",e],(async()=>(0,n.Y)("srs","cards_get",[200],{deckId:e},t)))}function m(e){return(0,s.useMutation)((async t=>(0,n.Y)("srs","deck_update",[200],t,e)))}function g(e){return(0,s.useMutation)((async t=>(0,n.Y)("srs","deck_delete",[204],t,e)))}function f(e){return(0,s.useMutation)((async t=>(0,n.Y)("srs","fields_set",[200],t,e)))}function _(e){return(0,s.useMutation)((async t=>(0,n.Y)("srs","cards_set",[200],t,e)))}},2608:(e,t,i)=>{i.d(t,{Ko:()=>o,Ku:()=>c,MR:()=>a,WI:()=>u,Z9:()=>s,a1:()=>d,cI:()=>l,ij:()=>r,tm:()=>n});const s=[{id:1,value:"text"}],r=[{id:1,value:"front"},{id:2,value:"back"},{id:3,value:"extra"}],n=e=>s.find((t=>t.id===e)),a=e=>n(e)?.value,d=e=>(e=>s.find((t=>t.value===e))||s[0])(e).id,o=e=>r.find((t=>t.id===e)),l=e=>o(e)?.value,c=e=>(e=>r.find((t=>t.value===e))||r[0])(e).id;function u(e){return a(e.type),[{text:""}]}},1700:(e,t,i)=>{i.d(t,{Y:()=>r});var s=i(9589);const r={lessonLimits:{[s.Yw]:10,[s.uT]:50}}},9589:(e,t,i)=>{i.d(t,{Ez:()=>d,T4:()=>n,Yw:()=>s,ak:()=>a,uT:()=>r});const s="new",r="rep",n=[s,r],a={isProcessed:!1,isDone:!1,isError:!1,cardsTotal:0,cardsDone:0,currentCard:0},d={actions:[],results:[],currentActionIndex:0,isInitial:!1,isDone:!1}},3900:(e,t,i)=>{i.d(t,{BL:()=>r,Dv:()=>k,Fr:()=>a,Gu:()=>_,N3:()=>y,QU:()=>l,UJ:()=>c,W$:()=>s,Z1:()=>g,a:()=>f,aV:()=>n,av:()=>o,jK:()=>d,k8:()=>m,mt:()=>u,rC:()=>p});const s=[{id:1,value:"show",roleTested:null},{id:2,value:"typeTest",roleTested:"back"},{id:3,value:"typeTestReverse",roleTested:"front"}],r=[{id:1,value:"back"},{id:2,value:"forward"},{id:3,value:"to"},{id:4,value:"repeat"},{id:5,value:"complete"}],n=[[f("show"),1]];function a(e,t){return Array.isArray(e?.divels)?t?e.divels.find((e=>e?.id===t)):e.divels.find((e=>e.isDefault))||e.divels[0]:null}function d(e,t){return Array.isArray(e?.phases)?t?e.phases.find((e=>e?.id&&e.id===t)):e.phases[0]:null}function o(e,t){return e?.phases?.[t]||null}function l(e,t){const i=e.phases?.findIndex((e=>e.id===t));return void 0===i||-1===i?null:i}function c(e){return e?e.actions:null}function u(e){return s.find((t=>t.id===e))?.roleTested}function p(e,{lesson:t}){if(!e.triggers||!t.results)return null;return t.results.reduce(((e,t)=>t.incorrect+e),0)>0?e.triggers[1]:e.triggers[0]}function m(e){return s.find((t=>t.id===e))}function g(e){return m(e)?.value}function f(e){return function(e){return s.find((t=>t.value===e))}(e)?.id}function _(e){return r.find((t=>t.id===e))}function y(e){return _(e)?.value}function k(e){return function(e){return r.find((t=>t.value===e))}(e)?.id}},7474:(e,t,i)=>{i.d(t,{DR:()=>m,Ft:()=>a,HG:()=>c,Q6:()=>u,VS:()=>d,py:()=>l,rK:()=>g,rO:()=>o,sg:()=>p,w4:()=>n});var s=i(5398),r=i(3900);const n={description:s.N9,divels:[],isEligible:!1,requirements:{divels:!1,phases:!1}},a=9,d={title:"",phases:[]},o=1,l=99,c=[(0,r.a)("show")||0,1],u={id:1,actions:[[(0,r.a)("show")||0,1]],actionsDraft:c,triggers:{0:{offset:[(0,r.Dv)("forward")||0,0],delay:[0,0,0,0,0]},1:{offset:[(0,r.Dv)("back")||0,0],delay:[0,0,0,0,0]}}},p=[1,0],m=["years","months","weeks","days","hours"],g={years:{min:0,max:10},months:{min:0,max:11},weeks:{min:0,max:4},days:{min:0,max:30},hours:{min:0,max:23}}},8651:(e,t,i)=>{function s(e){const t=!!(e?.divels?.length>0),i=t&&e?.divels?.every((e=>!!e?.phases?.length));return{isEligible:t&&i,requirements:{divels:t,phases:i}}}function r(e,t){e.forEach(((i,s)=>{e[s].isDefault=s===t}))}i.d(t,{C:()=>r,P:()=>s})},6118:(e,t,i)=>{i.d(t,{$r:()=>u,Cq:()=>c,Cr:()=>a,DP:()=>d,Nb:()=>p,W$:()=>l,d6:()=>f,rK:()=>m,s5:()=>o,xA:()=>g});var s=i(8767),r=i(1068),n=i(781);function a(e,t){return(0,s.useQuery)(["reppings","many"],(async()=>(0,n.Y)("srs","reppings_get",[200],e,t)),r.km)}function d(e,t){return(0,s.useInfiniteQuery)(["reppings","paginated",e],(async({pageParam:i})=>(0,n.Y)("srs","reppings_get",[200],{...e,offset:i},t)),{getNextPageParam:e=>e.meta.pagination.nextOffset})}function o({id:e},t){return(0,s.useQuery)(["reppings","one",e],(async()=>(0,n.Y)("srs","repping_get",[200],{id:e},t)),r.km)}function l({reppingId:e,id:t},i){return(0,s.useQuery)(["divels","one",{id:t,reppingId:e}],(async()=>(0,n.Y)("srs","divel_get",[200],{reppingId:e,id:t},i)))}function c(e){return(0,s.useMutation)((async t=>(0,n.Y)("srs","repping_add",[201],t,e)))}function u(e){return(0,s.useMutation)((async t=>(0,n.Y)("srs","repping_import",[201],t,e)))}function p(e){return(0,s.useMutation)((async t=>(0,n.Y)("srs","repping_update",[200],t,e)))}function m(e){return(0,s.useMutation)((async t=>(0,n.Y)("srs","repping_delete",[204],t,e)))}function g(e){return(0,s.useMutation)((async t=>(0,n.Y)("srs","divels_update",[200],t,e)))}function f(e){return(0,s.useMutation)((async t=>(0,n.Y)("srs","divel_update",[204],t,e)))}}}]);