"use strict";(self.webpackChunkkoloda=self.webpackChunkkoloda||[]).push([[479],{7917:(e,t,s)=>{s.d(t,{bD:()=>l,gP:()=>a,jl:()=>i,lf:()=>r,wO:()=>n});const a=e=>"true"===e;function n(e,t){e.params.sort=t}function i(e,{name:t,checked:s},a){e.params.filters||(e.params.filters={}),e.ui.filters||(e.ui.filters={});const{filters:n}=e.params,[i,l]=t.split("__"),{convert:r,values:c}=a.find((e=>e.name===i))||{};s?e.ui.filters[t]=s:delete e.ui.filters[t],r&&c&&(s&&(n[i]?(n[i].push(r(l)),n[i].length===c.length&&delete n[i]):n[i]=[r(l)]),s||(n[i]?(n[i]=n[i].filter((e=>e!==r(l))),n[i].length||delete n[i]):n[i]=c.filter((e=>e!==r(l)))))}function l(e){e.params.filters||(e.params.filters={}),e.ui.filters||(e.ui.filters={}),e.meta.areFiltersEmpty=0===Object.keys(e.ui.filters).length&&0===Object.keys(e.params.filters).length}function r(e){delete e.ui.filters,delete e.params.filters,e.meta.areFiltersEmpty=!0}},691:(e,t,s)=>{s.d(t,{D5:()=>g,GG:()=>o,Om:()=>f,Pn:()=>r,SE:()=>l,fn:()=>c,s6:()=>i,tH:()=>m,y$:()=>u,zs:()=>d});var a=s(3465),n=s.n(a);function i(e,t){e.meta.isDemo=t}function l(e,{entity:t,mode:s}){e[t].status.editbar.mode=s,e[t].status.message="initial",function(e){const{data:t,status:{canEdit:s,editbar:{mode:a}}}=e;"edit"===a&&s&&e.data&&(e.backup=n()(t))}(e[t])}function r(e,t){const{entity:s,property:a,value:n}=t;e[s].status.display[a]=n}function c(e,{entity:t}){e[t].status.message="saving",e[t].status.isSaving=!0,e[t].status.discard.isReady=!1}function d(e,{entity:t}){e[t].status.isError=!1,e[t].status.message="validated",e[t].error=null}function o(e,{entity:t,error:s}){e[t].status.isError=!0,e[t].status.message="error",e[t].error=s}function u(e,{entity:t,error:s}){e[t].status.isError=!0,e[t].status.isSaved=!1,e[t].status.isSaving=!1,e[t].status.message="error",e[t].error=s}function m(e){const{status:t,backup:s}=e;e.error=null,t.isError=!1,t.isSaved=!0,t.isSaving=!1,t.message="saved",t.discard.isAvailable=!!s,t.discard.isReady=!0,t.editbar.mode="view"}function g(e){e.isSaved=!1,e.discard.isEnabled&&(e.discard.isAvailable=!0)}function f(e,{entity:t}){const{backup:s,status:a}=e[t],{isEnabled:i,isAvailable:l,isReady:r}=a.discard;if(s&&(i&&l&&r)){const i="click"===a.editbar.variant;e[t].data=n()(s),e[t].backup=null,e[t].status.discard.isAvailable=!1,e[t].status.isSaved=i,i&&(e[t].status.editbar.mode="view",e[t].status.message="discarded",e[t].error=null)}}},5608:(e,t,s)=>{s.d(t,{Z:()=>o});const a="app:titles",n=`${a}.delimiter`,i=`${a}.app`,l=`${a}.demo`,r=`${a}.reppings`,c=`${a}.decks`,d=(e,t)=>e.join(t),o={account:(e,{isDemo:t})=>d(t?[e(`${a}.account`),e(l),e(i)]:[e(`${a}.account`),e(i)],e(n)),learnings:(e,{isDemo:t})=>d(t?[e(l),e(i)]:[e(i)],e(n)),reppings:(e,{isDemo:t})=>d(t?[e(r),e(l),e(i)]:[e(r),e(i)],e(n)),repping:(e,{isDemo:t,repping:s})=>d(t?[s,e(r),e(l),e(i)]:[s,e(r),e(i)],e(n)),divel:(e,{isDemo:t,repping:s,divel:a})=>d(t?[a,s,e(r),e(l),e(i)]:[a,s,e(r),e(i)],e(n)),decks:(e,{isDemo:t})=>d(t?[e(c),e(l),e(i)]:[e(c),e(i)],e(n)),deck:(e,{isDemo:t,deck:s})=>d(t?[s,e(c),e(l),e(i)]:[s,e(c),e(i)],e(n)),lesson:(e,{isDemo:t})=>d(t?[e(`${a}.lesson`),e(l),e(i)]:[e(`${a}.lesson`),e(i)],e(n))}},7450:(e,t,s)=>{s.d(t,{Z:()=>c});var a=s(5893),n=s(6010);var i=s(2837);var l=s(4627);function r({className:e,entity:t,children:s,...i}){return(0,a.jsx)("div",{className:(0,n.Z)(e,"feature"),"data-entity":t,...i,children:s})}r.Header=function({children:e}){return(0,a.jsx)("header",{className:"feature__header",children:e})},r.Title=function({isLoading:e,children:t}){return e?(0,a.jsx)(i.Z,{}):(0,a.jsx)("h1",{className:"feature__title",children:t})},r.Toolbar=function({children:e}){return(0,a.jsx)("div",{className:"feature__toolbar",children:e})},r.Content=function({children:e}){return(0,a.jsx)(l.Z,{className:"feature__content",children:e})},r.Section=function({className:e,mode:t,children:s}){return(0,a.jsx)("div",{className:(0,n.Z)(e,"feature__section"),"data-mode":t,children:s})},r.SectionHeader=function({className:e,title:t,children:s}){return(0,a.jsxs)("div",{className:(0,n.Z)(e,"feature__section-header"),children:[t&&(0,a.jsx)("h2",{className:(0,n.Z)(`${e}__title`,"feature__section-header-title"),children:t}),s]})},r.SectionContent=function({className:e,children:t}){return(0,a.jsx)("div",{className:(0,n.Z)(e,"feature__section-content"),children:t})},r.Subsection=function({className:e,mode:t,children:s}){return(0,a.jsx)("div",{className:(0,n.Z)(e,"feature__subsection"),"data-mode":t,children:s})},r.SubsectionHeader=function({className:e,title:t,children:s}){return(0,a.jsxs)("div",{className:(0,n.Z)(e,"feature__subsection-header"),children:[t&&(0,a.jsx)("h3",{className:(0,n.Z)(`${e}__title`,"feature__subsection-header-title"),children:t}),s]})},r.SubsectionContent=function({className:e,children:t}){return(0,a.jsx)("div",{className:(0,n.Z)(e,"feature__subsection-content"),children:t})},r.Footer=function({children:e}){return(0,a.jsx)("header",{className:"feature__footer",children:e})};const c=r},8836:(e,t,s)=>{s.d(t,{Z:()=>f});var a=s(5893),n=s(2327),i=s(7325);var l=s(7294),r=s(3411);const c=e=>e;const d="app:ui.feature.many.options.filters";function o({children:e}){const{t}=(0,n.$)(),[s,r]=(0,l.useReducer)((e=>!e),!1);return(0,a.jsxs)("div",{className:"many__options",children:[(0,a.jsx)(i.Z,{className:"many__options-toggle","data-is-open":s,onClick:r,content:t("app:ui.feature.many.options.title")}),(0,a.jsx)("div",{className:"many__options-content","data-is-open":s,children:e})]})}o.Sorting=function({items:e,item:t,getValue:s,onChange:i}){const{t:l}=(0,n.$)();return(0,a.jsx)(r.Z,{className:"many__sorting",name:"sort",label:l("app:ui.feature.many.options.sorting.label"),items:e,selectedItem:t,getKey:c,getValue:s,onChange:i})},o.Filters=function({isEmpty:e,onClear:t,children:s}){const{t:l}=(0,n.$)();return(0,a.jsxs)("div",{className:"many__filters",children:[(0,a.jsxs)("div",{className:"many__filters-header",children:[(0,a.jsx)("span",{className:"many__filters-title",children:l(`${d}.title`)}),!1===e&&(0,a.jsx)(i.Z,{className:"many__filters-clear",disabled:e,onClick:t,content:l(`${d}.clear`)})]}),(0,a.jsx)("div",{className:"many__filters-content",children:s})]})},o.Filter=function({title:e,isOpenByDefault:t,children:s}){const[n,r]=(0,l.useReducer)((e=>!e),!!t);return(0,a.jsxs)("div",{className:"many__filter",children:[(0,a.jsx)(i.Z,{className:"many__filter-toggle","data-is-open":n,onClick:r,children:(0,a.jsx)("span",{className:"many__filter-title",children:e})}),(0,a.jsx)("div",{className:"many__filter-content","data-is-open":n,children:s})]})};const u=o;var m=s(3727);function g({entity:e,children:t}){return(0,a.jsx)("div",{className:"many","data-entity":e,children:t})}g.Content=function({query:e,children:t}){const{t:s}=(0,n.$)();return(0,a.jsxs)("div",{className:"many__content",children:[t,e.hasNextPage&&(0,a.jsx)(i.Z,{className:"many__load",onClick:()=>e.fetchNextPage(),content:s("app:ui.feature.many.load")})]})},g.Options=u,g.Empty=function({length:e,children:t}){return e?null:(0,a.jsx)("div",{className:"many__empty",children:(0,a.jsx)("span",{className:"many__empty-content",children:t})})},g.List=function({length:e,children:t}){return e?(0,a.jsx)("ul",{className:"many__list",children:t}):null},g.ListItem=function({children:e}){return(0,a.jsx)("li",{className:"many__list-item",children:e})},g.ListItemLink=function({to:e,entity:t,children:s}){return(0,a.jsx)(m.rU,{className:"many__list-item-link","data-entity":t,to:e,children:(0,a.jsx)("div",{className:"many__list-item-link-content","data-entity":t,children:s})})};const f=g},2527:(e,t,s)=>{s.d(t,{Z:()=>u});var a=s(5893),n=s(7294),i=s(6010),l=s(805);const r=e=>e?.id||"",c=e=>e?.value||"",d=(e,t,s)=>e.filter((e=>t(e).toLowerCase().startsWith(s.toLowerCase()))),o=[l.Kb.stateChangeTypes.ToggleButtonClick,l.Kb.stateChangeTypes.InputKeyDownArrowDown,l.Kb.stateChangeTypes.InputKeyDownArrowUp];function u({name:e,...t}){const s=t.getKey||r,u=t.getValue||c,m=(0,n.useCallback)((({selectedItem:s})=>{t.onChange({target:{name:e,value:s.id,item:s}})}),[e,t.onChange]),[g,f]=(0,n.useState)(t.items),[p,h]=(0,n.useState)(""),{getLabelProps:y,getComboboxProps:_,getInputProps:b,getToggleButtonProps:j,getMenuProps:x,getItemProps:N,isOpen:v,selectedItem:C,highlightedIndex:k,toggleMenu:Z}=(0,l.Kb)({items:g,inputValue:p,initialSelectedItem:t.selectedItem,selectedItem:t.selectedItem,itemToString:u,onSelectedItemChange:m,onInputValueChange:e=>{h(e.inputValue)},onIsOpenChange:e=>{e.isOpen&&o.includes(e.type)&&h("")}});return(0,n.useEffect)((()=>{v||h(u(C))}),[v,C,u]),(0,n.useEffect)((()=>{f(d(t.items,u,p))}),[p,t.items,u]),(0,a.jsxs)("div",{className:(0,i.Z)(t.className,"autocomplete select"),"data-is-open":v,"data-is-readonly":!!t.readOnly,children:[t.label&&(0,a.jsx)("label",{...y({className:"label"}),children:t.label}),(0,a.jsxs)("div",{..._({className:"autocomplete__content"}),children:[(0,a.jsx)("input",{...b({className:"autocomplete__input",disabled:t.disabled||t.readOnly,placeholder:u(C)})}),(0,a.jsx)("button",{className:"autocomplete__control",disabled:t.disabled||t.readOnly,onClick:Z,...j()}),(0,a.jsx)("ul",{...x({className:"autocomplete__items select__items"}),children:v&&g.map(((e,t)=>(0,a.jsx)("li",{"data-is-highlighted":k===t,"data-is-selected":C===e,...N({className:"autocomplete__item select__item",item:e,index:t}),children:u(e)},s(e))))})]})]})}},2837:(e,t,s)=>{s.d(t,{Z:()=>i});var a=s(5893),n=s(6010);function i({className:e}){return(0,a.jsx)("div",{className:(0,n.Z)(e,"skeleton-title skeleton")})}},6874:(e,t,s)=>{s.d(t,{Z:()=>o});var a=s(5893),n=s(7294),i=s(2327),l=s(6010),r=s(5619),c=s(2527);const d="srs:decks.selects.language";function o({className:e,label:t,readOnly:s,hasNullOption:o,value:u,onChange:m}){const{i18n:{language:g},t:f}=(0,i.$)("srs"),{data:p}=(0,r.Hc)({language:g}),h=(0,n.useMemo)((()=>p?.data?o?[{id:null,value:f(`${d}.items.none`)},...p.data]:p.data:null),[p,o,f]),y=(0,n.useMemo)((()=>h?h.find((e=>e.id===u))||h[0]:null),[h,u,o]);return h?(0,a.jsx)(c.Z,{className:(0,l.Z)(e,"language-select"),name:"languageId",label:t||f(`${d}.label`),readOnly:s,items:h,selectedItem:y,onChange:m}):null}},5044:(e,t,s)=>{s.d(t,{Z:()=>y});var a=s(5893),n=s(7294),i=s(2327),l=s(6010),r=s(5619),c=s(2527),d=s(8172);const o={categoryId:1,subjectId:1,options:{}},u=e=>({...o,...e}),m={dataReceived:function(e,t){e.categories=[...t],e.options.category&&e.categories.unshift(e.options.category);g(e,e.categoryId)},nullOptionUpdated:function(e,t){const{category:s,subject:a}=t;s&&(e.options.category={id:null,value:s});a&&(e.options.subject={id:null,value:a})},categoryChanged:g,subjectChanged:f};function g(e,t){e.categoryId=t,e.categories&&(e.category=t?e.categories.find((e=>e.id===t)):e.categories[0],(e.category?.subjects||e.options.subject)&&(e.subjects=e.category?.subjects||[],e.options.subject&&1!==e.subjects.length&&e.subjects.unshift(e.options.subject),e.subject=e.subjects[0],e.subjectId=e.subject.id,f(e,e.subjectId)))}function f(e,t){e.subjectId=t,e.category&&Array.isArray(e.subjects)&&(e.subject=t?e.subjects.find((e=>e.id===t)):e.subjects[0])}const p=(0,d.ZP)(((e,[t,s])=>(m[t]&&m[t](e,s),e))),h="srs:decks.selects";function y({readOnly:e,hasNullOption:t,categoryId:s,subjectId:d,onCategoryChange:o,onSubjectChange:m,...g}){const{i18n:{language:f},t:y}=(0,i.$)("srs"),{data:_}=(0,r.Dk)({language:f}),[b,j]=(0,n.useReducer)(p,{categoryId:s,subjectId:d},u),{categories:x,subjects:N,category:v,subject:C}=b;return(0,n.useEffect)((()=>{j(["nullOptionUpdated",{category:t&&y(`${h}.category.items.none`),subject:t&&y(`${h}.subject.items.none`)}])}),[t,y]),(0,n.useEffect)((()=>{_?.data&&j(["dataReceived",_?.data])}),[_?.data]),(0,n.useEffect)((()=>{j(["categoryChanged",s])}),[s]),(0,n.useEffect)((()=>{j(["subjectChanged",d])}),[d]),x&&N?(0,a.jsxs)(a.Fragment,{children:[x&&(0,a.jsx)(c.Z,{className:(0,l.Z)(g.categoryClassName,"category-select"),name:"categoryId",label:y(`${h}.category.label`),readOnly:e,items:x,selectedItem:v,onChange:o}),N&&(0,a.jsx)(c.Z,{className:(0,l.Z)(g.subjectClassName,"subject-select"),name:"subjectId",label:y(`${h}.subject.label`),readOnly:e,items:N,selectedItem:C,onChange:m})]}):null}},9958:(e,t,s)=>{s.d(t,{Kt:()=>c,Pm:()=>d,XC:()=>l,dL:()=>r,fN:()=>i});var a=s(8767),n=s(781);function i(e,t){return(0,a.useInfiniteQuery)(["learnings","paginated",e],(async({pageParam:s})=>(0,n.Y)("srs","learnings_get",[200],{...e,offset:s},t)),{getNextPageParam:e=>e.meta.pagination.nextOffset})}function l(e,t){return(0,a.useQuery)(["learnings","one"],(async()=>(0,n.Y)("srs","learning_get",[200,404],e,t)))}function r(e){return(0,a.useMutation)((async t=>(0,n.Y)("srs","learning_add",[200],t,e)))}function c(e){return(0,a.useMutation)((async t=>(0,n.Y)("srs","learning_update",[200],t,e)))}function d(e){return(0,a.useMutation)((async t=>(0,n.Y)("srs","learning_delete",[204],t,e)))}},8479:(e,t,s)=>{s.d(t,{Z:()=>D});var a=s(5893),n=s(7294),i=s(2327),l=s(5608),r=s(9958),c=s(7450),d=s(8836),o=s(8172),u=s(7917),m=s(691);const g=["+title","-title","+last_learned_at","-last_learned_at"],f=["categoryId","subjectId","languageId"],p={meta:{},decks:{status:{editbar:{variant:"click",mode:"view"},message:"initial",isSaved:!0,discard:{isEnabled:!0,isReady:!0},canEdit:!0}},params:{sort:"+title",limit:10,filters:{}},ui:{filters:{}}},h={isDemoSet:m.s6,dataUpdated:function(e,t){e.decks.data=t?.pages?t.pages.reduce(((e,t)=>[...e,...t.data]),[]):void 0},sortUpdated:u.wO,filterUpdated:function(e,{name:t,value:s}){f.includes(t)&&(e.params.filters||(e.params.filters={}),s?e.params.filters[t]=[s]:delete e.params.filters[t],(0,u.bD)(e))},filtersCleared:u.lf};const y=(0,o.ZP)(((e,[t,s])=>(h[t]&&h[t](e,s),e)));var _=s(3727),b=s(6829),j=s(6228),x=s(9589);function N({amount:e,type:t,link:s}){return e>0?(0,a.jsx)(_.rU,{className:"lesson__badge",to:s,"data-lesson-type":t,"data-is-active":"true",children:e}):(0,a.jsx)("span",{className:"lesson__badge","data-lesson-type":t,"data-is-active":"false",children:e})}function v(){const{t:e}=(0,i.$)("srs");return(0,a.jsx)("div",{className:"learnings__no-items",children:(0,a.jsx)("p",{children:e("srs:learnings.many.empty.message")})})}const C="srs:learnings.many.table";function k({state:e}){const{t}=(0,i.$)(),s=(0,j.oR)(j.zr),{decks:{data:n}}=e;return n?(0,a.jsx)("div",{className:"learnings__content",children:(0,a.jsxs)("table",{className:"learnings__table",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{className:"learnings__table-row","data-cell-type":"head",children:["title","new","rep"].map((e=>(0,a.jsx)("td",{className:"learnings__table-cell","data-cell-type":"head","data-cell-column":"title"===e?"title":"badge",children:t(`${C}.captions.${e}`)},e)))})}),(0,a.jsx)("tbody",{children:n.map((e=>(0,a.jsxs)("tr",{className:"learnings__table-row",children:[(0,a.jsx)("td",{className:"learnings__table-cell","data-cell-type":"body","data-cell-column":"title",children:(0,a.jsx)(_.rU,{className:"learnings__table-item-title",to:b.Z.deck({id:e.id,isDemo:s}),children:e.title})}),(0,a.jsx)("td",{className:"learnings__table-cell","data-cell-type":"body","data-cell-column":"badge",children:(0,a.jsx)(N,{type:"new",amount:e.initial,link:b.Z.lesson({type:x.Yw,deck:e.id,isDemo:s})})}),(0,a.jsx)("td",{className:"learnings__table-cell","data-cell-type":"body","data-cell-column":"badge",children:(0,a.jsx)(N,{type:"rep",amount:e.learning,link:b.Z.lesson({type:x.uT,deck:e.id,isDemo:s})})})]},e.id)))})]})}):(0,a.jsx)(v,{})}var Z=s(5044),I=s(6874);const $="srs:learnings.many.options";function O({state:e,dispatch:t}){const{t:s}=(0,i.$)(),{meta:l,params:r}=e,c=(0,n.useCallback)((e=>s(`${$}.sorting.${e}`)),[]),o=(0,n.useCallback)((({target:{value:e}})=>{t(["sortUpdated",e])}),[]),u=(0,n.useCallback)((({target:{name:e,value:s}})=>{t(["filterUpdated",{name:e,value:s}])}),[]),m=(0,n.useCallback)((()=>{t(["filtersCleared",{}])}),[]);return(0,a.jsxs)(d.Z.Options,{children:[(0,a.jsx)(d.Z.Options.Sorting,{items:g,item:r.sort,getValue:c,onChange:o}),(0,a.jsxs)(d.Z.Options.Filters,{isEmpty:l.areFiltersEmpty,onClear:m,children:[(0,a.jsx)(Z.Z,{categoryClassName:"learnings__category",subjectClassName:"learnings__subject",hasNullOption:!0,categoryId:r.filters?.categoryId?.[0],subjectId:r.filters?.subjectId?.[0],onCategoryChange:u,onSubjectChange:u}),(0,a.jsx)(I.Z,{className:"learnings__language",hasNullOption:!0,value:r.filters?.languageId?.[0],onChange:u})]})]})}const S="learnings";function D({isDemo:e}){const{t}=(0,i.$)(),[s,o]=(0,n.useReducer)(y,p),u=(0,r.fN)(s.params,{isDemo:e});return(0,n.useEffect)((()=>{document.title=l.Z.learnings(t,{isDemo:e})}),[t,e]),(0,n.useEffect)((()=>{o(["isDemoSet",e])}),[e]),(0,n.useEffect)((()=>{o(["dataUpdated",u.data])}),[u.data]),(0,a.jsx)(c.Z,{entity:S,children:(0,a.jsx)(c.Z.Content,{children:(0,a.jsxs)(d.Z,{entity:S,children:[(0,a.jsx)(d.Z.Content,{query:u,children:(0,a.jsx)(k,{state:s})}),(0,a.jsx)(O,{state:s,dispatch:o})]})})})}}}]);